{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/asmbl_viewer/ToolConfiguration.vue?b0d1","webpack:///./src/App.vue?7e02","webpack:///./src/components/dialog/BaseDraggableDialog.vue?1bcc","webpack:///./src/components/asmbl_viewer/ColorPicker.vue?da07","webpack:///./src/App.vue?e55d","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?2667","webpack:///./src/components/dialog/BaseDraggableDialog.vue?9536","webpack:///src/components/dialog/BaseDraggableDialog.vue","webpack:///./src/components/dialog/BaseDraggableDialog.vue?d717","webpack:///./src/components/dialog/BaseDraggableDialog.vue?da98","webpack:///./src/components/dialog/index.js","webpack:///./src/components/asmbl_viewer/ColorPicker.vue?bbbe","webpack:///src/components/asmbl_viewer/ColorPicker.vue","webpack:///./src/components/asmbl_viewer/ColorPicker.vue?684e","webpack:///./src/components/asmbl_viewer/ColorPicker.vue?84bd","webpack:///./src/components/asmbl_viewer/ToolConfiguration.vue?2a4d","webpack:///./src/components/asmbl_viewer/viewer/tool.js","webpack:///src/components/asmbl_viewer/ToolConfiguration.vue","webpack:///./src/components/asmbl_viewer/ToolConfiguration.vue?3bd0","webpack:///./src/components/asmbl_viewer/ToolConfiguration.vue?072a","webpack:///./src/components/asmbl_viewer/viewer.vue?6586","webpack:///./src/components/asmbl_viewer/viewer/utils.js","webpack:///./src/components/asmbl_viewer/viewer/RenderModes/baserenderer.js","webpack:///./src/components/asmbl_viewer/viewer/RenderModes/voxel2.js","webpack:///./src/components/asmbl_viewer/viewer/gcodeline.js","webpack:///./src/components/asmbl_viewer/viewer/gcodeprocessor.js","webpack:///./src/components/asmbl_viewer/viewer/bed.js","webpack:///./src/components/asmbl_viewer/viewer/buildobjects.js","webpack:///./src/components/asmbl_viewer/viewer/axes.js","webpack:///./src/components/asmbl_viewer/viewer/gcodeviewer.js","webpack:///src/components/asmbl_viewer/viewer.vue","webpack:///./src/components/asmbl_viewer/viewer.vue?cf69","webpack:///./src/components/asmbl_viewer/viewer.vue?55fa","webpack:///./src/components/asmbl_viewer/index.js","webpack:///./src/main.js","webpack:///./src/components/asmbl_viewer/viewer.vue?16e9"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","_v","on","loadBenchy","staticClass","ref","staticRenderFns","methods","$refs","viewer","component","VApp","VAppBar","VBtn","VMain","VSpacer","VToolbarTitle","VToolbar","visible","minWidth","w","h","x","y","dragHandle","hide","maximize","_s","maximized","title","_t","VIcon","Vue","use","BaseDraggableDialog","style","backgroundColorStyle","$event","updateValue","internalTextColor","type","indexOf","_k","keyCode","scopedSlots","_u","fn","_g","model","callback","$$v","menu","expression","color","proxy","VCard","VCardText","VCol","VColorPicker","VMenu","VRow","VTextField","save","_l","tool","idx","colorString","$set","toolTypes","Tool","Color4","diameter","toolType","ToolType","Extruder","toHexString","FromHexString","JSON","stringify","jsonString","json","parse","g","b","a","parseFloat","Endmill","loadedTools","Array","GetTool","toolString","localStorage","getItem","toolList","forEach","newTool","fromJson","toolIdx","SaveTool","setItem","VCardTitle","VSelect","directives","rawName","chooseFile","reload","voxelWidth","voxelHeight","feedColoring","resetCam","fileSelected","class","drawer","loadingProgress","loadingMessage","loading","filePositionString","fileSize","filePosition","playing","speeds","playbackSpeedSelection","_e","getNumber","tokenNumber","relativeMove","number","Number","substring","newNum","doArc","tokens","currentPosition","arcSegLength","currX","currY","z","currZ","cw","some","includes","tokenIdx","token","deltaX","deltaY","dSquared","Math","pow","hSquared","position","points","hDivD","sqrt","totalArc","wholeCircle","centerX","centerY","arcRadius","arcCurrentAngle","atan2","finalTheta","PI","totalSegments","arcAngleIncrement","zDist","zStep","px","py","pz","currentAngle","moveIdx","cos","sin","pauseProcessing","Promise","resolve","setTimeout","then","Date","now","BaseRenderer","scene","specularColor","loadingProgressCallback","renderFuncs","tools","solidMat","transparentMat","previousFilePosition","currentFilePosition","VoxelEvent","add","VoxelRenderer","isLoading","scrubDistance","hasSubtractive","dispose","box","MeshBuilder","CreateBox","width","height","depth","hasVertexAlpha","updateFacetData","material","StandardMaterial","needDepthPrePass","forceDepthWrite","backFaceCulling","lines","that","parseInt","layers","ystep","maxRenderedLayer","lastUpdate","lineIdx","gcodeLine","extruding","voxelArray","getVoxelSegments","getDiameter","isAdditive","undefined","voxelEvent","gcodeLineNumber","voxelIdx","voxel","idxX","floor","idxY","idxZ","point","ex","voxelEvents","console","log","cutY","particleCount","vy","layerParticles","minFilePosition","maxFilePosition","entries","zValues","matrix","Matrix","Identity","clone","lastDrawnCount","setTranslation","Vector3","buildBox","alphaIndex","renderingGroupId","matrixData","Float32Array","colorData","particleIdx","particle","copyToArray","toArray","thinInstanceSetBuffer","thinInstanceRefreshBoundingInfo","clearColor","red","green","lostInSpace","updateVoxels","hasSubtract","hasMove","scrubbing","lastEvent","filter","ev","lastPosition","drawDelay","thinInstanceBufferUpdated","firstPass","timeStamp","beforeRenderFunc","abs","registerBeforeRender","start","end","feedRate","layerHeight","distanceVector","lineMesh","Mesh","CreateLines","enableEdgesRendering","edgesWidth","edgesColor","tube","CreateTube","path","radius","tesselation","sideOrientation","FRONTSIDE","updatable","doNotSyncBoundingInfo","v1","v2","dx","dy","dz","invisible","rot2","scaling","rotation","materialIndex","props","originalColor","colors","voxelSize","toolRadius","additive","pointArray","distance","segments","round","segCount","stepX","stepZ","stepY","pX","pZ","depthPoints","pointIdx","pt","yOff","ceil","RenderMode","Block","Line","Point","Max","Voxel","ColorMode","Color","Feed","currentColor","currentTool","renderVersion","absolute","travels","sps","maxHeight","minHeight","lineCount","renderMode","extruderCount","layerDictionary","previousLayerHeight","currentLayerHeight","liveTracking","liveTrackingShowSolid","materialTransparency","gcodeLineIndex","gcodeFilePosition","refreshTime","lineLengthTolerance","progressColor","lineMeshIndex","meshBreakPoint","feedRateTrimming","currentFeedRate","feedValues","numChanges","avgFeed","maxFeedRate","minFeedRate","MAX_VALUE","underspeedPercent","colorMode","setColorMode","minColorRate","maxColorRate","minFeedColorString","minFeedColor","padEnd","maxFeedColorString","maxFeedColor","everyNthRow","currentRowIdx","currentZ","renderTravels","lineVertexAlpha","forceWireMode","spreadLines","spreadLineAmount","debug","lookAheadLength","cancelLoad","hasSpindle","voxelRenderer","numberOfLines","renderQuality","lastExtrudedZHeight","file","clearCache","initVariables","split","info","setRenderQualitySettings","reverse","line","pop","trim","startsWith","processLine","createTravelLines","tokenString","lineNumber","commentIndex","toUpperCase","command","match","ratio","Lerp","spindleCutting","lineTolerance","arcResult","curPt","spindleSpeed","speed","finalColors","extruderPercentage","extruderIdx","extruder","createScene","runComplete","meshIndex","lineArray","colorArray","transparentValue","getPoints","CreateLineSystem","isVisible","isPickable","markVerticesDataAsUpdatable","VertexBuffer","ColorKind","lastRendered","getVerticesData","renderTo","renderAhead","renderToIdx","colorIdx","index","renderAheadIdx","updateVerticesData","particleBuilder","renderLineV3","SolidParticleSystem","enableMultiMaterial","useVertexAlpha","addShape","positionFunction","buildMesh","alpha","needAlphaTesting","separateCullingPass","setMultiMaterial","setParticles","computeSubMeshes","mesh","updateParticle","clearCachedVertexData","PointsCloudSystem","renderParticle","addPoints","buildMeshAsync","pointSize","renderLineMode","renderBlockMode","renderPointMode","render","travelArray","travelColorArray","travelIdx","travelMesh","updateFilePosition","unregisterBeforeRender","enabled","min","max","dimensions","array","zeros","RenderBedMode","bed","buildVolume","buildVol","bedMesh","isDelta","registerClipIgnore","bedLineColor","getBedColor","setBedColor","planeMaterial","buildGridMaterial","boxMaterial","renderBedMode","removeMesh","buildBed","isDisposed","buildFlatBed","setRenderMode","bedCenter","getCenter","bedSize","getSize","CreateDisc","rotationQuaternion","Quaternion","RotationAxis","CreatePlane","translate","Space","WORLD","CreateCylinder","diameterTop","diameterBottom","diffuseColor","setRenderingAutoClearDepthStencil","hl","HighlightLayer","isStroke","blurTextureSizeRatio","addMesh","getBedColor4","onBeforeRenderObservable","getEngine","setColorWrite","onAfterRenderObservable","center","visibility","setEnabled","gridMaterial","GridMaterial","mainColor","lineColor","Color3","gridRatio","opacity","majorUnitFrequency","minorUnitVisibility","gridOffset","checkerBoard","xmark","buildObjectMeshes","labels","labelSVGS","baseMaterial","highlightMaterial","cancelledMaterial","cancelledHighlightMaterial","showCancelObjects","objectCallback","renderFailedCallback","labelCallback","getMaxHeight","alphaLevel","observableControls","showLabel","rebuildMaterials","setBuildMaterial","Texture","CreateFromBase64String","diffuseTexture","boundaryObjects","label","URL","revokeObjectURL","cancelObjectIdx","cancelObject","buildObject","CreateTiledBox","pattern","CAP_ALL","alignVertical","TOP","alignHorizontal","LEFT","tileHeight","tileWidth","metadata","enablePointerMoveEvents","setObjectTexture","textPlane","makeTextPlane","cancelled","parent","text","size","svg","d3","attr","append","html","node","doctype","source","XMLSerializer","serializeToString","blob","Blob","url","createObjectURL","plane","hasAlpha","billboardMode","hitTestTimer","mouseDown","cancelHitTimer","onPointerObservable","pointerInfo","pickInfo","PointerEventTypes","POINTERDOWN","POINTERUP","handleClick","POINTERMOVE","handlePointerMove","remove","buildObservables","clearObservables","hit","pickedMesh","axesMesh","dynamicTexture","DynamicTexture","drawText","axisX","Zero","xChar","axisZ","zChar","axisY","yChar","getChildren","canvas","lastLoadKey","fileData","gcodeProcessor","sceneBackgroundColor","toolVisible","toolCursor","toolCursorMesh","toolCursorVisible","travelVisible","zTopClipValue","zBottomClipValue","pause","cameraInertia","buildObjects","axes","hasCacheSupport","arcRotate","activeCamera","orbitCamera","flyCamera","top","bottom","clipPlane","Plane","clipPlane2","engine","Engine","doNotHandleContextLost","enableOfflineSupport","Scene","debugLayer","show","embedMode","getBackgroundColor","Bed","ArcRotateCamera","invertRotation","attachControl","maxZ","updateCameraInertiaProperties","light2","PointLight","diffuse","specular","runRenderLoop","cameras","BuildObjects","Axes","resetCamera","resize","caches","open","cache","pathData","put","Response","response","beta","target","removeItem","fileContents","clearScene","refreshUI","gcodeData","setProgressColor","getProgressColor","lastLoadFailed","error","updateRenderQuality","clearLoadFlag","setLoadFlag","processGcodeFile","getMinHeight","toggleTravels","setCursorVisiblity","getMeshByName","saveExtruderColors","getExtruderColors","clearFileData","unregisterEvents","meshes","sceneEntity","materials","removeMaterial","buildtoolCursor","processFile","setAbsolutePosition","TransformNode","rotate","Axis","X","LOCAL","inertia","panningInertia","inputs","attached","keyboard","angularSpeed","zoomingSensibility","panningSensibility","angularSensibilityX","angularSensibilityY","wheelPrecision","VCheckbox","VNavigationDrawer","VProgressLinear","VSlider","Resize","ColorPicker","ToolConfiguration","ASMBLViewer","config","productionTip","Vuetify","Vuex","App","vuetify","theme","dark","icons","iconfont","$mount"],"mappings":"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","file":"js/app.dd12998a.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolConfiguration.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseDraggableDialog.vue?vue&type=style&index=0&id=3d6261f0&scoped=true&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColorPicker.vue?vue&type=style&index=0&id=0e916049&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('v-app-bar',{attrs:{\"app\":\"\"}},[_c('v-toolbar-title',[_vm._v(\"GCode Voxel Viewer by Sindarius\")]),_c('v-spacer'),_c('v-btn',{on:{\"click\":_vm.loadBenchy}},[_vm._v(\"Load a benchy!\")])],1),_c('v-main',{staticClass:\"main-ref\"},[_c('asmbl-viewer',{ref:\"viewer\"})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <v-app id=\"inspire\">\n    <v-app-bar app>\n      <v-toolbar-title>GCode Voxel  Viewer by Sindarius</v-toolbar-title>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"loadBenchy\">Load a benchy!</v-btn>\n    </v-app-bar>\n\n    <v-main class=\"main-ref\">\n      <asmbl-viewer ref=\"viewer\"></asmbl-viewer>\n    </v-main>\n  </v-app>\n</template>\n\n<style>\n.main-ref {\n\tposition: relative;\n}\n</style>\n\n<script>\nexport default {\n\tdata: () => ({ drawer: null }),\n  methods : {\n    loadBenchy() {\n      this.$refs.viewer.loadBenchy();\n    }\n  },\n};\n</script>","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=87db1a98&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VAppBar } from 'vuetify/lib/components/VAppBar';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VMain } from 'vuetify/lib/components/VMain';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VAppBar,VBtn,VMain,VSpacer,VToolbarTitle})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('vue-draggable-resizable',{ref:\"dragWindow\",staticClass:\"main-window\",attrs:{\"hidden\":!_vm.visible,\"min-width\":_vm.minWidth,\"min-height\":200,\"w\":_vm.w,\"h\":_vm.h,\"x\":_vm.x,\"y\":_vm.y,\"drag-handle\":_vm.dragHandle,\"parent\":true}},[_c('div',{staticClass:\"fill-area\"},[_c('v-toolbar',{staticClass:\"drag-handle\"},[_c('v-btn',{staticClass:\"close-button mr-1\",attrs:{\"large\":\"\",\"color\":\"error\"},on:{\"click\":_vm.hide}},[_c('v-icon',[_vm._v(\"mdi-close\")])],1),_c('v-btn',{staticClass:\"close-button mr-3\",attrs:{\"large\":\"\",\"color\":\"info\"},on:{\"click\":_vm.maximize}},[_c('v-icon',[_vm._v(_vm._s(_vm.maximized ? \"mdi-window-restore\" : \"mdi-window-maximize\")+\" \")])],1),_c('v-toolbar-title',[_vm._v(_vm._s(_vm.title))])],1),_c('main',{staticClass:\"content-area\"},[_vm._t(\"default\")],2),_c('footer',{staticClass:\"footer\"},[_vm._t(\"footer\")],2)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n   <vue-draggable-resizable ref=\"dragWindow\" :hidden=\"!visible\" :min-width=\"minWidth\" :min-height=\"200\" :w=\"w\" :h=\"h\" :x=\"x\" :y=\"y\" class=\"main-window\" :drag-handle=\"dragHandle\" :parent=\"true\">\r\n      <div class=\"fill-area\">\r\n         <v-toolbar class=\"drag-handle\">\r\n            <v-btn large @click=\"hide\" color=\"error\" class=\"close-button mr-1\"><v-icon>mdi-close</v-icon></v-btn>\r\n            <v-btn large @click=\"maximize\" color=\"info\" class=\"close-button mr-3\"\r\n               ><v-icon>{{ maximized ? `mdi-window-restore` : `mdi-window-maximize` }} </v-icon>\r\n            </v-btn>\r\n            <v-toolbar-title>{{ title }}</v-toolbar-title>\r\n         </v-toolbar>\r\n         <main class=\"content-area\">\r\n            <slot></slot>\r\n         </main>\r\n         <footer class=\"footer\"><slot name=\"footer\"></slot></footer>\r\n      </div>\r\n   </vue-draggable-resizable>\r\n</template>\r\n\r\n<script>\r\n  'use strict';\r\n  import Vue from 'vue';\r\n\r\n  import VueDraggableResizable from 'vue-draggable-resizable';\r\n  import 'vue-draggable-resizable/dist/VueDraggableResizable.css';\r\n\r\n  Vue.component('vue-draggable-resizable', VueDraggableResizable);\r\n\r\n  export default {\r\n     props: {\r\n        visible: {\r\n           type: Boolean,\r\n           required: true,\r\n        },\r\n        title: String,\r\n        startfull: { type: Boolean, default: false },\r\n        minWidth : {\r\n           type : Number,\r\n           default : 300\r\n        }\r\n     },\r\n     data: function () {\r\n        return {\r\n           dragHandle: '.drag-handle',\r\n           x: 100,\r\n           y: 100,\r\n           w: this.$props.minWidth,\r\n           h: 200,\r\n           maximized: false,\r\n           restoreDimensions: {},\r\n        };\r\n     },\r\n     methods: {\r\n        async maximize() {\r\n           if (this.maximized) {\r\n              this.maximized = false;\r\n              this.dragHandle = '.drag-handle';\r\n              //this is broken into two ticks otherwise the window will fail position because the window is still max size\r\n              //which causes it to sit at 0,0 after minimized;\r\n              await this.$nextTick().then(() => {\r\n                 this.w = this.restoreDimensions.w;\r\n                 this.h = this.restoreDimensions.h;\r\n              });\r\n              await this.$nextTick().then(() => {\r\n                 this.x = this.restoreDimensions.x;\r\n                 this.y = this.restoreDimensions.y;\r\n              });\r\n              return;\r\n           }\r\n\r\n           this.maximized = true;\r\n           this.dragHandle = '.drag-handle-disabled';\r\n           this.restoreDimensions = {\r\n              x: this.$refs.dragWindow.left,\r\n              y: this.$refs.dragWindow.top,\r\n              w: this.$refs.dragWindow.width,\r\n              h: this.$refs.dragWindow.height,\r\n           };\r\n\r\n           this.x = 0;\r\n           this.y = 0;\r\n           this.w = window.innerWidth;\r\n           this.h = window.innerHeight;\r\n        },\r\n        hide() {\r\n           this.$emit('update:visible', false);\r\n        },\r\n     },\r\n     watch: {\r\n        visible: function (to) {\r\n           if (to && this.startfull && !this.maximized) {\r\n              this.maximize();\r\n           }\r\n        },\r\n     },\r\n  };\r\n</script>\r\n\r\n<style scoped>\r\n  .fill-area {\r\n     width: 100%;\r\n     height: 100%;\r\n     position: relative;\r\n     border: 2px #ff6600 solid;\r\n  }\r\n\r\n  .content-area {\r\n     position: absolute;\r\n     top: 54px;\r\n     bottom: 0px;\r\n     left: 0px;\r\n     right: 0px;\r\n     background-color: black;\r\n  }\r\n  .main-window {\r\n     z-index: 100 !important;\r\n  }\r\n  .footer {\r\n     width: 100%;\r\n     position: absolute;\r\n     height: 0px;\r\n     bottom: 0;\r\n     background-color: black;\r\n  }\r\n  video::-webkit-media-controls-fullscreen-button {\r\n     display: none !important;\r\n  }\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseDraggableDialog.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BaseDraggableDialog.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BaseDraggableDialog.vue?vue&type=template&id=3d6261f0&scoped=true&\"\nimport script from \"./BaseDraggableDialog.vue?vue&type=script&lang=js&\"\nexport * from \"./BaseDraggableDialog.vue?vue&type=script&lang=js&\"\nimport style0 from \"./BaseDraggableDialog.vue?vue&type=style&index=0&id=3d6261f0&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3d6261f0\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\nimport { VToolbarTitle } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VBtn,VIcon,VToolbar,VToolbarTitle})\n","import Vue from 'vue'\r\n\r\nimport BaseDraggableDialog from './BaseDraggableDialog.vue'\r\n\r\nVue.use(BaseDraggableDialog);","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-col',{staticClass:\"shrink\",style:([_vm.backgroundColorStyle])},[_c('v-text-field',{staticClass:\"ma-0 pa-0\",attrs:{\"hide-details\":\"\",\"solo\":\"\"},on:{\"blur\":function($event){return _vm.updateValue(_vm.internalTextColor)},\"keyup\":function($event){if(!$event.type.indexOf('key')&&_vm._k($event.keyCode,\"enter\",13,$event.key,\"Enter\")){ return null; }return _vm.updateValue(_vm.internalTextColor)}},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-menu',{attrs:{\"close-on-content-click\":false,\"nudge-bottom\":\"105\",\"nudge-left\":\"16\",\"top\":\"\"},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('div',_vm._g({style:(_vm.swatchStyle)},on))]}}]),model:{value:(_vm.menu),callback:function ($$v) {_vm.menu=$$v},expression:\"menu\"}},[_c('v-card',[_c('v-card-text',{staticClass:\"pa-0\"},[_c('v-color-picker',{staticClass:\"index-placement\",attrs:{\"flat\":\"\"},on:{\"input\":function($event){return _vm.updateValue(_vm.color)}},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}})],1)],1)],1)]},proxy:true}]),model:{value:(_vm.internalTextColor),callback:function ($$v) {_vm.internalTextColor=$$v},expression:\"internalTextColor\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<v-row align=\"center\" justify=\"center\">\r\n\t\t<v-col :style=\"[backgroundColorStyle]\" class=\"shrink\">\r\n\t\t\t<v-text-field @blur=\"updateValue(internalTextColor)\" @keyup.enter=\"updateValue(internalTextColor)\" class=\"ma-0 pa-0\" hide-details solo v-model=\"internalTextColor\">\r\n\t\t\t\t<template v-slot:append>\r\n\t\t\t\t\t<v-menu :close-on-content-click=\"false\" nudge-bottom=\"105\" nudge-left=\"16\" top v-model=\"menu\">\r\n\t\t\t\t\t\t<template v-slot:activator=\"{ on }\">\r\n\t\t\t\t\t\t\t<div :style=\"swatchStyle\" v-on=\"on\" />\r\n\t\t\t\t\t\t</template>\r\n\t\t\t\t\t\t<v-card>\r\n\t\t\t\t\t\t\t<v-card-text class=\"pa-0\">\r\n\t\t\t\t\t\t\t\t<v-color-picker @input=\"updateValue(color)\" class=\"index-placement\" flat v-model=\"color\"></v-color-picker>\r\n\t\t\t\t\t\t\t</v-card-text>\r\n\t\t\t\t\t\t</v-card>\r\n\t\t\t\t\t</v-menu>\r\n\t\t\t\t</template>\r\n\t\t\t</v-text-field>\r\n\t\t</v-col>\r\n\t</v-row>\r\n</template>\r\n\r\n<script>\r\n'use strict';\r\n\r\nexport default {\r\n\tprops: ['editcolor'],\r\n\tdata: () => ({\r\n\t\tinternalTextColor: '#000000',\r\n\t\tcolor: '#000000',\r\n\t\tmenu: false,\r\n\t}),\r\n\tcomputed: {\r\n\t\tbackgroundColorStyle() {\r\n\t\t\treturn {\r\n\t\t\t\tminWidth: '220px',\r\n\t\t\t\tbackgroundColor: this.color,\r\n\t\t\t};\r\n\t\t},\r\n\t\tswatchStyle() {\r\n\t\t\tconst {color, menu} = this;\r\n\t\t\treturn {\r\n\t\t\t\tbackgroundColor: color,\r\n\t\t\t\tcursor: 'pointer',\r\n\t\t\t\theight: '30px',\r\n\t\t\t\twidth: '30px',\r\n\t\t\t\tborderRadius: menu ? '50%' : '4px',\r\n\t\t\t\ttransition: 'border-radius 200ms ease-in-out',\r\n\t\t\t};\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.color = this.editcolor;\r\n\t\tthis.internalTextColor = this.editcolor;\r\n\t},\r\n\tmethods: {\r\n\t\tupdateValue(val) {\r\n\t\t\tthis.color = val;\r\n\t\t\tif (!val.startsWith('#')) {\r\n\t\t\t\tthis.color = '#' + val;\r\n\t\t\t}\r\n\t\t\tthis.color = this.color.toUpperCase().padEnd(7, '0').substring(0, 7);\r\n\t\t\tthis.internalTextColor = this.color;\r\n\t\t\tthis.$emit('update:editcolor', this.color);\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\teditcolor: {\r\n\t\t\thandler: function (newVal) {\r\n\t\t\t\tthis.color = newVal;\r\n\t\t\t\tthis.internalTextColor = newVal;\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.menuable__content__active {\r\n\tz-index: 50 !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColorPicker.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ColorPicker.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ColorPicker.vue?vue&type=template&id=0e916049&scoped=true&\"\nimport script from \"./ColorPicker.vue?vue&type=script&lang=js&\"\nexport * from \"./ColorPicker.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ColorPicker.vue?vue&type=style&index=0&id=0e916049&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e916049\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VColorPicker } from 'vuetify/lib/components/VColorPicker';\nimport { VMenu } from 'vuetify/lib/components/VMenu';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VCard,VCardText,VCol,VColorPicker,VMenu,VRow,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bgcolor\"},[_c('v-btn',{attrs:{\"block\":\"\"},on:{\"click\":function($event){return _vm.save()}}},[_vm._v(\"Save Tools\")]),_vm._l((_vm.tools),function(tool,idx){return _c('v-card',{key:idx,staticClass:\"mb-2\"},[_c('v-card-title',[_vm._v(_vm._s(tool.name))]),_c('v-card-text',[_c('v-row',[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('div',{staticClass:\"mb-2\"},[_vm._v(\"Filamnt Color\")]),_c('color-picker',{attrs:{\"editcolor\":tool.colorString},on:{\"update:editcolor\":function($event){return _vm.$set(tool, \"colorString\", $event)}}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_vm._v(\" Diameter \"),_c('v-text-field',{model:{value:(tool.diameter),callback:function ($$v) {_vm.$set(tool, \"diameter\", $$v)},expression:\"tool.diameter\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_vm._v(\" Tool Type \"),_c('v-select',{attrs:{\"items\":_vm.toolTypes},model:{value:(tool.toolType),callback:function ($$v) {_vm.$set(tool, \"toolType\", $$v)},expression:\"tool.toolType\"}})],1)],1)],1)],1)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Color4 } from \"@babylonjs/core/Maths/math.color\";\r\n\r\nexport default class Tool {\r\n    constructor() {\r\n        this.name = '';\r\n        this.color = new Color4(0, 0, 1, 1);\r\n        this.diameter = 0.4; //default nozzle\r\n        this.toolType = ToolType.Extruder;\r\n    }\r\n\r\n    get colorString() {\r\n        return this.color.toHexString();\r\n    }\r\n\r\n    set colorString(value) {\r\n        this.color = Color4.FromHexString(value + \"FF\");\r\n    }\r\n\r\n    isAdditive() {\r\n        return this.toolType === ToolType.Extruder;\r\n    }\r\n\r\n    getDiameter() {\r\n            return this.diameter;\r\n    }\r\n\r\n    toJson() {\r\n        return JSON.stringify(this);\r\n    }\r\n\r\n    static fromJson(jsonString) {\r\n        let json;\r\n        if (typeof jsonString === 'object') {\r\n            json = jsonString;\r\n        }\r\n        else {\r\n            json = JSON.parse(jsonString);\r\n        }\r\n        let tool = new Tool();\r\n        tool.name = json.name;\r\n        tool.color = new Color4(json.color.r, json.color.g, json.color.b, json.color.a);\r\n        tool.diameter = parseFloat(json.diameter);\r\n        tool.toolType = json.toolType;\r\n        return tool;\r\n    }\r\n}\r\n\r\nexport const ToolType = {\r\n    Extruder: \"Extruder\",\r\n    Endmill: \"Endmill\"\r\n}\r\n\r\nlet loadedTools = new Array();\r\n\r\nexport function GetTool() {\r\n    if (loadedTools.length === 0) {\r\n        let toolString = window.localStorage.getItem('tools');\r\n        if (toolString) {\r\n            loadedTools.splice();\r\n            let toolList = JSON.parse(toolString);\r\n            toolList.forEach((t) => {\r\n                let newTool = Tool.fromJson(t);\r\n                loadedTools.push(newTool);\r\n            });\r\n\r\n        } else {\r\n            for (let toolIdx = 0; toolIdx < 10; toolIdx++) {\r\n                let tool = new Tool();\r\n                tool.name = 'Tool #' + toolIdx;\r\n                loadedTools.push(tool);\r\n            }\r\n        }\r\n    }\r\n    return loadedTools;\r\n\r\n}\r\n\r\nexport function SaveTool() {\r\n    let toolString = JSON.stringify(loadedTools);\r\n    window.localStorage.setItem('tools', toolString);\r\n\r\n}","<template>\r\n\t<div class=\"bgcolor\">\r\n\t\t<v-btn @click=\"save()\" block>Save Tools</v-btn>\r\n\t\t<v-card :key=\"idx\" class=\"mb-2\" v-for=\"(tool, idx) in tools\">\r\n\t\t\t<v-card-title>{{tool.name}}</v-card-title>\r\n\t\t\t<v-card-text>\r\n\t\t\t\t<v-row>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\t<div class=\"mb-2\">Filamnt Color</div>\r\n\t\t\t\t\t\t<color-picker :editcolor.sync=\"tool.colorString\"></color-picker>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\tDiameter\r\n\t\t\t\t\t\t<v-text-field v-model=\"tool.diameter\"></v-text-field>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t\tTool Type\r\n\t\t\t\t\t\t<v-select :items=\"toolTypes\" v-model=\"tool.toolType\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</v-select>\r\n\t\t\t\t\t</v-col>\r\n\t\t\t\t</v-row>\r\n\t\t\t</v-card-text>\r\n\t\t</v-card>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\nimport {GetTool, SaveTool} from './viewer/tool.js';\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\ttoolCountValue: 1,\r\n\t\t\ttools: new Array(),\r\n\t\t\ttoolTypes: [\"Extruder\", \"Endmill\"]\r\n\t\t};\r\n\t},\r\n\tmounted() {\r\n\t\tthis.tools = GetTool();\r\n\t},\r\n\tmethods: {\r\n\t\tsave() {\r\n\t\t\tSaveTool();\r\n\t\t},\r\n\t},\r\n\tcomputed: {\r\n\t\ttoolCount: {\r\n\t\t\tget: function () {\r\n\t\t\t\treturn this.toolCountValue;\r\n\t\t\t},\r\n\t\t\tset: function (value) {\r\n\t\t\t\tconsole.log(value);\r\n\t\t\t\tif (value > 10 || value < 1) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.toolCountValue = value;\r\n\t\t\t\tconsole.log(`TCV ${this.toolCountValue}`);\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n<style>\r\n.bgcolor {\r\n\tbackground-color: black;\r\n}\r\n\r\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolConfiguration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ToolConfiguration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ToolConfiguration.vue?vue&type=template&id=4c1ce6a0&\"\nimport script from \"./ToolConfiguration.vue?vue&type=script&lang=js&\"\nexport * from \"./ToolConfiguration.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ToolConfiguration.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCardTitle } from 'vuetify/lib/components/VCard';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCard,VCardText,VCardTitle,VCol,VRow,VSelect,VTextField})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"resize\",rawName:\"v-resize\",value:(_vm.resize),expression:\"resize\"}]},[_c('canvas',{ref:\"gcodeViewer\",staticClass:\"canvas-size\"}),_c('div',{staticClass:\"main-container\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-btn',{attrs:{\"title\":\"Load File\"},on:{\"click\":_vm.chooseFile}},[_c('v-icon',[_vm._v(\"mdi-upload\")]),_vm._v(\"Upload \")],1),_c('v-btn',{staticClass:\"ml-1\",attrs:{\"title\":\"Reload With New Settings\"},on:{\"click\":_vm.reload}},[_c('v-icon',[_vm._v(\"mdi-reload\")]),_vm._v(\"Reload \")],1)],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('span',{staticClass:\"small-font-note\"},[_vm._v(\"Reload after changing settings.\")])]),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{staticClass:\"input-width\",attrs:{\"hint\":\"Voxel Width\",\"persistent-hint\":\"\"},model:{value:(_vm.voxelWidth),callback:function ($$v) {_vm.voxelWidth=$$v},expression:\"voxelWidth\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-text-field',{staticClass:\"input-width\",attrs:{\"hint\":\"Voxel Height\",\"persistent-hint\":\"\"},model:{value:(_vm.voxelHeight),callback:function ($$v) {_vm.voxelHeight=$$v},expression:\"voxelHeight\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[_c('v-checkbox',{staticClass:\"input-width\",attrs:{\"hint\":\"Feed Rate Coloring\",\"persistent-hint\":\"\"},model:{value:(_vm.feedColoring),callback:function ($$v) {_vm.feedColoring=$$v},expression:\"feedColoring\"}})],1),_c('v-col',{attrs:{\"cols\":\"6\"}}),_c('v-col',{attrs:{\"cols\":\"6\"}},[_c('v-btn',{attrs:{\"title\":\"Reset Camera\"},on:{\"click\":_vm.resetCam}},[_c('v-icon',[_vm._v(\"mdi-camera\")])],1)],1)],1),_c('input',{ref:\"fileInput\",attrs:{\"accept\":'.g,.gcode,.gc,.gco,.nc,.ngc,.tap',\"hidden\":\"\",\"multiple\":\"\",\"type\":\"file\"},on:{\"change\":_vm.fileSelected}})],1),_c('div',{staticClass:\"button-container\",class:{ 'button-container-drawer': _vm.drawer }},[_c('v-btn',{staticClass:\"toggle-menu-button-close mb-10\",attrs:{\"title\":\"Show Tools\",\"color\":\"secondary\",\"small\":\"\"},on:{\"click\":function($event){_vm.drawer = !_vm.drawer}}},[_c('v-icon',[_vm._v(\"mdi-cog\")])],1)],1),_c('v-navigation-drawer',{attrs:{\"permanent\":_vm.drawer,\"absolute\":\"\",\"width\":\"275\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('tool-configuration',{staticClass:\"input-width\"})],1),_c('div',{staticClass:\"loading-progress\"},[_c('div'),_c('v-progress-linear',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.loading),expression:\"loading\"}],staticClass:\"disable-transition\",attrs:{\"value\":_vm.loadingProgress,\"height\":\"15\",\"rounded\":\"\"}},[_c('span',{staticClass:\"progress-font\"},[_vm._v(_vm._s(_vm.loadingMessage)+_vm._s(_vm.loadingProgress)+\"%\")])])],1),_c('div',{staticClass:\"time-slider\"},[_c('v-row',{attrs:{\"no-gutters\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"10\"}},[_c('v-slider',{attrs:{\"disabled\":_vm.loading,\"label\":_vm.filePositionString,\"max\":_vm.fileSize,\"min\":\"0\"},model:{value:(_vm.filePosition),callback:function ($$v) {_vm.filePosition=$$v},expression:\"filePosition\"}})],1),_c('v-col',{attrs:{\"cols\":\"1\"}},[_c('v-btn',{on:{\"click\":function($event){_vm.playing = !_vm.playing}}},[(_vm.playing)?_c('v-icon',[_vm._v(\"mdi-pause\")]):_c('v-icon',[_vm._v(\"mdi-play\")])],1)],1),_c('v-col',{attrs:{\"cols\":\"1\"}},[_c('v-select',{attrs:{\"items\":_vm.speeds},model:{value:(_vm.playbackSpeedSelection),callback:function ($$v) {_vm.playbackSpeedSelection=$$v},expression:\"playbackSpeedSelection\"}})],1),_c('v-col',{attrs:{\"cols\":\"12\"}},[(!_vm.loading)?_c('span',[_vm._v(\"Prsss play or use the scrubber to go through file.\")]):_vm._e()])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","/*eslint-disable*/\r\n'use strict';\r\n\r\nfunction getNumber(tokenNumber, value, relativeMove) {\r\n    let number = Number(tokenNumber.substring(1));\r\n    let newNum = !number ? 0 : number;\r\n    return relativeMove ? newNum + value : newNum;\r\n}\r\n\r\nexport function doArc(tokens, currentPosition, relativeMove, arcSegLength) {\r\n\r\n    let currX = currentPosition.x,\r\n        currY = currentPosition.z, //BabylonJS Z represents depth so Y and Z are switched\r\n        currZ = currentPosition.y;\r\n\r\n    let x = currX,\r\n        y = currY,\r\n        z = currZ,\r\n        i = 0,\r\n        j = 0,\r\n        r = 0;\r\n    var cw = tokens.some(t => t.includes('G2'));\r\n    //read params\r\n    for (let tokenIdx = 0; tokenIdx < tokens.length; tokenIdx++) {\r\n        let token = tokens[tokenIdx];\r\n        switch (token[0]) {\r\n            case 'X': {\r\n                x = getNumber(token, x, relativeMove);\r\n            } break;\r\n            case 'Y': {\r\n                y = getNumber(token, y, relativeMove);\r\n            } break;\r\n            case 'Z': {\r\n                z = getNumber(token, z, relativeMove);\r\n            } break;\r\n            case 'I': {\r\n                i = getNumber(token, i, false);\r\n            } break; // x offset from current position\r\n            case 'J': {\r\n                j = getNumber(token, j, false);\r\n            } break; //y offset from current position\r\n            case 'R': {\r\n                r = getNumber(token, r, false);\r\n            } break;\r\n        }\r\n    }\r\n\r\n    //If we have an R param we need to find th radial point (we'll use 1mm segments for now)\r\n    //Given R it is possible to have 2 values .  Positive we use the shorter of the two.\r\n    if (r) {\r\n        let deltaX = x - currX;\r\n        let deltaY = y - currY;\r\n        let dSquared = Math.pow(deltaX, 2) + Math.pow(deltaY, 2);\r\n        let hSquared = Math.pow(r,2) - dSquared / 4;\r\n        if (dSquared == 0 || hSquared < 0) {\r\n            return { position: { x: x, y: z, z: y }, points: [] }; //we'll abort the render and move te position to the new position.\r\n        }\r\n        let hDivD = Math.sqrt(hSquared / dSquared);\r\n\r\n        // Ref RRF DoArcMove for details\r\n        if ((cw && r < 0.0) || (!cw && r > 0.0)) {\r\n            hDivD = -hDivD;\r\n        }\r\n        i = deltaX / 2 + deltaY * hDivD;\r\n        j = deltaY / 2 - deltaX * hDivD;\r\n    } else {\r\n        //the radial point is an offset from the current position\r\n        ///Need at least on point \r\n        if (i == 0 && j == 0) {\r\n            return { position: { x: x, y: y, z: z }, points: [] }; //we'll abort the render and move te position to the new position.\r\n        }\r\n    }\r\n\r\n    let wholeCircle = currX == i && currY == y;\r\n    let centerX = currX + i;\r\n    let centerY = currY + j;\r\n\r\n    let arcRadius = Math.sqrt(i * i + j * j);\r\n    let arcCurrentAngle = Math.atan2(-j, -i);\r\n    let finalTheta = Math.atan2(y - centerY, x - centerX);\r\n\r\n\r\n    let totalArc;\r\n    if (wholeCircle) {\r\n        totalArc = 2 * Math.PI;\r\n    }\r\n    else {\r\n        totalArc = cw ? arcCurrentAngle - finalTheta : finalTheta - arcCurrentAngle;\r\n        if (totalArc < 0.0) {\r\n            totalArc += 2 * Math.PI;\r\n        }\r\n    }\r\n\r\n    //let arcSegmentLength = this.; //hard coding this to 1mm segment for now\r\n\r\n    let totalSegments = (arcRadius * totalArc) / arcSegLength + 0.8;\r\n    if (totalSegments < 1) {\r\n        totalSegments = 1;\r\n    }\r\n\r\n    let arcAngleIncrement = totalArc / totalSegments;\r\n    arcAngleIncrement *= cw ? -1 : 1;\r\n\r\n    let points = new Array();\r\n\r\n    let zDist = currZ - z;\r\n    let zStep = zDist / totalSegments;\r\n\r\n    //get points for the arc\r\n    let px = currX;\r\n    let py = currY;\r\n    let pz = currZ;\r\n    //calculate segments\r\n    let currentAngle = arcCurrentAngle;\r\n    for (let moveIdx = 0; moveIdx < totalSegments - 1; moveIdx++) {\r\n        currentAngle += arcAngleIncrement;\r\n        px = centerX + arcRadius * Math.cos(currentAngle);\r\n        py = centerY + arcRadius * Math.sin(currentAngle);\r\n        pz += zStep;\r\n        points.push({ x: px, y: pz, z: py });\r\n    }\r\n\r\n    points.push({ x: x, y: z, z: y });\r\n\r\n    //position is the final position\r\n    return { position: { x: x, y: z, z: y }, points: points }; //we'll abort the render and move te position to the new position.\r\n}\r\n\r\n\r\n\r\nexport function pauseProcessing() {\r\n    return new Promise((resolve) => setTimeout(resolve)).then(() => {\r\n      return Date.now();\r\n    });\r\n  }","export class BaseRenderer {\r\n    constructor(scene, specularColor, loadingProgressCallback, renderFuncs, tools) {\r\n        this.scene = scene;\r\n        this.specularColor = specularColor;\r\n        this.loadingProgressCallback = loadingProgressCallback;\r\n        this.renderFuncs = renderFuncs;\r\n        this.solidMat;\r\n        this.transparentMat;\r\n        this.previousFilePosition = 0;\r\n        this.currentFilePosition = 0;\r\n        this.tools = tools;\r\n\r\n\r\n    }\r\n   \r\n\r\n}","/*eslint-disable*/\r\n'use strict';\r\n\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder'\r\nimport { StandardMaterial } from '@babylonjs/core/Materials/standardMaterial'\r\nimport { pauseProcessing } from '../utils.js'\r\nimport { Color4 } from '@babylonjs/core/Maths/math.color';\r\nimport { BaseRenderer } from './baserenderer.js';\r\nimport { Matrix, Vector3 } from '@babylonjs/core/Maths/math.vector';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh';\r\nimport { Material } from '@babylonjs/core/Materials/material';\r\nimport { Engine } from '@babylonjs/core/Engines/engine';\r\n\r\nimport '@babylonjs/core/Meshes/thinInstanceMesh'\r\n\r\n//Track series of events that happen to a particle over time and when\r\nclass VoxelEvent {\r\n    constructor(filePosition, add) {\r\n        this.filePosition = filePosition;  //Position where operation happens\r\n        this.add = add; //Additve or Subractive Operation\r\n    }\r\n}\r\n\r\nexport default class VoxelRenderer extends BaseRenderer {\r\n\r\n    static drawDelay = 5;\r\n    constructor(scene, voxelWidth, voxelHeight, specularColor, loadingProgressCallback, renderFuncs, tools) {\r\n        super(scene, specularColor, loadingProgressCallback, renderFuncs, tools)\r\n        //Core items from GCodeProcessor\r\n        this.voxelWidth = parseFloat(voxelWidth);\r\n        this.voxelHeight = parseFloat(voxelHeight);\r\n\r\n        this.solidMat;\r\n        this.transparentMat;\r\n        //used for rendering visuals\r\n        this.isLoading = false;\r\n        this.scrubDistance = 2000;\r\n        this.hasSubtractive = false;\r\n    }\r\n\r\n    //Used for rendering visual\r\n    updateFilePosition(position) {\r\n        this.previousFilePosition = this.currentFilePosition;\r\n        this.currentFilePosition = position;\r\n    }\r\n\r\n    buildBox() {\r\n\r\n        if (this.solidMat) {\r\n            try {\r\n                this.solidMat.dispose()\r\n                this.solidMat = null;\r\n            }\r\n            catch {\r\n                ;\r\n            }\r\n        }\r\n\r\n        if (this.transparentMat) {\r\n            try {\r\n                this.transparentMat.dispose()\r\n                this.transparentMat = null;\r\n            }\r\n            catch {\r\n                ;\r\n            }\r\n        }\r\n\r\n        //build the box\r\n        let box = MeshBuilder.CreateBox('box', { width: this.voxelWidth, height: this.voxelHeight, depth: this.voxelWidth }, this.scene);\r\n        box.hasVertexAlpha = true;\r\n        box.updateFacetData = true;\r\n\r\n        let material = new StandardMaterial(\"mat\", this.scene);\r\n\r\n        material.needDepthPrePass = true;\r\n        material.forceDepthWrite = true;\r\n        material.backFaceCulling = false;\r\n        box.material = material;\r\n\r\n        return box;\r\n    }\r\n\r\n    async render(lines) {\r\n        this.isLoading = true;\r\n\r\n        let that = this;\r\n\r\n        //X, Y, Z\r\n        let x = parseInt(300 / this.voxelWidth) + 1 //Bed Size\r\n        let z = x; //Default to a square computed bed for now    \r\n        let y = parseInt(300 / this.voxelHeight) + 1  //Max Height\r\n\r\n\r\n        let layers = new Array(z);\r\n        for (let ystep = 0; ystep <= y; ystep++) {\r\n            layers[ystep] = new Object();\r\n        }\r\n\r\n        let maxRenderedLayer = 0\r\n        //        let layerMap = {}  //Layer Map  two key dictionary for quick lookup ithout an array\r\n        let layerHeight = 0;\r\n        let lastUpdate = new Date();\r\n        /********************************************************************************************** */\r\n        /*                                  Build the voxel model                                       */\r\n        /********************************************************************************************** */\r\n        for (var lineIdx = 0; lineIdx < lines.length; lineIdx++) {\r\n            let gcodeLine = lines[lineIdx];\r\n            let tool = this.tools[gcodeLine.tool];\r\n\r\n            if (!gcodeLine.extruding) { continue; } //We only care about gcode lines which are performing an action such as extrusion or cutting\r\n\r\n            let voxelArray = gcodeLine.getVoxelSegments(this.voxelWidth, this.voxelHeight, tool.getDiameter() / 2, tool.isAdditive());\r\n\r\n            if (voxelArray === undefined || voxelArray.length === 0) continue;\r\n\r\n            let voxelEvent = new VoxelEvent(gcodeLine.gcodeLineNumber, tool.isAdditive());\r\n            for (let voxelIdx = 0; voxelIdx < voxelArray.length; voxelIdx++) {\r\n                let voxel = voxelArray[voxelIdx];\r\n                let idxX = Math.floor(voxel.x / this.voxelWidth);\r\n                let idxY = Math.floor(voxel.y / this.voxelHeight);\r\n                let idxZ = Math.floor(voxel.z / this.voxelWidth);\r\n\r\n                if (idxY < 0) {\r\n                    idxY = 0;\r\n                }\r\n\r\n                if (idxY != maxRenderedLayer && tool.isAdditive()) {\r\n                    maxRenderedLayer = idxY;\r\n                }\r\n\r\n                if (tool.toolType === \"Extruder\") {\r\n\r\n                    try {\r\n                        var point = layers[idxY][idxX][idxZ];\r\n                    }\r\n                    catch (ex) {\r\n                        point = null;\r\n                    }\r\n\r\n                    if (!point) {\r\n                        try {\r\n                            if (!layers[idxY].hasOwnProperty(idxX)) {\r\n                                layers[idxY][idxX] = {};\r\n                            }\r\n                            layers[idxY][idxX][idxZ] = { color: gcodeLine.color, voxelEvents: [voxelEvent] };\r\n                        }\r\n                        catch (ex) {\r\n                            console.log(ex);\r\n                            console.log(`${idxX}  ${idxY} ${idxZ}`)\r\n                        }\r\n                    }\r\n                    else {\r\n                        //Find the point\r\n                        //if (points.length > 0 && points[0].data && !points[0].data.voxelEvents.some(ev => ev.filePosition === voxelEvent.filePosition)) {\r\n                        point.voxelEvents.push(voxelEvent);\r\n                        //}\r\n                    }\r\n                }\r\n                else { //Deal with cutting operation\r\n                    this.hasSubtractive = true;\r\n                    for (let cutY = idxY; cutY <= maxRenderedLayer + 1; cutY++) {\r\n                        try {\r\n                            if (layers[cutY][idxX][idxZ]) {\r\n                                layers[cutY][idxX][idxZ].voxelEvents.push(voxelEvent);\r\n                            } else {\r\n                                if (!layers[cutY].hasOwnProperty(idxX)) {\r\n                                    layers[cutY][idxX] = {};\r\n                                }\r\n                                layers[cutY][idxX][idxZ] = { color: gcodeLine.color, voxelEvents: [voxelEvent] }\r\n                            }\r\n                        }\r\n                        catch {\r\n                            if (cutY < 0) continue;\r\n                            if (!layers[cutY].hasOwnProperty(idxX)) {\r\n                                layers[cutY][idxX] = {};\r\n                            }\r\n                            layers[cutY][idxX][idxZ] = { color: gcodeLine.color, voxelEvents: [voxelEvent] }\r\n                        }\r\n\r\n                    }\r\n                }\r\n            }\r\n            lines[lineIdx] = null;\r\n\r\n            if (lineIdx % 10000 === 0 || (new Date() - lastUpdate > 5000)) {\r\n                lastUpdate = new Date();\r\n                this.loadingProgressCallback(lineIdx / lines.length, \"Generating Voxel Map...\");\r\n                await pauseProcessing();\r\n            }\r\n        }\r\n\r\n        this.loadingProgressCallback(lineIdx / lines.length, \"Rendering Voxel...\");\r\n\r\n        console.log(this.hasSubtractive);\r\n\r\n        let particleCount = 0;\r\n        /********************************************************************************************** */\r\n        /*                                 Build the 3d model                                           */\r\n        /********************************************************************************************** */\r\n        for (let vy = 0; vy < maxRenderedLayer; vy++) {\r\n            let layerParticles = [];\r\n            if (layers[vy] === undefined) continue;\r\n\r\n            let minFilePosition = 999999999999;\r\n            let maxFilePosition = -999999999999;\r\n            for (let [x, zValues] of Object.entries(layers[vy])) {\r\n                for (let [z, voxel] of Object.entries(zValues)) {\r\n\r\n                    if (voxel.voxelEvents[0].filePosition < minFilePosition)\r\n                        minFilePosition = voxel.voxelEvents[0].filePosition;\r\n\r\n                    if (voxel.voxelEvents.slice()[0].filePosition > maxFilePosition)\r\n                        maxFilePosition = voxel.voxelEvents[0].filePosition;\r\n                    voxel.color.a = 1;\r\n                    let p = {\r\n                        matrix: Matrix.Identity(),\r\n                        color: voxel.color.clone(),\r\n                        voxelEvents: voxel.voxelEvents,\r\n                        lastDrawnCount: 0\r\n                    }\r\n                    p.matrix.setTranslation(new Vector3(x * this.voxelWidth, vy * this.voxelHeight, z * this.voxelWidth))\r\n                    layerParticles.push(p)\r\n                }\r\n            }\r\n            particleCount += layerParticles.length;\r\n            layers[vy] = null;\r\n            let box = this.buildBox();\r\n\r\n            box.alphaIndex = vy;\r\n            box.renderingGroupId = 1;\r\n\r\n            let matrixData = new Float32Array(16 * layerParticles.length);\r\n            let colorData = new Float32Array(4 * layerParticles.length);\r\n\r\n            for (let particleIdx = 0; particleIdx < layerParticles.length; particleIdx++) {\r\n                let particle = layerParticles[particleIdx];\r\n\r\n                try {\r\n                    if (particle) {\r\n                        particle.matrix.copyToArray(matrixData, 16 * particleIdx);\r\n                        particle.color.toArray(colorData, 4 * particleIdx);\r\n                        if (!this.hasSubtractive) {\r\n                            delete particle.matrix; //optimization to free up memory\r\n                        }\r\n                    }\r\n                    else {\r\n                        // console.log(particle)\r\n                    }\r\n                }\r\n                catch (ex) {\r\n                    console.log(ex);\r\n                }\r\n            }\r\n\r\n            box.thinInstanceSetBuffer(\"matrix\", matrixData, 16);\r\n            box.thinInstanceSetBuffer(\"color\", colorData, 4);\r\n            box.thinInstanceRefreshBoundingInfo();\r\n\r\n            let clearColor = new Color4(1, 0, 0, 0);\r\n            let red = new Color4(1, 0, 0, 0.8);\r\n            let green = new Color4(0, 1, 0, 0.8)\r\n            let lostInSpace = Matrix.Identity().setTranslation(new Vector3(10000, 10000, 10000));\r\n\r\n            let updateVoxels = () => {\r\n                //let particleUpdated = true;\r\n                let hasSubtract = false;\r\n                let hasMove = false;\r\n\r\n\r\n\r\n                for (let particleIdx = 0; particleIdx < layerParticles.length; particleIdx++) {\r\n                    let particle = layerParticles[particleIdx];\r\n\r\n                    if (scrubbing) {\r\n                        clearColor.toArray(colorData, particleIdx * 4);\r\n                        if(this.hasSubtractive){\r\n                            lostInSpace.copyToArray(matrixData, particleIdx * 16);\r\n                        }\r\n                    }\r\n\r\n\r\n                    var lastEvent = particle.voxelEvents.filter(ev => ev.filePosition < this.currentFilePosition).slice(-1)[0];\r\n                    if (lastEvent === null || lastEvent === undefined) continue;\r\n\r\n                    if (lastEvent.add) {\r\n                        if (lastEvent.filePosition > lastPosition && lastEvent.filePosition <= this.currentFilePosition) {\r\n                            particle.lastDrawnCount = 0;\r\n                            if(this.hasSubtractive){\r\n                                particle.matrix.copyToArray(matrixData, particleIdx * 16);\r\n                            }\r\n                        }\r\n                        if (scrubbing) {\r\n                            particle.lastDrawnCount = VoxelRenderer.drawDelay;\r\n                        }\r\n                        if (particle.lastDrawnCount < VoxelRenderer.drawDelay) {\r\n                            green.toArray(colorData, particleIdx * 4);\r\n                            particle.lastDrawnCount++;\r\n                        }\r\n                        else {\r\n                            particle.color.toArray(colorData, particleIdx * 4);\r\n                            if (this.hasSubtractive) {\r\n                                particle.matrix.copyToArray(matrixData, particleIdx * 16);\r\n                            }\r\n                        }\r\n\r\n\r\n                    }\r\n                    else {\r\n                        if (lastEvent.filePosition >= lastPosition && lastEvent.filePosition <= this.currentFilePosition) {\r\n                            particle.lastDrawnCount = 0;\r\n                        }\r\n                        if (scrubbing) {\r\n                            particle.lastDrawnCount = VoxelRenderer.drawDelay;\r\n                        }\r\n                        if (particle.lastDrawnCount < VoxelRenderer.drawDelay) {\r\n                            red.toArray(colorData, particleIdx * 4);\r\n                            particle.lastDrawnCount++;\r\n                        }\r\n                        else {\r\n                            hasSubtract = true;\r\n                            clearColor.toArray(colorData, particleIdx * 4);\r\n                            if (this.hasSubtractive) {\r\n                                lostInSpace.copyToArray(matrixData, particleIdx * 16);\r\n                            }\r\n                            hasMove = true;\r\n                        }\r\n                    }\r\n                }\r\n                box.thinInstanceBufferUpdated('color');\r\n                if (hasSubtract) {\r\n                    box.thinInstanceRefreshBoundingInfo();\r\n                }\r\n                if (hasMove) {\r\n                    box.thinInstanceRefreshBoundingInfo();\r\n                    box.thinInstanceBufferUpdated('matrix');\r\n                }\r\n            }\r\n\r\n\r\n            let lastPosition = 0;\r\n            let firstPass = true;\r\n            let scrubbing = false;\r\n\r\n            let timeStamp = Date.now()\r\n            //Start particle animation\r\n            let beforeRenderFunc = function () {\r\n                if (that.isLoading) return;\r\n                if (Date.now() - timeStamp < 200) {\r\n                    return;\r\n                }\r\n                timeStamp = Date.now();\r\n                //Deal with time scrubbing\r\n                if (Math.abs(lastPosition - that.currentFilePosition) > that.scrubDistance || firstPass) {\r\n                    scrubbing = true;\r\n                    updateVoxels();\r\n                    firstPass = false;\r\n                } else {\r\n                    //Only update this SPS segment\r\n                    if (that.currentFilePosition >= minFilePosition - 30000 && that.currentFilePosition <= maxFilePosition + 30000) {\r\n                        scrubbing = false;\r\n                        updateVoxels();\r\n                    }\r\n                }\r\n                lastPosition = that.currentFilePosition;\r\n            }\r\n\r\n\r\n            if (this.loadingProgressCallback) {\r\n                this.loadingProgressCallback(vy / maxRenderedLayer, 'Rendering Voxels...');\r\n            }\r\n\r\n            //Register animation functions to main loop but keep track of them for deregistration later\r\n            this.renderFuncs.push(beforeRenderFunc); //track our registered function\r\n            this.scene.registerBeforeRender(beforeRenderFunc); //register render function\r\n\r\n            if (new Date() - lastUpdate > 1000) {\r\n                lastUpdate = new Date()\r\n                await pauseProcessing();\r\n            }\r\n        }\r\n\r\n        console.log(particleCount);\r\n\r\n        layers = null;\r\n        this.loadingProgressCallback(1);\r\n        this.isLoading = false;\r\n    }\r\n\r\n}\r\n","/* eslint-disable */\r\n'use strict';\r\n\r\nimport { Color4 } from '@babylonjs/core/Maths/math.color'\r\nimport { Vector3 } from '@babylonjs/core/Maths/math.vector';\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh'\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder'\r\n\r\nexport default class {\r\n  constructor() {\r\n    this.tool = 0;\r\n    this.start;\r\n    this.end;\r\n    this.extruding = false;\r\n    this.gcodeLineNumber = 0;\r\n    this.color;\r\n    this.feedRate = 0;\r\n    this.layerHeight = 0;\r\n  }\r\n\r\n  length() {\r\n    return this.distanceVector(this.start, this.end);\r\n  }\r\n\r\n  renderLine(scene) {\r\n    var points = [this.start, this.end];\r\n    let lineMesh = Mesh.CreateLines('lines', points, scene);\r\n    lineMesh.enableEdgesRendering();\r\n    lineMesh.edgesWidth = 10;\r\n    lineMesh.edgesColor = new Color4(1, 1, 0, 1);\r\n  }\r\n\r\n  renderLineV2() {\r\n    var tube = MeshBuilder.CreateTube('tube', {\r\n      path: [this.start, this.end],\r\n      radius: 0.2,\r\n      tesselation: 4,\r\n      sideOrientation: Mesh.FRONTSIDE,\r\n      updatable: false,\r\n    });\r\n    tube.doNotSyncBoundingInfo = true;\r\n    return tube;\r\n  }\r\n\r\n  distanceVector(v1, v2) {\r\n    let dx = v1.x - v2.x;\r\n    let dy = v1.y - v2.y;\r\n    let dz = v1.z - v2.z;\r\n\r\n    return Math.sqrt(dx * dx + dy * dy + dz * dz);\r\n  }\r\n\r\n  renderLineV3(p, invisible) {\r\n    let length = this.distanceVector(this.start, this.end);\r\n    let rot2 = Math.atan2(this.end.z - this.start.z, this.end.x - this.start.x);\r\n    p.scaling.x = length;\r\n    p.rotation.y = -rot2;\r\n\r\n    p.position.x = this.start.x + (length / 2) * Math.cos(rot2);\r\n    p.position.y = this.start.y;\r\n    p.position.z = this.start.z + (length / 2) * Math.sin(rot2);\r\n    p.color = this.color;\r\n    if (invisible) {\r\n      p.materialIndex = 1;\r\n    } else {\r\n      p.materialIndex = 0;\r\n    }\r\n\r\n    p.props = {\r\n      gcodeLineNumber: this.gcodeLineNumber,\r\n      originalColor: this.color,\r\n    };\r\n  }\r\n\r\n  renderParticle(p) {\r\n    p.position.x = this.start.x;\r\n    p.position.y = this.start.y;\r\n    p.position.z = this.start.z;\r\n    p.color = this.color;\r\n  }\r\n\r\n  getPoints() {\r\n    return {\r\n      points: [this.start, this.end],\r\n      colors: [this.color, this.color],\r\n    };\r\n  }\r\n\r\n  getColor() {\r\n    if (this.extruding) {\r\n      return new Color4(1, 1, 1, 1);\r\n    }\r\n    return new Color4(1, 0, 0, 1);\r\n  }\r\n\r\n  //X Z =  X Y printer space\r\n  getVoxelSegments(voxelSize, voxelHeight, toolRadius = 0, additive) {\r\n    let pointArray = new Array();\r\n    let distance = this.distanceVector(this.start, this.end);\r\n    if (distance < 0.1) return;\r\n    let segments = Math.round(((distance / (voxelSize / 2)) - 1) * 100) / 100;\r\n\r\n    let rot2 = Math.atan2(this.end.z - this.start.z, this.end.x - this.start.x);\r\n\r\n\r\n    if (additive) {\r\n      this.start.y -= voxelSize / 2;\r\n      this.end.y -= voxelSize / 2;\r\n    }\r\n\r\n    let point = this.start.clone();\r\n    let segCount = 0;\r\n    pointArray.push(point.clone());\r\n\r\n\r\n\r\n    let stepX = voxelSize / 2 * Math.cos(rot2);\r\n    let stepZ = voxelSize / 2 * Math.sin(rot2);\r\n\r\n    let stepY = 0;\r\n    if (segments !== 0) {\r\n      stepY = (this.end.y - this.start.y) / segments;\r\n    }\r\n\r\n    while (segCount < segments) {\r\n      point.x += stepX;\r\n      point.y += stepY;\r\n      point.z += stepZ;\r\n      pointArray.push(point.clone());\r\n\r\n      //TODOJER : Deal with points within the diameter \r\n      //Include points that are potentially cut by a cutting tool.\r\n      //This is a gross estimation and will need to be better calculated for round values\r\n      if (toolRadius > voxelSize) {\r\n        for (let pX = point.x - toolRadius; pX <= point.x + toolRadius; pX += voxelSize) {\r\n          for (let pZ = point.z - toolRadius; pZ < point.z + toolRadius; pZ += voxelSize) {\r\n            pointArray.push(new Vector3(pX, point.y, pZ));\r\n          }\r\n        }\r\n      }\r\n      segCount++;\r\n    }\r\n\r\n    pointArray.push(this.end.clone());\r\n\r\n    if (this.layerHeight > voxelHeight && additive) {\r\n      let depthPoints = [];\r\n      for (let pointIdx = 0; pointIdx < pointArray.length; pointIdx++) {\r\n        let pt = pointArray[pointIdx];\r\n        for (let yOff = 1; yOff < (Math.ceil(this.layerHeight / voxelHeight)); yOff++) {\r\n          depthPoints.push(new Vector3(pt.x, pt.y - (yOff * voxelHeight), pt.z))\r\n        }\r\n      }\r\n      pointArray.push(...depthPoints);\r\n    }    \r\n    return pointArray;\r\n  }\r\n\r\n\r\n}\r\n","/*eslint-disable*/\r\n'use strict';\r\n\r\nimport { Vector3 } from '@babylonjs/core/Maths/math.vector'\r\nimport { Color4 } from '@babylonjs/core/Maths/math.color'\r\nimport { VertexBuffer } from '@babylonjs/core/Meshes/buffer'\r\nimport { StandardMaterial } from '@babylonjs/core/Materials/standardMaterial'\r\nimport { SolidParticleSystem } from '@babylonjs/core/Particles/solidParticleSystem'\r\nimport { PointsCloudSystem } from '@babylonjs/core/Particles/pointsCloudSystem'\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder'\r\nimport VoxelRenderer from './RenderModes/voxel2.js'\r\nimport { pauseProcessing } from './utils.js'\r\nimport gcodeLine from './gcodeline';\r\nimport { doArc } from './utils.js'\r\n\r\nexport const RenderMode = {\r\n  Block: 1,\r\n  Line: 2,\r\n  Point: 3,\r\n  Max: 4,\r\n  Voxel: 5\r\n};\r\n\r\nexport const ColorMode = {\r\n  Color: 0,\r\n  Feed: 1,\r\n};\r\n\r\nexport default class {\r\n  constructor() {\r\n    this.currentPosition = new Vector3(0, 0, 0);\r\n    this.currentColor = new Color4(0.25, 0.25, 0.25, 1);\r\n    this.currentTool = 0;\r\n    this.renderVersion = RenderMode.Line;\r\n    this.absolute = true; //Track if we are in relative or absolute mode.\r\n    this.lines = [];\r\n    this.travels = [];\r\n    this.sps;\r\n    this.maxHeight = 0;\r\n    this.minHeight = 0;\r\n    this.lineCount = 0;\r\n    this.renderMode = '';\r\n    this.extruderCount = 10;\r\n    this.layerDictionary = {};\r\n\r\n    //We'll look at the last 2 layer heights for now to determine layer height.\r\n    this.previousLayerHeight = 0;\r\n    this.currentLayerHeight = 0;\r\n\r\n    //Live Rendering\r\n    this.liveTracking = false; //Tracks if we loaded the current job to enable live rendering\r\n    this.liveTrackingShowSolid = localStorage.getItem('showSolid') === 'true'; //Flag if we want to continue showing the whole model while rendering\r\n\r\n\r\n    this.materialTransparency = 0.3;\r\n    this.gcodeLineIndex = [];\r\n    this.gcodeFilePosition = 0;\r\n\r\n    this.refreshTime = 200;\r\n    this.timeStamp;\r\n\r\n    this.lineLengthTolerance = 0.05;\r\n\r\n    this.tools = new Array();\r\n\r\n\r\n    this.progressColor = new Color4(0, 1, 0, 1);\r\n\r\n    //scene data\r\n    this.lineMeshIndex = 0;\r\n    this.scene;\r\n    this.renderFuncs = [];\r\n\r\n    //Mesh Breaking\r\n    this.meshBreakPoint = 20000;\r\n\r\n    //average feed rate trimming\r\n    this.feedRateTrimming = false;\r\n    this.currentFeedRate = 0;\r\n    this.feedValues = 0;\r\n    this.numChanges = 0;\r\n    this.avgFeed = 0;\r\n    this.maxFeedRate = 0;\r\n    this.minFeedRate = Number.MAX_VALUE;\r\n    this.underspeedPercent = 1;\r\n\r\n    this.colorMode = Number.parseInt(localStorage.getItem('processorColorMode'));\r\n    if (!this.colorMode) {\r\n      this.setColorMode(ColorMode.Color);\r\n    }\r\n\r\n    this.minColorRate = Number.parseInt(localStorage.getItem('minColorRate'));\r\n    if (!this.minColorRate) {\r\n      this.minColorRate = 1200;\r\n      localStorage.setItem('minColorRate', this.minColorRate);\r\n    }\r\n\r\n    this.maxColorRate = Number.parseInt(localStorage.getItem('maxColorRate'));\r\n    if (!this.maxColorRate) {\r\n      this.maxColorRate = 3600;\r\n      localStorage.setItem('maxColorRate', this.maxColorRate);\r\n    }\r\n\r\n    this.minFeedColorString = localStorage.getItem('minFeedColor');\r\n    if (!this.minFeedColorString) {\r\n      this.minFeedColorString = '#0000FF';\r\n    }\r\n    this.minFeedColor = Color4.FromHexString(this.minFeedColorString.padEnd(9, 'F'));\r\n\r\n    this.maxFeedColorString = localStorage.getItem('maxFeedColor');\r\n    if (!this.maxFeedColorString) {\r\n      this.maxFeedColorString = '#FF0000';\r\n    }\r\n    this.maxFeedColor = Color4.FromHexString(this.maxFeedColorString.padEnd(9, 'F'));\r\n\r\n    //render every nth row\r\n    this.everyNthRow = 0;\r\n    this.currentRowIdx = -1;\r\n    this.currentZ = 0;\r\n    this.renderTravels = true;\r\n    this.lineVertexAlpha = false;\r\n\r\n    this.forceWireMode = localStorage.getItem('forceWireMode') === \"true\";\r\n\r\n    this.spreadLines = false;\r\n    this.spreadLineAmount = 10;\r\n    this.debug = false;\r\n    this.specularColor = new Color4(0.1, 0.1, 0.1, 0.1);\r\n\r\n    this.lookAheadLength = 500;\r\n    this.cancelLoad = false;\r\n\r\n    this.loadingProgressCallback;\r\n\r\n    this.hasSpindle = false;\r\n\r\n    this.voxelWidth = 1;\r\n    this.voxelHeight = 1;\r\n    this.voxelRenderer = null;\r\n  }\r\n\r\n  setProgressColor(color) {\r\n    this.progressColor = Color4.FromHexString(color.padEnd(9, 'F'));\r\n  }\r\n\r\n  getMaxHeight() {\r\n    return this.maxHeight;\r\n  }\r\n\r\n  getMinHeight() {\r\n    return this.minHeight;\r\n  }\r\n\r\n  setRenderQualitySettings(numberOfLines, renderQuality) {\r\n\r\n    if (true) {\r\n      this.renderVersion = RenderMode.Voxel;\r\n      return;\r\n    }\r\n\r\n  }\r\n\r\n  initVariables() {\r\n    this.currentPosition = new Vector3(0, 0, 0);\r\n    this.cancelLoad = false;\r\n    this.absolute = true;\r\n    this.currentZ = 0;\r\n    this.currentRowIdx = -1;\r\n    this.gcodeLineIndex = [];\r\n    this.lineMeshIndex = 0;\r\n    this.lastExtrudedZHeight = 0;\r\n    this.previousLayerHeight = 0;\r\n    this.currentLayerHeight = 0;\r\n    this.minFeedRate = Number.MAX_VALUE;\r\n    this.maxFeedRate = 0;\r\n    this.hasSpindle = false;\r\n    this.currentColor = new Color4(1,1,1,1);\r\n  }\r\n\r\n  async processGcodeFile(file, renderQuality, clearCache) {\r\n    this.initVariables();\r\n\r\n    this.currentTool = 0;\r\n    if (renderQuality === undefined || renderQuality === null) {\r\n      renderQuality = 4;\r\n    }\r\n\r\n    if (file === undefined || file === null || file.length === 0) {\r\n      return;\r\n    }\r\n\r\n    var lines = file.split('\\n'); //file.split(/\\r\\n|\\n/);\r\n    //Get an opportunity to free memory before we strt generating 3d model\r\n    if (typeof clearCache === 'function') {\r\n      clearCache();\r\n    }\r\n\r\n    this.lineCount = lines.length;\r\n\r\n    if (this.debug) {\r\n      console.info(`Line Count : ${this.lineCount}`);\r\n    }\r\n\r\n    this.setRenderQualitySettings(this.lineCount, renderQuality);\r\n\r\n    //set initial color to extruder 0\r\n    this.currentColor = this.tools[0].color;\r\n\r\n    lines.reverse();\r\n    let filePosition = 0; //going to make this file position\r\n    this.timeStamp = Date.now();\r\n    while (lines.length) {\r\n      if (this.cancelLoad) {\r\n        this.cancelLoad = false;\r\n        return;\r\n      }\r\n      var line = lines.pop();\r\n      filePosition += line.length + 1;\r\n      line.trim();\r\n      if (!line.startsWith(';')) {\r\n\r\n        this.processLine(line, filePosition);\r\n        // this.processLineV2(line, filePosition);\r\n\r\n      }\r\n\r\n      if (Date.now() - this.timeStamp > 10) {\r\n        if (this.loadingProgressCallback) {\r\n          this.loadingProgressCallback(filePosition / file.length, \"Loading File...\");\r\n        }\r\n        this.timeStamp = await pauseProcessing();\r\n      }\r\n    }\r\n\r\n    //build the travel mesh\r\n    if (this.renderTravels) {\r\n      this.createTravelLines(this.scene)\r\n    }\r\n\r\n    file = {}; //Clear out the file.\r\n  }\r\n\r\n  async processLine(tokenString, lineNumber) {\r\n    //Remove the comments in the line\r\n    let commentIndex = tokenString.indexOf(';');\r\n    if (commentIndex > -1) {\r\n      tokenString = tokenString.substring(0, commentIndex - 1).trim();\r\n    }\r\n    let tokens;\r\n\r\n    tokenString = tokenString.toUpperCase();\r\n\r\n    let command = tokenString.match(/[GM]+[0-9.]+/); //|S+\r\n\r\n    if (command != null) {\r\n      command = command.filter(c => c.startsWith('G') || c.startsWith('M'));\r\n      switch (command[0]) {\r\n        case 'G0':\r\n        case 'G1':\r\n          {\r\n            tokens = tokenString.split(/(?=[GXYZEFUV])/);\r\n            var line = new gcodeLine();\r\n            line.tool = this.currentTool;\r\n            line.gcodeLineNumber = lineNumber;\r\n            line.start = this.currentPosition.clone();\r\n            line.layerHeight = this.currentLayerHeight - this.previousLayerHeight;\r\n            //Override and treat all G1s as extrusion/cutting moves. Support ASMBL Code\r\n            if(command[0] == 'G1' && !this.tools[this.currentTool].isAdditive()){\r\n              line.extruding = true;\r\n              line.color = this.tools[this.currentTool].color.clone();\r\n            }\r\n\r\n            for (let tokenIdx = 1; tokenIdx < tokens.length; tokenIdx++) {\r\n              let token = tokens[tokenIdx];\r\n              switch (token[0]) {\r\n                case 'X':\r\n                  this.currentPosition.x = this.absolute ? Number(token.substring(1)) : this.currentPosition.x + Number(token.substring(1));\r\n                  break;\r\n                case 'Y':\r\n                  this.currentPosition.z = this.absolute ? Number(token.substring(1)) : this.currentPosition.z + Number(token.substring(1));\r\n                  break;\r\n                case 'Z':\r\n                  this.currentPosition.y = this.absolute ? Number(token.substring(1)) : this.currentPosition.y + Number(token.substring(1));\r\n                  if (this.currentPosition.y < this.minHeight) {\r\n                    this.minHeight = this.currentPosition.y;\r\n                  }\r\n                  if (this.spreadLines) {\r\n                    this.currentPosition.y *= this.spreadLineAmount;\r\n                  }\r\n                  break;\r\n                case 'E':\r\n                  //Do not count retractions as extrusions\r\n                  if (Number(token.substring(1)) > 0) {\r\n                    line.extruding = true;\r\n                    this.maxHeight = this.currentPosition.y; //trying to get the max height of the model.\r\n                  }\r\n                  break;\r\n                case 'F':\r\n                  this.currentFeedRate = Number(token.substring(1));\r\n                  if (this.currentFeedRate > this.maxFeedRate) {\r\n                    this.maxFeedRate = this.currentFeedRate;\r\n                  }\r\n                  if (this.currentFeedRate < this.minFeedRate) {\r\n                    this.minFeedRate = this.currentFeedRate;\r\n                  }\r\n\r\n                  if (this.colorMode === ColorMode.Feed) {\r\n                    let ratio = (this.currentFeedRate - this.minColorRate) / (this.maxColorRate - this.minColorRate);\r\n                    if (ratio >= 1) {\r\n                      this.currentColor = this.maxFeedColor;\r\n                    } else if (ratio <= 0) {\r\n                      this.currentColor = this.minFeedColor;\r\n                    } else {\r\n                      this.currentColor = Color4.Lerp(this.minFeedColor, this.maxFeedColor, ratio);\r\n                    }\r\n                  }\r\n\r\n                  break;\r\n              }\r\n            }\r\n\r\n            line.end = this.currentPosition.clone();\r\n            if (this.debug) {\r\n              console.log(`${tokenString}   absolute:${this.absolute}`);\r\n              console.log(lineNumber, line);\r\n            }\r\n\r\n            if (this.feedRateTrimming) {\r\n              this.feedValues += this.currentFeedRate;\r\n              this.numChanges++;\r\n              this.avgFeed = (this.feedValues / this.numChanges) * this.underspeedPercent;\r\n            }\r\n\r\n            //Nth row exclusion\r\n            if (this.everyNthRow > 1 && line.extruding) {\r\n              if (this.currentPosition.y > this.currentZ) {\r\n                this.currentRowIdx++;\r\n                this.currentZ = this.currentPosition.y;\r\n              }\r\n\r\n              if ((this.currentRowIdx % this.everyNthRow !== 0) ^ (this.currentRowIdx < 2)) {\r\n                return;\r\n              }\r\n            }\r\n\r\n            let spindleCutting = this.hasSpindle && command[0] === \"G1\";\r\n            let lineTolerance = line.length() >= this.lineLengthTolerance;\r\n            //feed rate trimming was disabled (probably will remove)\r\n            // let feedRateTrimming=  this.feedRateTrimming && this.currentFeedRate < this.avgFeed;\r\n\r\n            if (spindleCutting || (lineTolerance && line.extruding)) {\r\n              line.color = this.currentColor.clone();\r\n              this.lines.push(line);\r\n\r\n              if (this.currentPosition.y > this.currentLayerHeight && this.currentPosition.y < 20) {\r\n                this.previousLayerHeight = this.currentLayerHeight;\r\n                this.currentLayerHeight = this.currentPosition.y;\r\n              }\r\n\r\n            } else if (this.renderTravels && !line.extruding) {\r\n              line.color = new Color4(1, 0, 0, 1);\r\n              this.travels.push(line);\r\n            }\r\n\r\n          } break;\r\n        case 'G2':\r\n        case 'G3': {\r\n          tokens = tokenString.split(/(?=[GXYZIJFRE])/);\r\n          let extruding = tokenString.indexOf('E') > 0;\r\n          let cw = tokens.filter(t => t === \"G2\");\r\n          let arcResult = doArc(tokens, this.currentPosition, !this.absolute, 1);\r\n          let curPt = this.currentPosition.clone();\r\n          arcResult.points.forEach((point, idx) => {\r\n            let line = new gcodeLine();\r\n            line.tool = this.currentTool;\r\n            line.gcodeLineNumber = this.gcodeLineNumber;\r\n            line.start = curPt.clone();\r\n            line.end = new Vector3(point.x, point.y, point.z);\r\n            line.color = this.currentColor.clone();\r\n            line.extruding = extruding;\r\n            if (this.debug) {\r\n              line.color = cw ? new Color4(0, 1, 1, 1) : new Color4(1, 1, 0, 1)\r\n              if (idx == 0) {\r\n                line.color = new Color4(0, 1, 0, 1);\r\n              }\r\n            }\r\n            curPt = line.end.clone();\r\n            this.lines.push(line);\r\n          });\r\n          //Last point to currentposition\r\n\r\n\r\n\r\n          this.currentPosition = new Vector3(arcResult.position.x, arcResult.position.y, arcResult.position.z);\r\n        } break;\r\n        case 'G28':\r\n          //Home\r\n          tokens = tokenString.split(/(?=[GXYZ])/);\r\n          if (tokens.length == 1) {\r\n            this.currentPosition = new Vector3(0, 0, 0);\r\n          }\r\n          else {\r\n            if (tokens.some(t => t.trim() === 'X')) {\r\n              this.currentPosition.x = 0;\r\n            }\r\n            if (tokens.some(t => t.trim() === 'Y')) {\r\n              this.currentPosition.z = 0;\r\n            }\r\n            if (tokens.some(t => t.trim() === 'Z')) {\r\n              this.currentPosition.y = 0;\r\n            }\r\n\r\n          }\r\n          break;\r\n        case 'G90':\r\n          this.absolute = true;\r\n          break;\r\n        case 'G91':\r\n          this.absolute = false;\r\n          break;\r\n        case 'G92':\r\n          //this resets positioning, typically for extruder, probably won't need\r\n          break;\r\n        case 'S':\r\n          this.hasSpindle = true;\r\n          break;\r\n        case 'M3':\r\n        case 'M4': {\r\n          let tokens = tokenString.split(/(?=[SM])/);\r\n          let spindleSpeed = tokens.filter(speed => speed.startsWith('S'))\r\n          spindleSpeed = spindleSpeed[0] ? Number(spindleSpeed[0].substring(1)) : 0;\r\n          if (spindleSpeed > 0) {\r\n            this.hasSpindle = true;\r\n          }\r\n\r\n        }\r\n          break;\r\n        case 'M567': {\r\n          let tokens = tokenString.split(/(?=[PE])/);\r\n          if (this.colorMode === ColorMode.Feed) break;\r\n          for (let tokenIdx = 1; tokenIdx < tokens.length; tokenIdx++) {\r\n            let token = tokens[tokenIdx];\r\n            var finalColors = [1, 1, 1];\r\n            switch (token[0]) {\r\n              case 'E':\r\n                this.extruderPercentage = token.substring(1).split(':');\r\n                break;\r\n            }\r\n          }\r\n          for (let extruderIdx = 0; extruderIdx < this.extruderPercentage.length; extruderIdx++) {\r\n            finalColors[0] -= (1 - this.tools[extruderIdx].color.r) * this.extruderPercentage[extruderIdx];\r\n            finalColors[1] -= (1 - this.tools[extruderIdx].color.g) * this.extruderPercentage[extruderIdx];\r\n            finalColors[2] -= (1 - this.tools[extruderIdx].color.b) * this.extruderPercentage[extruderIdx];\r\n          }\r\n          this.currentColor = new Color4(finalColors[0], finalColors[1], finalColors[2], 0.1);\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      //command is null so we need to check a couple other items.\r\n      if (tokenString.startsWith('T')) {\r\n\r\n        this.currentPosition.z += 10; //For ASMBL we are going to assume that there is bed movement in a macro for toolchange.\r\n\r\n        this.currentTool = Number.parseInt(tokenString.substring(1)); //Track the current selected tool (Currently used for Voxel Mode)\r\n        if (this.colorMode !== ColorMode.Feed) {\r\n          var extruder = Number(tokenString.substring(1)) % this.extruderCount; //For now map to extruders 0 - 4\r\n          if (extruder < 0) extruder = 0; // Cover the case where someone sets a tool to a -1 value\r\n          this.currentColor = this.tools[extruder].color.clone();\r\n        }\r\n      }\r\n      if (this.debug) {\r\n        console.log(tokenString);\r\n      }\r\n\r\n    }\r\n    //break lines into manageable meshes at cost of extra draw calls\r\n    if (this.lines.length >= this.meshBreakPoint) {\r\n      //lets build the mesh\r\n      this.createScene(this.scene);\r\n      await pauseProcessing();\r\n      this.lineMeshIndex++;\r\n    }\r\n  }\r\n\r\n  renderLineMode(scene) {\r\n    let that = this;\r\n    let lastUpdate = Date.now();\r\n    let runComplete = false;\r\n    let meshIndex = this.lineMeshIndex;\r\n    this.gcodeLineIndex.push(new Array());\r\n\r\n    this.renderMode = 'Line Rendering';\r\n    //Extrusion\r\n    let lineArray = [];\r\n    let colorArray = [];\r\n    if (this.debug) {\r\n      console.log(this.lines[0]);\r\n    }\r\n\r\n    let transparentValue = this.lineVertexAlpha ? this.materialTransparency : 1;\r\n\r\n    for (var lineIdx = 0; lineIdx < this.lines.length; lineIdx++) {\r\n      let line = this.lines[lineIdx];\r\n      this.gcodeLineIndex[meshIndex].push(line.gcodeLineNumber);\r\n      let data = line.getPoints(scene);\r\n\r\n\r\n      if (this.liveTracking) {\r\n        data.colors[0].a = this.liveTrackingShowSolid ? transparentValue : 0\r\n        data.colors[1].a = this.liveTrackingShowSolid ? transparentValue : 0;\r\n      } else {\r\n        data.colors[0].a = transparentValue;\r\n        data.colors[1].a = transparentValue;\r\n      }\r\n\r\n      lineArray.push(data.points);\r\n      colorArray.push(data.colors);\r\n    }\r\n\r\n    let lineMesh = MeshBuilder.CreateLineSystem(\r\n      'm ' + this.lineMeshIndex,\r\n      {\r\n        lines: lineArray,\r\n        colors: colorArray,\r\n        updatable: true,\r\n      },\r\n      scene\r\n    );\r\n\r\n    lineArray = null;\r\n    colorArray = null;\r\n\r\n    lineMesh.isVisible = true;\r\n    lineMesh.isPickable = false;\r\n    lineMesh.markVerticesDataAsUpdatable(VertexBuffer.ColorKind);\r\n    lineMesh.material = new StandardMaterial(\"m\", scene);\r\n    lineMesh.material.backFaceCulling = true;\r\n    lineMesh.material.forceDepthWrite = true;\r\n    lineMesh.alphaIndex = meshIndex;\r\n    lineMesh.renderingGroupId = 2;\r\n\r\n\r\n\r\n    let lastRendered = 0;\r\n\r\n    let beforeRenderFunc = function () {\r\n\r\n      if (!that.liveTracking && !runComplete && !(that.gcodeFilePosition && lastRendered >= that.gcodeLineIndex[meshIndex].length - 1)) {\r\n        return;\r\n      } else if (Date.now() - lastUpdate < that.refreshTime) {\r\n        return;\r\n      } else {\r\n        lastUpdate = Date.now();\r\n\r\n        var colorData = lineMesh.getVerticesData(VertexBuffer.ColorKind);\r\n\r\n        if (colorData === null || colorData === undefined) {\r\n          console.log('Failed to Load Color VBO');\r\n          return;\r\n        }\r\n\r\n        let renderTo = -1;\r\n        let renderAhead = -1;\r\n        for (var renderToIdx = lastRendered; renderToIdx < that.gcodeLineIndex[meshIndex].length; renderToIdx++) {\r\n          if (that.gcodeLineIndex[meshIndex][renderToIdx] <= that.gcodeFilePosition) {\r\n            renderTo = renderToIdx;\r\n          }\r\n          if (that.gcodeLineIndex[meshIndex][renderToIdx] <= that.gcodeFilePosition + that.lookAheadLength) {\r\n            renderAhead = renderToIdx;\r\n          }\r\n        }\r\n\r\n        for (let colorIdx = lastRendered; colorIdx < renderTo; colorIdx++) {\r\n          let index = colorIdx * 8;\r\n          colorData[index] = that.progressColor.r;\r\n          colorData[index + 1] = that.progressColor.g;\r\n          colorData[index + 2] = that.progressColor.b;\r\n          colorData[index + 3] = that.progressColor.a;\r\n          colorData[index + 4] = that.progressColor.r;\r\n          colorData[index + 5] = that.progressColor.g;\r\n          colorData[index + 6] = that.progressColor.b;\r\n          colorData[index + 7] = that.progressColor.a;\r\n        }\r\n\r\n        //render ahead\r\n        for (let renderAheadIdx = renderTo; renderAheadIdx < renderAhead; renderAheadIdx++) {\r\n          let index = renderAheadIdx * 8;\r\n          colorData[index + 3] = 1;\r\n          colorData[index + 7] = 1;\r\n        }\r\n\r\n        lastRendered = renderTo;\r\n        lineMesh.updateVerticesData(VertexBuffer.ColorKind, colorData, true);\r\n        if (that.gcodeFilePosition === Number.MAX_VALUE) {\r\n          runComplete = true;\r\n        }\r\n      }\r\n    };\r\n\r\n    this.renderFuncs.push(beforeRenderFunc);\r\n    scene.registerBeforeRender(beforeRenderFunc);\r\n  }\r\n\r\n  renderBlockMode(scene) {\r\n    let that = this;\r\n    let lastUpdate = Date.now();\r\n    let runComplete = false;\r\n    let meshIndex = this.lineMeshIndex;\r\n    this.gcodeLineIndex.push(new Array());\r\n\r\n    var layerHeight = Math.floor((this.currentLayerHeight - this.previousLayerHeight) * 100) / 100;\r\n\r\n    if (this.spreadLines) {\r\n      layerHeight /= this.spreadLineAmount;\r\n    }\r\n\r\n    this.renderMode = 'Mesh Rendering';\r\n    var box = MeshBuilder.CreateBox('box', { width: 1, height: layerHeight, depth: layerHeight * 1.2 }, scene);\r\n\r\n    let l = this.lines;\r\n\r\n    this.gcodeLineIndex.push(new Array());\r\n\r\n    let particleBuilder = function (particle, i, s) {\r\n      l[s].renderLineV3(particle, that.lineVertexAlpha || (that.liveTracking && !that.liveTrackingShowSolid));\r\n      that.gcodeLineIndex[meshIndex].push(particle.props.gcodeLineNumber);\r\n    };\r\n\r\n    let sps = new SolidParticleSystem('gcodemodel' + meshIndex, scene, {\r\n      updatable: true,\r\n      enableMultiMaterial: true,\r\n      useVertexAlpha: true\r\n    });\r\n\r\n    sps.addShape(box, this.lines.length, {\r\n      positionFunction: particleBuilder,\r\n    });\r\n\r\n    sps.buildMesh();\r\n\r\n\r\n    let transparentValue = this.lineVertexAlpha ? this.materialTransparency : 1;\r\n    if (this.liveTracking) {\r\n      transparentValue = this.liveTrackingShowSolid ? transparentValue : 0\r\n    }\r\n\r\n    //Build out solid and transparent material.\r\n    let solidMat = new StandardMaterial('solidMaterial', scene);\r\n    solidMat.specularColor = this.specularColor;\r\n    let transparentMat = new StandardMaterial('transparentMaterial', scene);\r\n    transparentMat.specularColor = this.specularColor;\r\n    transparentMat.alpha = this.liveTrackingShowSolid ? this.materialTransparency : transparentValue;\r\n    transparentMat.needAlphaTesting = () => true;\r\n    transparentMat.separateCullingPass = true;\r\n    transparentMat.backFaceCulling = true;\r\n\r\n    sps.setMultiMaterial([solidMat, transparentMat]);\r\n    sps.setParticles();\r\n    sps.computeSubMeshes();\r\n    sps.mesh.alphaIndex = 0; // this.lineMeshIndex; //meshIndex;\r\n    sps.mesh.isPickable = false;\r\n    sps.mesh.doNotSyncBoundingInfo = true;\r\n\r\n    sps.updateParticle = function (particle) {\r\n      if (that.gcodeLineIndex[meshIndex][particle.idx] < that.gcodeFilePosition) {\r\n        particle.color = that.progressColor;\r\n        particle.materialIndex = 0;\r\n      } else if (that.gcodeLineIndex[meshIndex][particle.idx] < that.gcodeFilePosition + that.lookAheadLength) {\r\n        particle.color = new Color4(particle.color.r, particle.color.g, particle.color.b, 1);\r\n        particle.materialIndex = 0;\r\n      } else {\r\n        particle.color = new Color4(particle.color.r, particle.color.g, particle.color.b, 0);\r\n      }\r\n    };\r\n\r\n    let beforeRenderFunc = function () {\r\n      if (that.liveTracking && !runComplete) {\r\n        if (Date.now() - lastUpdate < that.refreshTime) {\r\n          return;\r\n        } else {\r\n          lastUpdate = Date.now();\r\n          sps.setParticles();\r\n          sps.computeSubMeshes();\r\n        }\r\n        if (that.gcodeFilePosition === Number.MAX_VALUE) {\r\n          runComplete = true;\r\n        }\r\n      }\r\n    };\r\n\r\n    this.renderFuncs.push(beforeRenderFunc);\r\n    scene.registerBeforeRender(beforeRenderFunc);\r\n    this.scene.clearCachedVertexData();\r\n  }\r\n\r\n  renderPointMode(scene) {\r\n    let meshIndex = this.lineMeshIndex;\r\n    this.gcodeLineIndex.push(new Array());\r\n    //point cloud\r\n    this.sps = new PointsCloudSystem('pcs' + meshIndex, 1, scene);\r\n\r\n    let l = this.lines;\r\n\r\n    let particleBuilder = function (particle, i, s) {\r\n      l[s].renderParticle(particle);\r\n    };\r\n\r\n    this.sps.addPoints(this.lines.length, particleBuilder);\r\n\r\n    this.sps.buildMeshAsync().then((mesh) => {\r\n      mesh.material.pointSize = 2;\r\n    });\r\n  }\r\n\r\n  async createScene(scene) {\r\n    if (this.renderVersion === RenderMode.Line) {\r\n      this.renderLineMode(scene);\r\n    } else if (this.renderVersion === RenderMode.Block) {\r\n      this.renderBlockMode(scene);\r\n    } else if (this.renderVersion === RenderMode.Point) {\r\n      this.renderPointMode(scene);\r\n    } else if (this.renderVersion === RenderMode.Voxel) {\r\n      this.voxelRenderer = new VoxelRenderer(scene, this.voxelWidth, this.voxelHeight, this.specularColor, this.loadingProgressCallback, this.renderFuncs, this.tools)\r\n      await this.voxelRenderer.render(this.lines);\r\n    }\r\n    this.lines = [];\r\n\r\n    this.scene.render();\r\n  }\r\n\r\n  createTravelLines(scene) {\r\n    //Travels\r\n    var travelArray = [];\r\n    var travelColorArray = [];\r\n    for (var travelIdx = 0; travelIdx < this.travels.length; travelIdx++) {\r\n      let line = this.travels[travelIdx];\r\n      let data = line.getPoints(scene);\r\n      travelArray.push(data.points);\r\n      travelColorArray.push(data.colors);\r\n    }\r\n    var travelMesh = MeshBuilder.CreateLineSystem(\r\n      'travels',\r\n      {\r\n        lines: travelArray,\r\n        colors: travelColorArray,\r\n        updatable: false,\r\n        useVertexAlpha: false,\r\n      },\r\n      scene\r\n    );\r\n    travelMesh.isVisible = false;\r\n    this.travels = []; //clear out the travel array after creating the mesh\r\n  }\r\n\r\n  updateFilePosition(filePosition) {\r\n    if (this.liveTracking) {\r\n      this.gcodeFilePosition = filePosition - 1;\r\n    } else {\r\n      this.gcodeFilePosition = 0;\r\n      if (this.voxelRenderer) {\r\n        this.voxelRenderer.updateFilePosition(filePosition);\r\n      }\r\n    }\r\n  }\r\n\r\n  doFinalPass() {\r\n    this.liveTracking = true;\r\n    this.gcodeFilePosition = Number.MAX_VALUE;\r\n    setTimeout(() => {\r\n      this.liveTracking = false;\r\n    }, this.refreshTime + 200);\r\n  }\r\n\r\n  updateMesh() {\r\n    if (this.renderVersion === 1) {\r\n      console.log('Version 1');\r\n    } else if (this.renderVersion === 2) {\r\n      console.log('Version 2');\r\n    }\r\n  }\r\n\r\n  unregisterEvents() {\r\n    for (let idx = 0; idx < this.renderFuncs.length; idx++) {\r\n      this.scene.unregisterBeforeRender(this.renderFuncs[idx]);\r\n      delete(this.renderFuncs[idx]);\r\n    }\r\n    this.renderFuncs = [];\r\n  }\r\n\r\n  setLiveTracking(enabled) {\r\n    this.liveTracking = enabled;\r\n  }\r\n\r\n  setColorMode(mode) {\r\n    if (!mode) {\r\n      this.colorMode = ColorMode.Color;\r\n    }\r\n    localStorage.setItem('processorColorMode', mode);\r\n    this.colorMode = mode;\r\n  }\r\n\r\n  updateMinFeedColor(value) {\r\n    localStorage.setItem('minFeedColor', value);\r\n    this.minFeedColorString = value;\r\n    this.minFeedColor = Color4.FromHexString(value.padEnd(9, 'F'));\r\n  }\r\n\r\n  updateMaxFeedColor(value) {\r\n    localStorage.setItem('maxFeedColor', value);\r\n    this.maxFeedColorString = value;\r\n\r\n    this.maxFeedColor = Color4.FromHexString(value.padEnd(9, 'F'));\r\n  }\r\n\r\n  updateColorRate(min, max) {\r\n    localStorage.setItem('minColorRate', min);\r\n    localStorage.setItem('maxColorRate', max);\r\n    this.minColorRate = min;\r\n    this.maxColorRate = max;\r\n  }\r\n\r\n  updateForceWireMode(enabled) {\r\n    this.forceWireMode = enabled;\r\n    localStorage.setItem('forceWireMode', enabled);\r\n  }\r\n\r\n  setLiveTrackingShowSolid(value) {\r\n    this.liveTrackingShowSolid = value;\r\n    localStorage.setItem('showSolid', value);\r\n  }\r\n\r\n  zeros(dimensions) {\r\n    var array = [];\r\n    for (var i = 0; i < dimensions[0]; ++i) {\r\n      array.push(dimensions.length == 1 ? 0 : this.zeros(dimensions.slice(1)));\r\n    }\r\n    return array;\r\n  }\r\n\r\n\r\n\r\n\r\n}","'use strict';\r\n\r\nimport { Color3, Color4 } from '@babylonjs/core/Maths/math.color'\r\nimport { Vector3, Quaternion } from '@babylonjs/core/Maths/math.vector'\r\nimport { Space } from '@babylonjs/core/Maths/math.axis'\r\nimport {StandardMaterial } from '@babylonjs/core/Materials/standardMaterial'\r\nimport { HighlightLayer } from '@babylonjs/core/Layers/highlightLayer'\r\nimport { MeshBuilder} from '@babylonjs/core/Meshes/meshBuilder'\r\n\r\nimport { GridMaterial } from '@babylonjs/materials/grid/gridMaterial';\r\n\r\nexport const RenderBedMode = {\r\n  bed: 0,\r\n  box: 1,\r\n};\r\n\r\nexport default class {\r\n  constructor(scene) {\r\n    this.buildVolume = {\r\n      x: {\r\n        min: 0,\r\n        max: 350,\r\n      },\r\n      y: {\r\n        min: 0,\r\n        max: 350,\r\n      },\r\n      z: {\r\n        min: 0,\r\n        max: 300,\r\n      },\r\n    };\r\n\r\n    var buildVol = localStorage.getItem('buildVolume');\r\n    if (buildVol !== null) {\r\n      this.buildVolume = JSON.parse(buildVol);\r\n    }\r\n\r\n    this.renderMode = Number.parseInt(localStorage.getItem('renderBedMode')); //0 plane 1 cube extents\r\n    if (!this.renderMode) {\r\n      this.renderMode = RenderBedMode.bed;\r\n    }\r\n\r\n    this.bedMesh;\r\n    this.isDelta = false;\r\n    this.scene = scene;\r\n    this.registerClipIgnore = () => {};\r\n    this.bedLineColor = '#0000FF';\r\n\r\n    /*\r\n    this.planeMaterial = new StandardMaterial('planeMaterial', this.scene);\r\n    this.planeMaterial.alpha = 1;\r\n    this.planeMaterial.diffuseColor = new Color3(0.25, 0.25, 0.25);\r\n    this.planeMaterial.specularColor = new Color3(0.1, 0.1, 0.1);\r\n    */\r\n\r\n    if (!this.getBedColor()) {\r\n      this.setBedColor('#0000FF');\r\n    }\r\n\r\n    this.planeMaterial = this.buildGridMaterial();\r\n    this.boxMaterial = new StandardMaterial('bedBoxMaterial', this.scene);\r\n    this.boxMaterial.alpha = 0;\r\n    this.debug = false;\r\n  }\r\n\r\n  setRenderMode(renderBedMode) {\r\n    this.renderMode = renderBedMode;\r\n    localStorage.setItem('renderBedMode', this.renderMode);\r\n    if (this.bedMesh) {\r\n      this.scene.removeMesh(this.bedMesh);\r\n      this.bedMesh.dispose(false, true);\r\n    }\r\n    this.buildBed();\r\n  }\r\n  buildBed() {\r\n    if (this.debug) return;\r\n    if (this.bedMesh && this.bedMesh.isDisposed()) {\r\n      this.bedMesh = null;\r\n    }\r\n    if (this.bedMesh) return this.bedMesh;\r\n\r\n    switch (this.renderMode) {\r\n      case RenderBedMode.bed:\r\n        this.buildFlatBed();\r\n        break;\r\n      case RenderBedMode.box:\r\n        this.buildBox();\r\n        break;\r\n    }\r\n    return this.bedMesh;\r\n  }\r\n  setDelta(isDelta) {\r\n    this.isDelta = isDelta;\r\n    this.setRenderMode(this.renderMode);\r\n  }\r\n  buildFlatBed() {\r\n    let bedCenter = this.getCenter();\r\n    let bedSize = this.getSize();\r\n    if (this.isDelta) {\r\n      let radius = Math.abs(this.buildVolume.x.max - this.buildVolume.x.min) / 2;\r\n      this.bedMesh = MeshBuilder.CreateDisc('BuildPlate', { radius: radius }, this.scene);\r\n      this.bedMesh.rotationQuaternion = new Quaternion.RotationAxis(new Vector3(1, 0, 0), Math.PI / 2);\r\n      this.bedMesh.material = this.planeMaterial;\r\n    } else {\r\n      let width = bedSize.x;\r\n      let depth = bedSize.y;\r\n      this.bedMesh = MeshBuilder.CreatePlane('BuildPlate', { width: width, height: depth }, this.scene);\r\n      this.bedMesh.material = this.planeMaterial;\r\n      this.bedMesh.rotationQuaternion = new Quaternion.RotationAxis(new Vector3(1, 0, 0), Math.PI / 2);\r\n      this.bedMesh.translate(new Vector3(bedCenter.x, 0, bedCenter.y), 1, Space.WORLD);\r\n    }\r\n    this.registerClipIgnore(this.bedMesh);\r\n  }\r\n  getCenter() {\r\n    return {\r\n      x: (this.buildVolume.x.max + this.buildVolume.x.min) / 2,\r\n      y: (this.buildVolume.y.max + this.buildVolume.y.min) / 2,\r\n      z: (this.buildVolume.z.max + this.buildVolume.z.min) / 2,\r\n    };\r\n  }\r\n  getSize() {\r\n    return {\r\n      x: Math.abs(this.buildVolume.x.max - this.buildVolume.x.min),\r\n      y: Math.abs(this.buildVolume.y.max - this.buildVolume.y.min),\r\n      z: Math.abs(this.buildVolume.z.max - this.buildVolume.z.min),\r\n    };\r\n  }\r\n  buildBox() {\r\n    let bedSize = this.getSize();\r\n    let bedCenter = this.getCenter();\r\n    if (this.isDelta) {\r\n      this.bedMesh = MeshBuilder.CreateCylinder(\r\n        'bed',\r\n        {\r\n          diameterTop: bedSize.x,\r\n          diameterBottom: bedSize.x,\r\n          height: bedSize.z,\r\n        },\r\n        this.scene\r\n      );\r\n      this.bedMesh.position.x = bedCenter.x;\r\n      this.bedMesh.position.y = bedCenter.z;\r\n      this.bedMesh.position.z = bedCenter.x;\r\n      this.bedMesh.alpha = 0;\r\n      this.bedMesh.diffuseColor = new Color4(0, 0, 0, 0);\r\n      this.bedMesh.isPickable = false;\r\n      this.bedMesh.enableEdgesRendering(undefined, true);\r\n\r\n      this.bedMesh.renderingGroupId = 2;\r\n      this.scene.setRenderingAutoClearDepthStencil(2, false, false, false);\r\n\r\n      var hl = new HighlightLayer('hl', this.scene, { isStroke: true, blurTextureSizeRatio: 3 });\r\n      hl.addMesh(this.bedMesh,this.getBedColor4());\r\n\r\n      this.bedMesh.onBeforeRenderObservable.add(() => {\r\n        this.scene.getEngine().setColorWrite(false);\r\n      });\r\n\r\n      this.bedMesh.onAfterRenderObservable.add(() => {\r\n        this.scene.getEngine().setColorWrite(true);\r\n      });\r\n\r\n      this.registerClipIgnore(this.bedMesh);\r\n    } else {\r\n      this.bedMesh = MeshBuilder.CreateBox(\r\n        'bed',\r\n        {\r\n          width: bedSize.x,\r\n          depth: bedSize.y,\r\n          height: bedSize.z,\r\n        },\r\n        this.scene\r\n      );\r\n      let center = this.getCenter();\r\n      this.bedMesh.position.x = center.x - this.buildVolume.x.min;\r\n      this.bedMesh.position.y = center.z - this.buildVolume.z.min;\r\n      this.bedMesh.position.z = center.y - this.buildVolume.y.min;\r\n      this.bedMesh.diffuseColor = new Color4(0, 0, 0, 0);\r\n      this.bedMesh.enableEdgesRendering();\r\n      this.bedMesh.edgesWidth = 100;\r\n      this.bedMesh.material = this.boxMaterial;\r\n      this.bedMesh.isPickable = false;\r\n      this.bedMesh.edgesColor = this.getBedColor4();\r\n     \r\n      this.registerClipIgnore(this.bedMesh);\r\n    }\r\n  }\r\n  setVisibility(visibility) {\r\n    if (this.bedMesh) {\r\n      this.bedMesh.setEnabled(visibility);\r\n    }\r\n  }\r\n  commitBedSize() {\r\n    localStorage.setItem('buildVolume', JSON.stringify(this.buildVolume));\r\n    this.setRenderMode(this.renderMode);\r\n  }\r\n  buildGridMaterial() {\r\n    let gridMaterial = new GridMaterial('bedMaterial', this.scene);\r\n    gridMaterial.mainColor = new Color4(0, 0, 0, 0);\r\n    gridMaterial.lineColor = Color3.FromHexString(this.getBedColor());\r\n    gridMaterial.gridRatio = 5;\r\n    gridMaterial.opacity = 0.8;\r\n    gridMaterial.majorUnitFrequency = 10;\r\n    gridMaterial.minorUnitVisibility = 0.6;\r\n    gridMaterial.gridOffset = new Vector3(0, 0, 0);\r\n    return gridMaterial;\r\n  }\r\n  getBedColor() {\r\n    return localStorage.getItem('bedLineColor');\r\n  }\r\n  setBedColor(color) {\r\n    localStorage.setItem('bedLineColor', color);\r\n    if (this.planeMaterial) {\r\n      this.planeMaterial = this.buildGridMaterial();\r\n      this.dispose();\r\n      this.buildBed();\r\n    }\r\n  }\r\n  getBedColor4(){\r\n   return Color4.FromHexString(this.getBedColor().padEnd(9,'F'));\r\n  }\r\n  dispose() {\r\n    this.bedMesh.dispose(false, true);\r\n  }\r\n}\r\n","'use strict';\r\n\r\nimport * as d3 from 'd3';\r\n\r\nimport { Vector3 } from '@babylonjs/core/Maths/math.vector'\r\nimport { Color3, Color4 } from '@babylonjs/core/Maths/math.color'\r\nimport { Texture } from '@babylonjs/core/Materials/Textures/texture'\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh'\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder'\r\nimport { StandardMaterial } from '@babylonjs/core/Materials/standardMaterial'\r\nimport { PointerEventTypes } from '@babylonjs/core/Events/pointerEvents'\r\n\r\n\r\nexport default class {\r\n  constructor(scene) {\r\n    this.scene = scene;\r\n    this.checkerBoard = 'iVBORw0KGgoAAAANSUhEUgAAAQEAAAEBCAIAAAD3joeqAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAALnSURBVHhe7dZBEYQwFAVBWBtogAv+IhIEsZd4yGG6L/lPwFRl31jqPM/neeZghd98oUoD1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjTAHUaoE4D1GmAOg1QpwHqNECdBqjb7/ueJyscxzHGmIMV9u/75skK7/te1zUHK/gLUacB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA9RpgDoNUKcB6jRAnQao0wB1GqBOA7Rt2x+drw1hSNi5LQAAAABJRU5ErkJggg==';\r\n    this.xmark = 'data:image/png;base64,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';\r\n    this.buildObjectMeshes = new Array();\r\n    this.labels = new Array();\r\n    this.labelSVGS = new Array();\r\n    this.baseMaterial;\r\n    this.highlightMaterial;\r\n    this.cancelledMaterial;\r\n    this.cancelledHighlightMaterial;\r\n    this.showCancelObjects = false;\r\n    this.objectCallback;\r\n    this.renderFailedCallback;\r\n    this.labelCallback;\r\n    this.registerClipIgnore;\r\n    this.getMaxHeight;\r\n    this.alphaLevel = 0.5;\r\n\r\n    this.observableControls = null;\r\n\r\n    this.showLabel = localStorage.getItem('showObjectLabels');\r\n    if (this.showLabel === null) {\r\n      this.showLabel = true;\r\n    } else {\r\n      this.showLabel = JSON.parse(this.showLabel);\r\n    }\r\n\r\n    this.rebuildMaterials();\r\n  }\r\n\r\n  setBuildMaterial(name, color, alpha) {\r\n    if (!alpha) {\r\n      alpha = this.alphaLevel;\r\n    }\r\n\r\n    let material = new StandardMaterial(name, this.scene);\r\n    material.diffuseColor = color;\r\n    material.specularColor = new Color3(0.0, 0.0, 0.0);\r\n    material.alpha = alpha;\r\n    material.needAlphaTesting = () => true;\r\n    material.separateCullingPass = true;\r\n    material.backFaceCulling = true;\r\n    return material;\r\n  }\r\n  rebuildMaterials() {\r\n    this.baseMaterial = this.setBuildMaterial('BuildObjectBaseMaterial', new Color4(0.1, 0.5, 0.1), 0.25);\r\n    this.highlightMaterial = this.setBuildMaterial('BuildObjectHighlightMateria', new Color3(0.8, 0.8, 0.8));\r\n    this.cancelledMaterial = this.setBuildMaterial('BuildObjectHighlightMateria', new Color3(1, 0, 0), 0.4);\r\n    this.cancelledHighlightMaterial = this.setBuildMaterial('BuildObjectHighlightMateria', new Color3(1, 1, 0), 0.6);\r\n    let material = new Texture.CreateFromBase64String(this.xmark, 'checkerboard', this.scene);\r\n    this.cancelledMaterial.diffuseTexture = material;\r\n    this.cancelledHighlightMaterial.diffuseTexture = material;\r\n  }\r\n  loadObjectBoundaries(boundaryObjects) {\r\n    this.rebuildMaterials();\r\n    if (this.buildObjectMeshes.length > 0) {\r\n      for (let i = 0; i < this.buildObjectMeshes.length; i++) {\r\n        this.buildObjectMeshes[i].dispose();\r\n      }\r\n      this.labelSVGS.forEach((label) => window.URL.revokeObjectURL(label));\r\n      this.buildObjectMeshes = new Array();\r\n      this.labels = new Array();\r\n    }\r\n\r\n    if (!boundaryObjects) {\r\n      return;\r\n    }\r\n\r\n    for (let cancelObjectIdx = 0; cancelObjectIdx < boundaryObjects.length; cancelObjectIdx++) {\r\n      let cancelObject = boundaryObjects[cancelObjectIdx];\r\n\r\n      let buildObject = MeshBuilder.CreateTiledBox(\r\n        'OBJECTMESH:' + cancelObject.name,\r\n        {\r\n          pattern: Mesh.CAP_ALL,\r\n          alignVertical: Mesh.TOP,\r\n          alignHorizontal: Mesh.LEFT,\r\n          tileHeight: 4,\r\n          tileWidth: 4,\r\n          width: Math.abs(cancelObject.x[1] - cancelObject.x[0]),\r\n          height: this.getMaxHeight() + 10,\r\n          depth: Math.abs(cancelObject.y[1] - cancelObject.y[0]),\r\n          sideOrientation: Mesh.FRONTSIDE,\r\n        },\r\n        this.scene\r\n      );\r\n\r\n      buildObject.position.x = (cancelObject.x[1] + cancelObject.x[0]) / 2;\r\n      buildObject.position.y = this.getMaxHeight() / 2 - 4;\r\n      buildObject.position.z = (cancelObject.y[1] + cancelObject.y[0]) / 2;\r\n      buildObject.alphaIndex = 5000000;\r\n      cancelObject.index = cancelObjectIdx;\r\n      buildObject.metadata = cancelObject;\r\n      buildObject.enablePointerMoveEvents = true;\r\n      buildObject.renderingGroupId = 3;\r\n      this.setObjectTexture(buildObject);\r\n      buildObject.setEnabled(this.showCancelObjects);\r\n      this.registerClipIgnore(buildObject);\r\n      this.buildObjectMeshes.push(buildObject);\r\n\r\n      //generate a label\r\n\r\n      var textPlane = this.makeTextPlane(cancelObject.name, cancelObject.cancelled ? 'yellow' : 'white', 20);\r\n      textPlane.position = new Vector3(0, this.getMaxHeight() / 2 + 10, 0);\r\n      textPlane.isPickable = false;\r\n      textPlane.metadata = cancelObject;\r\n      textPlane.parent = buildObject;\r\n      textPlane.setEnabled(this.showLabel);\r\n      this.labels.push(textPlane);\r\n    }\r\n  }\r\n  makeTextPlane(text, color, size) {\r\n    /*\r\n    var dynamicTexture = new DynamicTexture('DynamicTexture', { width: text.length * 20, height: 200 }, this.scene, true);\r\n    dynamicTexture.hasAlpha = true;\r\n    dynamicTexture.drawText(text, null, null, 'bold 24px Roboto', color, 'transparent', true);*/\r\n    var svg = d3\r\n      .create('svg')\r\n      .attr('width', 800)\r\n      .attr('height', 200)\r\n      .attr('fill', 'none');\r\n\r\n    svg\r\n      .append('text')\r\n      .attr('x', 400)\r\n      .attr('y', 100)\r\n      .attr('font-family', 'Verdana')\r\n      .attr('font-size', '50px')\r\n      .attr('text-anchor', 'middle')\r\n      .attr('alignment-baseline', 'middle')\r\n      .attr('fill', 'black')\r\n      .attr('stroke', color)\r\n      .attr('stroke-width', 2)\r\n      .attr('text-rendering', 'optimizeLegibility')\r\n      .text(text);\r\n\r\n    var html = svg\r\n      .attr('title', 'test2')\r\n      .attr('version', 1.1)\r\n      .attr('xmlns', 'http://www.w3.org/2000/svg')\r\n      .node(); //.parentNode.innerHTML;\r\n\r\n    var doctype = '<?xml version=\"1.0\" standalone=\"no\"?>' + '<!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\">';\r\n\r\n    var source = new XMLSerializer().serializeToString(html);\r\n    var blob = new Blob([doctype + source], { type: 'image/svg+xml' });\r\n    var url = window.URL.createObjectURL(blob);\r\n    this.labelSVGS.push(url);\r\n\r\n    let plane = MeshBuilder.CreatePlane('TextPlane', { width: size, height: 8 }, this.scene);\r\n    plane.material = new StandardMaterial('TextPlaneMaterial', this.scene);\r\n    plane.material.backFaceCulling = false;\r\n    plane.material.specularColor = new Color3(0, 0, 0);\r\n    plane.material.diffuseTexture = new Texture(url, this.scene); //dynamicTexture;\r\n    plane.material.diffuseTexture.hasAlpha = true;\r\n    plane.billboardMode = 7;\r\n    this.registerClipIgnore(plane);\r\n    return plane;\r\n  }\r\n\r\n  buildObservables() {\r\n    if (this.observableControls) {\r\n      return;\r\n    }\r\n\r\n    let hitTestTimer  =0;\r\n    let mouseDown  = false;\r\n    let cancelHitTimer = 0;\r\n    \r\n    this.observableControls = this.scene.onPointerObservable.add((pointerInfo) => {\r\n      \r\n      \r\n      let pickInfo = pointerInfo.pickInfo;\r\n      switch (pointerInfo.type) {\r\n        case PointerEventTypes.POINTERDOWN:\r\n          {\r\n            mouseDown = true;\r\n            cancelHitTimer = Date.now();\r\n          }\r\n          break;\r\n        case PointerEventTypes.POINTERUP:\r\n          {\r\n            mouseDown = false;\r\n            if (Date.now() - cancelHitTimer > 200) {\r\n              return;\r\n            }\r\n            this.handleClick(pickInfo);\r\n          }\r\n          break;\r\n        case PointerEventTypes.POINTERMOVE: {\r\n          if(mouseDown || Date.now() - hitTestTimer < 100) return;\r\n          hitTestTimer = Date.now();\r\n          this.handlePointerMove(pickInfo);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  clearObservables() {\r\n    if (this.observableControls) {\r\n      this.scene.onPointerObservable.remove(this.observableControls);\r\n      this.observableControls = null;\r\n    }\r\n  }\r\n\r\n  showObjectSelection(visible) {\r\n    this.showCancelObjects = visible;\r\n    this.buildObjectMeshes.forEach((mesh) => mesh.setEnabled(visible));\r\n\r\n    if (visible) {\r\n      this.buildObservables();\r\n    } else {\r\n      this.clearObservables();\r\n    }\r\n  }\r\n  setObjectTexture(mesh) {\r\n    if (mesh.metadata.cancelled) {\r\n      mesh.material = this.cancelledMaterial;\r\n      mesh.enableEdgesRendering();\r\n      mesh.edgesWidth = 15.0;\r\n      mesh.edgesColor = new Color4(1, 0, 0, 1);\r\n    } else {\r\n      mesh.material = this.baseMaterial;\r\n      mesh.enableEdgesRendering();\r\n      mesh.edgesWidth = 15.0;\r\n      mesh.edgesColor = new Color4(0, 1, 0, 1);\r\n    }\r\n  }\r\n  handleClick(pickInfo) {\r\n    if (!this.showCancelObjects) return;\r\n    if (pickInfo.hit && pickInfo.pickedMesh && pickInfo.pickedMesh.name.includes('OBJECTMESH') && this.objectCallback) {\r\n      this.objectCallback(pickInfo.pickedMesh.metadata);\r\n    }\r\n  }\r\n  handlePointerMove(pickInfo) {\r\n    if (!this.showCancelObjects) return;\r\n    this.buildObjectMeshes.forEach((mesh) => this.setObjectTexture(mesh));\r\n    if (pickInfo.hit && pickInfo.pickedMesh && pickInfo.pickedMesh.name.includes('OBJECTMESH')) {\r\n      pickInfo.pickedMesh.material = pickInfo.pickedMesh.metadata.cancelled ? this.cancelledHighlightMaterial : this.highlightMaterial;\r\n      if (this.labelCallback) {\r\n        this.labelCallback(pickInfo.pickedMesh.metadata.name);\r\n      }\r\n    } else {\r\n      if (this.labelCallback) {\r\n        this.labelCallback('');\r\n      }\r\n    }\r\n  }\r\n  showLabels(visible) {\r\n    localStorage.setItem('showObjectLabels', visible);\r\n    this.showLabel = visible;\r\n    this.labels.forEach((label) => label.setEnabled(visible));\r\n  }\r\n}\r\n","'use strict';\r\n\r\nimport { DynamicTexture } from '@babylonjs/core/Materials/Textures/dynamicTexture'\r\nimport { StandardMaterial } from '@babylonjs/core/Materials/standardMaterial'\r\nimport { Mesh } from '@babylonjs/core/Meshes/mesh'\r\nimport { Color3 } from '@babylonjs/core/Maths/math.color'\r\nimport { Vector3 } from '@babylonjs/core/Maths/math.vector'\r\n\r\n\r\nexport default class {\r\n  constructor(scene) {\r\n    this.visible = localStorage.getItem('axesVisible');\r\n    if (this.visible === null) {\r\n      this.visible = true;\r\n    } else {\r\n      this.visible = JSON.parse(this.visible);\r\n    }\r\n\r\n    this.scene = scene;\r\n    this.registerClipIgnore = () => {};\r\n    this.axesMesh;\r\n    this.size = 50;\r\n    this.debug = false;\r\n  }\r\n\r\n  show(visible) {\r\n    localStorage.setItem('axesVisible', visible);\r\n    if (this.axesMesh) {\r\n      this.axesMesh.setEnabled(visible);\r\n    }\r\n  }\r\n\r\n  makeTextPlane(text, color, size) {\r\n    var dynamicTexture = new DynamicTexture('DynamicTexture', 50, this.scene, true);\r\n    dynamicTexture.hasAlpha = true;\r\n    dynamicTexture.drawText(text, 5, 40, 'bold 36px Arial', color, 'transparent', true);\r\n    var plane = Mesh.CreatePlane('TextPlane', size, this.scene, true);\r\n    plane.material = new StandardMaterial('TextPlaneMaterial', this.scene);\r\n    plane.material.backFaceCulling = false;\r\n    plane.material.specularColor = new Color3(0, 0, 0);\r\n    plane.material.diffuseTexture = dynamicTexture;\r\n    return plane;\r\n  }\r\n\r\n  resize(size) {\r\n    this.size = size;\r\n    this.axesMesh.dispose(false, true);\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    if (this.debug) return;\r\n    if (this.axesMesh && !this.axesMesh.isDisposed()) {\r\n      return;\r\n    }\r\n\r\n    this.axesMesh = new Mesh('axis');\r\n    this.registerClipIgnore(this.axesMesh);\r\n\r\n    var axisX = Mesh.CreateLines('axisX', [Vector3.Zero(), new Vector3(this.size, 0, 0), new Vector3(this.size * 0.95, 0.05 * this.size, 0), new Vector3(this.size, 0, 0), new Vector3(this.size * 0.95, -0.05 * this.size, 0)], this.scene);\r\n    axisX.color = new Color3(1, 0, 0);\r\n    axisX.parent = this.axesMesh;\r\n        var xChar = this.makeTextPlane('X', 'red', this.size / 10);\r\n    xChar.position = new Vector3(0.9 * this.size, 0.05 * this.size, 0);\r\n    xChar.parent = this.axesMesh;\r\n\r\n    var axisZ = Mesh.CreateLines('axisY', [Vector3.Zero(), new Vector3(0, this.size, 0), new Vector3(-0.05 * this.size, this.size * 0.95, 0), new Vector3(0, this.size, 0), new Vector3(0.05 * this.size, this.size * 0.95, 0)], this.scene);\r\n    axisZ.color = new Color3(0, 0, 1);\r\n    axisZ.parent = this.axesMesh;\r\n    var zChar = this.makeTextPlane('Z', 'blue', this.size / 10);\r\n    zChar.position = new Vector3(0, 0.9 * this.size, -0.05 * this.size);\r\n    zChar.parent = this.axesMesh;\r\n\r\n    var axisY = Mesh.CreateLines('axisZ', [Vector3.Zero(), new Vector3(0, 0, this.size), new Vector3(0, -0.05 * this.size, this.size * 0.95), new Vector3(0, 0, this.size), new Vector3(0, 0.05 * this.size, this.size * 0.95)], this.scene);\r\n    axisY.color = new Color3(0, 1, 0);\r\n    axisY.parent = this.axesMesh;\r\n    var yChar = this.makeTextPlane('Y', 'green', this.size / 10);\r\n    yChar.position = new Vector3(0, 0.05 * this.size, 0.9 * this.size);\r\n    yChar.parent = this.axesMesh;\r\n\r\n    this.axesMesh.setEnabled(this.visible);\r\n    this.axesMesh.getChildren().forEach((mesh) => this.registerClipIgnore(mesh));\r\n  }\r\n}\r\n","'use strict';\r\n\r\nimport { Engine } from '@babylonjs/core/Engines/engine'\r\nimport { Scene } from \"@babylonjs/core/scene\"\r\nimport { Plane } from '@babylonjs/core/Maths/math.plane'\r\nimport { Color3 } from '@babylonjs/core/Maths/math.color'\r\nimport { Vector3 } from '@babylonjs/core/Maths/math.vector'\r\nimport { Space } from '@babylonjs/core/Maths/math.axis'\r\nimport { MeshBuilder } from '@babylonjs/core/Meshes/meshBuilder'\r\nimport { TransformNode } from '@babylonjs/core/Meshes/transformNode'\r\nimport '@babylonjs/core/Rendering/edgesRenderer'\r\nimport { ArcRotateCamera } from '@babylonjs/core/Cameras/arcRotateCamera'\r\nimport { PointLight } from '@babylonjs/core/Lights/pointLight'\r\nimport { Axis } from '@babylonjs/core/Maths/math.axis'\r\n\r\n\r\nimport '@babylonjs/core/Debug/debugLayer'\r\nimport '@babylonjs/inspector'\r\n\r\nimport gcodeProcessor from './gcodeprocessor.js';\r\nimport Bed from './bed.js';\r\nimport BuildObjects from './buildobjects.js';\r\nimport Axes from './axes.js';\r\n\r\n\r\nexport default class {\r\n  constructor(canvas) {\r\n    this.lastLoadKey = 'lastLoadFailed';\r\n    this.fileData;\r\n    this.fileSize = 0;\r\n    this.gcodeProcessor = new gcodeProcessor();\r\n    this.maxHeight = 0;\r\n    this.minHeight = 0;\r\n    this.sceneBackgroundColor = '#000000';\r\n    this.canvas = canvas;\r\n    this.scene = {};\r\n    this.loading = false;\r\n    this.toolVisible = false;\r\n    this.toolCursor;\r\n    this.toolCursorMesh;\r\n    this.toolCursorVisible = true;\r\n    this.travelVisible = false;\r\n    this.debug = false;\r\n    this.zTopClipValue;\r\n    this.zBottomClipValue;\r\n    this.cancelHitTimer = 0;\r\n    this.pause = false;\r\n\r\n\r\n    this.cameraInertia = localStorage.getItem('cameraInertia') === 'true';\r\n\r\n    //objects\r\n    this.bed;\r\n    this.buildObjects;\r\n    this.axes;\r\n\r\n    this.renderQuality = Number(localStorage.getItem('renderQuality'));\r\n    if (this.renderQuality === undefined || this.renderQuality === null) {\r\n      this.renderQuality = 1;\r\n    }\r\n\r\n    this.hasCacheSupport = false;\r\n    /*if (this.hasCacheSupport) {\r\n      window.caches\r\n        .open('gcode-viewer')\r\n        .then(() => {\r\n          console.info('Cache support enabled');\r\n        })\r\n        .catch(() => {\r\n          //Chrome and safari hide caches when not available. Firefox exposes it regardless so we have to force a fail to see if it is supported\r\n          this.hasCacheSupport = false;\r\n        });\r\n    }*/\r\n  }\r\n  getMaxHeight() {\r\n    return this.maxHeight;\r\n  }\r\n  getMinHeight() {\r\n    return this.minHeight;\r\n  }\r\n\r\n  setCameraType(arcRotate) {\r\n    if (arcRotate) {\r\n      this.scene.activeCamera = this.orbitCamera;\r\n    } else {\r\n      this.scene.activeCamera = this.flyCamera;\r\n    }\r\n  }\r\n  setZClipPlane(top, bottom) {\r\n    this.zTopClipValue = -top;\r\n    this.zBottomClipValue = bottom;\r\n    if (bottom > top) {\r\n      this.zTopClipValue = bottom + 1;\r\n    }\r\n    this.scene.clipPlane = new Plane(0, 1, 0, this.zTopClipValue);\r\n    this.scene.clipPlane2 = new Plane(0, -1, 0, this.zBottomClipValue);\r\n  }\r\n  init() {\r\n    this.engine = new Engine(this.canvas, true, { doNotHandleContextLost: true });\r\n    this.engine.enableOfflineSupport = false;\r\n    this.scene = new Scene(this.engine);\r\n    if (this.debug) {\r\n      this.scene.debugLayer.show({ embedMode: true });\r\n    }\r\n    this.scene.clearColor = Color3.FromHexString(this.getBackgroundColor());\r\n\r\n    this.bed = new Bed(this.scene);\r\n    this.bed.registerClipIgnore = (mesh) => {\r\n      this.registerClipIgnore(mesh);\r\n    };\r\n    var bedCenter = this.bed.getCenter();\r\n\r\n    // Add a camera to the scene and attach it to the canvas\r\n    this.orbitCamera = new ArcRotateCamera('Camera', Math.PI / 2, 2.356194, 250, new Vector3(bedCenter.x, -2, bedCenter.y), this.scene);\r\n    this.orbitCamera.invertRotation = false;\r\n    this.orbitCamera.attachControl(this.canvas, false);\r\n    this.orbitCamera.maxZ = 100000;\r\n    this.updateCameraInertiaProperties()\r\n    //    this.orbitCamera.wheelDeltaPercentage = 0.02;\r\n    //    this.orbitCamera.pinchDeltaPercentage = 0.02;\r\n    //Disabled at the moment\r\n    //this.flyCamera = new UniversalCamera('UniversalCamera', new Vector3(0, 0, -10), this.scene);\r\n\r\n    // Add lights to the scene\r\n\r\n    //var light1 = new HemisphericLight(\"light1\", new Vector3(1, 1, 0), this.scene);\r\n    var light2 = new PointLight('light2', new Vector3(0, 1, -1), this.scene);\r\n    light2.diffuse = new Color3(1, 1, 1);\r\n    light2.specular = new Color3(1, 1, 1);\r\n    var that = this;\r\n    this.engine.runRenderLoop(function () {\r\n\r\n      if (that.pause) {\r\n        return;\r\n      }\r\n      that.scene.render();\r\n      //Update light 2 position\r\n      light2.position = that.scene.cameras[0].position;\r\n\r\n    });\r\n\r\n    this.buildObjects = new BuildObjects(this.scene);\r\n    this.buildObjects.getMaxHeight = () => {\r\n      return this.gcodeProcessor.getMaxHeight();\r\n    };\r\n    this.buildObjects.registerClipIgnore = (mesh) => {\r\n      this.registerClipIgnore(mesh);\r\n    };\r\n    this.bed.buildBed();\r\n\r\n    this.axes = new Axes(this.scene);\r\n    this.axes.registerClipIgnore = (mesh) => {\r\n      this.registerClipIgnore(mesh);\r\n    };\r\n    this.axes.render(50);\r\n\r\n    this.resetCamera();\r\n  }\r\n\r\n  resize() {\r\n    this.engine.resize();\r\n  }\r\n\r\n  refreshUI() {\r\n    setTimeout(function () { }, 0);\r\n  }\r\n\r\n  setFileName(path) {\r\n    if (this.hasCacheSupport) {\r\n      window.caches.open('gcode-viewer').then(function (cache) {\r\n        var pathData = new Blob([path], { type: 'text/plain' });\r\n        cache.put('gcodeFileName', new Response(pathData));\r\n      });\r\n    }\r\n  }\r\n\r\n  getFileName() {\r\n    if (this.hasCacheSupport) {\r\n      window.caches.open('gcode-viewer').then(function (cache) {\r\n        cache.match('gcodeData').then(function (response) {\r\n          response.text().then(function (text) {\r\n            return text;\r\n          });\r\n        });\r\n      });\r\n    } else {\r\n      return '';\r\n    }\r\n  }\r\n\r\n  resetCamera() {\r\n    var bedCenter = this.bed.getCenter();\r\n    var bedSize = this.bed.getSize();\r\n    (this.scene.activeCamera.alpha = Math.PI / 2), (this.scene.activeCamera.beta = 2.356194);\r\n    if (this.bed.isDelta) {\r\n      this.scene.activeCamera.radius = bedCenter.x;\r\n      this.scene.activeCamera.target = new Vector3(bedCenter.x, -2, bedCenter.y);\r\n      this.scene.activeCamera.position = new Vector3(-bedSize.x, bedSize.z, -bedSize.x);\r\n    } else {\r\n      this.scene.activeCamera.radius = 250;\r\n      this.scene.activeCamera.target = new Vector3(bedCenter.x, -2, bedCenter.y);\r\n      this.scene.activeCamera.position = new Vector3(-bedSize.x / 2, bedSize.z, -bedSize.y / 2);\r\n    }\r\n  }\r\n\r\n  lastLoadFailed() {\r\n    if (!localStorage) return false;\r\n    return localStorage.getItem(this.lastLoadKey) === 'true';\r\n  }\r\n  setLoadFlag() {\r\n    if (localStorage) {\r\n      localStorage.setItem(this.lastLoadKey, 'true');\r\n    }\r\n  }\r\n\r\n  clearLoadFlag() {\r\n    if (localStorage) {\r\n      localStorage.setItem(this.lastLoadKey, '');\r\n      localStorage.removeItem(this.lastLoadKey);\r\n    }\r\n  }\r\n\r\n  async processFile(fileContents) {\r\n    this.clearScene();\r\n    this.refreshUI();\r\n\r\n    let that = this;\r\n    if (this.hasCacheSupport) {\r\n      window.caches.open('gcode-viewer').then(function (cache) {\r\n        var gcodeData = new Blob([fileContents], { type: 'text/plain' });\r\n        cache.put('gcodeData', new Response(gcodeData));\r\n      });\r\n    }\r\n\r\n    this.fileData = fileContents;\r\n    this.fileSize = fileContents.length;\r\n    this.gcodeProcessor.setProgressColor(this.getProgressColor());\r\n    this.gcodeProcessor.scene = this.scene;\r\n\r\n    if (this.lastLoadFailed()) {\r\n      console.error('Last rendering failed dropping to SBC quality');\r\n      this.updateRenderQuality(1);\r\n      this.clearLoadFlag();\r\n    }\r\n    this.setLoadFlag();\r\n    await this.gcodeProcessor.processGcodeFile(fileContents, this.renderQuality, function () {\r\n      if (that.hasCacheSupport) {\r\n        that.fileData = ''; //free resourcs sooner\r\n      }\r\n    });\r\n    this.clearLoadFlag();\r\n\r\n    await this.gcodeProcessor.createScene(this.scene);\r\n    this.maxHeight = this.gcodeProcessor.getMaxHeight();\r\n    this.minHeight = this.gcodeProcessor.getMinHeight();\r\n    this.toggleTravels(this.travelVisible);\r\n    this.setCursorVisiblity(this.toolCursorVisible);\r\n  }\r\n\r\n  toggleTravels(visible) {\r\n    var mesh = this.scene.getMeshByName('travels');\r\n    if (mesh !== undefined) {\r\n      try {\r\n        mesh.isVisible = visible;\r\n        this.travelVisible = visible;\r\n      } catch {\r\n        //console.log('Travel Mesh Error');\r\n      }\r\n    }\r\n  }\r\n  getExtruderColors() {\r\n    let colors = localStorage.getItem('extruderColors');\r\n    if (colors === null) {\r\n      colors = ['#00FFFF', '#FF00FF', '#FFFF00', '#000000', '#FFFFFF'];\r\n      this.saveExtruderColors(colors);\r\n    } else {\r\n      colors = colors.split(',');\r\n    }\r\n    return colors;\r\n  }\r\n  saveExtruderColors(colors) {\r\n    localStorage.setItem('extruderColors', colors);\r\n  }\r\n  resetExtruderColors() {\r\n    localStorage.removeItem('extruderColors');\r\n    this.getExtruderColors();\r\n  }\r\n  getProgressColor() {\r\n    let progressColor = localStorage.getItem('progressColor');\r\n    if (progressColor === null) {\r\n      progressColor = '#FFFFFF';\r\n    }\r\n    return progressColor;\r\n  }\r\n  setProgressColor(value) {\r\n    localStorage.setItem('progressColor', value);\r\n    this.gcodeProcessor.setProgressColor(value);\r\n  }\r\n\r\n  getBackgroundColor() {\r\n    let color = localStorage.getItem('sceneBackgroundColor');\r\n    if (color === null) {\r\n      color = '#000000';\r\n    }\r\n    return color;\r\n  }\r\n  setBackgroundColor(color) {\r\n    if (this.scene !== null && this.scene !== undefined) {\r\n      if (color.length > 7) {\r\n        color = color.substring(0, 7);\r\n      }\r\n      this.scene.clearColor = Color3.FromHexString(color);\r\n    }\r\n    localStorage.setItem('sceneBackgroundColor', color);\r\n  }\r\n  clearScene(clearFileData) {\r\n    if (this.fileData && clearFileData) {\r\n      this.fileData = '';\r\n    }\r\n    this.gcodeProcessor.unregisterEvents();\r\n\r\n    for (let idx = this.scene.meshes.length - 1; idx >= 0; idx--) {\r\n      let sceneEntity = this.scene.meshes[idx];\r\n      if (sceneEntity && this.debug) {\r\n        console.log(`Disposing ${sceneEntity.name}`);\r\n      }\r\n      this.scene.removeMesh(sceneEntity);\r\n      if (sceneEntity && typeof sceneEntity.dispose === 'function') {\r\n        sceneEntity.dispose(false, true);\r\n      }\r\n    }\r\n\r\n    for (let idx = this.scene.materials.length - 1; idx >= 0; idx--) {\r\n      let sceneEntity = this.scene.materials[idx];\r\n      if (sceneEntity.name !== 'solidMaterial') continue;\r\n      if (sceneEntity && this.debug) {\r\n        console.log(`Disposing ${sceneEntity.name}`);\r\n      }\r\n      this.scene.removeMaterial(sceneEntity);\r\n      if (sceneEntity && typeof sceneEntity.dispose === 'function') {\r\n        sceneEntity.dispose(false, true);\r\n      }\r\n    }\r\n\r\n    if (this.toolCursor) {\r\n      this.toolCursor.dispose(false, true);\r\n      this.toolCursor = undefined;\r\n    }\r\n\r\n    this.buildtoolCursor();\r\n    this.bed.buildBed();\r\n    this.axes.render();\r\n  }\r\n  reload() {\r\n    return new Promise((resolve) => {\r\n      this.clearScene();\r\n\r\n      if (this.hasCacheSupport) {\r\n        let that = this;\r\n        window.caches.open('gcode-viewer').then(function (cache) {\r\n          cache.match('gcodeData').then(function (response) {\r\n            response.text().then(function (text) {\r\n              that.processFile(text).then(() => {\r\n                resolve();\r\n              });\r\n            });\r\n          });\r\n        });\r\n      } else {\r\n        this.processFile(this.fileData).then(() => {\r\n          resolve();\r\n        });\r\n      }\r\n    });\r\n  }\r\n  getRenderMode() {\r\n    return this.gcodeProcessor.renderMode;\r\n  }\r\n  setCursorVisiblity(visible) {\r\n    if (this.scene === undefined) return;\r\n    if (this.toolCursor === undefined) {\r\n      this.buildtoolCursor();\r\n    }\r\n    this.toolCursorMesh.isVisible = visible;\r\n    this.toolCursorVisible = visible;\r\n  }\r\n  updateToolPosition(position) {\r\n    let x = 0;\r\n    let y = 0;\r\n    let z = 0;\r\n    this.buildtoolCursor();\r\n    for (var index = 0; index < position.length; index++) {\r\n      switch (position[index].axes) {\r\n        case 'X':\r\n          {\r\n            x = position[index].position;\r\n          }\r\n          break;\r\n        case 'Y':\r\n          {\r\n            y = position[index].position;\r\n          }\r\n          break;\r\n        case 'Z':\r\n          {\r\n            z = position[index].position * (this.gcodeProcessor.spreadLines ? this.gcodeProcessor.spreadLineAmount : 1);\r\n          }\r\n          break;\r\n      }\r\n\r\n      this.toolCursor.setAbsolutePosition(new Vector3(x, z, y));\r\n    }\r\n  }\r\n  buildtoolCursor() {\r\n    if (this.toolCursor !== undefined) return;\r\n    this.toolCursor = new TransformNode('toolCursorContainer');\r\n    this.toolCursorMesh = MeshBuilder.CreateCylinder('toolCursorMesh', { diameterTop: 0, diameterBottom: 1 }, this.scene);\r\n    this.toolCursorMesh.parent = this.toolCursor;\r\n    this.toolCursorMesh.position = new Vector3(0, 3, 0);\r\n    this.toolCursorMesh.rotate(Axis.X, Math.PI, Space.LOCAL);\r\n    this.toolCursorMesh.scaling = new Vector3(3, 3, 3);\r\n    this.toolCursorMesh.isVisible = this.toolCursorVisible;\r\n    this.registerClipIgnore(this.toolCursorMesh);\r\n  }\r\n  updateRenderQuality(renderQuality) {\r\n    this.renderQuality = renderQuality;\r\n    if (localStorage) {\r\n      localStorage.setItem('renderQuality', renderQuality);\r\n    }\r\n  }\r\n  registerClipIgnore(mesh) {\r\n    if (mesh === undefined || mesh === null) return;\r\n    mesh.onBeforeRenderObservable.add(() => {\r\n      this.scene.clipPlane = null;\r\n      this.scene.clipPlane2 = null;\r\n    });\r\n    mesh.onAfterRenderObservable.add(() => {\r\n      this.scene.clipPlane = new Plane(0, 1, 0, this.zTopClipValue);\r\n      this.scene.clipPlane2 = new Plane(0, -1, 0, this.zBottomClipValue);\r\n    });\r\n  }\r\n  updateCameraInertiaProperties() {\r\n\r\n    if (this.cameraInertia) {\r\n      this.orbitCamera.speed = 2;\r\n      this.orbitCamera.inertia = 0.9;\r\n      this.orbitCamera.panningInertia = 0.9;\r\n      this.orbitCamera.inputs.attached.keyboard.angularSpeed = 0.005;\r\n      this.orbitCamera.inputs.attached.keyboard.zoomingSensibility = 2;\r\n      this.orbitCamera.inputs.attached.keyboard.panningSensibility = 2;\r\n      this.orbitCamera.angularSensibilityX = 1000;\r\n      this.orbitCamera.angularSensibilityY = 1000;\r\n      this.orbitCamera.panningSensibility = 10;\r\n      this.orbitCamera.wheelPrecision  = 1;\r\n      \r\n    }\r\n    else {\r\n      this.orbitCamera.speed = 500;\r\n      this.orbitCamera.inertia = 0;\r\n      this.orbitCamera.panningInertia = 0;\r\n      this.orbitCamera.inputs.attached.keyboard.angularSpeed = 0.05;\r\n      this.orbitCamera.inputs.attached.keyboard.zoomingSensibility =0.5;\r\n      this.orbitCamera.inputs.attached.keyboard.panningSensibility = 0.5;\r\n      this.orbitCamera.angularSensibilityX = 200;\r\n      this.orbitCamera.angularSensibilityY = 200;\r\n      this.orbitCamera.panningSensibility = 2;\r\n      this.orbitCamera.wheelPrecision = 0.25;\r\n    }\r\n\r\n  }\r\n  setCameraInertia(enabled) {\r\n    this.cameraInertia = enabled;\r\n    localStorage.setItem('cameraInertia', enabled);\r\n    this.updateCameraInertiaProperties()\r\n  }\r\n}\r\n","<style scoped>\r\n.small-font-note {\r\n\tfont-size: xx-small;\r\n}\r\n\r\n.canvas-size {\r\n\tposition: absolute;\r\n\ttop: 0;\r\n\tleft: 0;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tright: 0;\r\n\tbottom: 0;\r\n\tbackground-color: yellow;\r\n}\r\n\r\n.main-container {\r\n\tposition: absolute;\r\n\tright: 5px;\r\n\ttop: 5px;\r\n\twidth: 250px;\r\n}\r\n\r\n.loading-progress {\r\n\tposition: absolute;\r\n\twidth: 50%;\r\n\tleft: 0px;\r\n\tmargin-left: 25%;\r\n\ttop: 5px;\r\n\tz-index: 19 !important;\r\n}\r\n\r\n.time-slider {\r\n\tposition: absolute;\r\n\twidth: 50%;\r\n\tleft: 0px;\r\n\tmargin-left: 25%;\r\n\tbottom: 25px;\r\n\tz-index: 19 !important;\r\n}\r\n\r\n.input-width {\r\n\twidth: 250px;\r\n}\r\n\r\n/* Transitions lag when trying to show loading progress */\r\n.disable-transition {\r\n\ttransition: none !important;\r\n}\r\n\r\n.left-container {\r\n\tposition: absolute;\r\n\ttop: 5px;\r\n\tbottom: 5px;\r\n\tleft: 5px;\r\n\twidth: 275px;\r\n\toverflow: scroll;\r\n}\r\n\r\n.progress-font {\r\n\tfont-size: small;\r\n}\r\n\r\n.button-container {\r\n\tposition: absolute;\r\n\ttop: 5px;\r\n\tleft: 5px;\r\n\t-webkit-transition-duration: 0.3s;\r\n\t-moz-transition-duration: 0.3s;\r\n\t-o-transition-duration: 0.3s;\r\n\ttransition-duration: 0.3s;\r\n}\r\n\r\n.button-container-drawer {\r\n\tleft: 280px;\r\n}\r\n\r\n\r\n</style>\r\n\r\n<template>\r\n\t<div v-resize=\"resize\">\r\n\t\t<canvas class=\"canvas-size\" ref=\"gcodeViewer\"></canvas>\r\n\t\t<div class=\"main-container\">\r\n\t\t\t<v-row no-gutters>\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<v-btn @click=\"chooseFile\" title=\"Load File\">\r\n\t\t\t\t\t\t<v-icon>mdi-upload</v-icon>Upload\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t\t<v-btn @click=\"reload\" class=\"ml-1\" title=\"Reload With New Settings\">\r\n\t\t\t\t\t\t<v-icon>mdi-reload</v-icon>Reload\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<span class=\"small-font-note\">Reload after changing settings.</span>\r\n\t\t\t\t</v-col>\r\n\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<v-text-field class=\"input-width\" hint=\"Voxel Width\" persistent-hint v-model=\"voxelWidth\"></v-text-field>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<v-text-field class=\"input-width\" hint=\"Voxel Height\" persistent-hint v-model=\"voxelHeight\"></v-text-field>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<v-checkbox class=\"input-width\" hint=\"Feed Rate Coloring\" persistent-hint v-model=\"feedColoring\"></v-checkbox>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"6\"></v-col>\r\n\t\t\t\t<v-col cols=\"6\">\r\n\t\t\t\t\t<v-btn @click=\"resetCam\" title=\"Reset Camera\">\r\n\t\t\t\t\t\t<v-icon>mdi-camera</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t\t<input :accept=\"'.g,.gcode,.gc,.gco,.nc,.ngc,.tap'\" @change=\"fileSelected\" hidden multiple ref=\"fileInput\" type=\"file\" />\r\n\t\t</div>\r\n\t\t<div :class=\"{ 'button-container-drawer': drawer }\" class=\"button-container\">\r\n\t\t\t<v-btn title=\"Show Tools\" @click=\"drawer = !drawer\" class=\"toggle-menu-button-close mb-10\" color=\"secondary\" small>\r\n\t\t\t\t<v-icon>mdi-cog</v-icon>\r\n\t\t\t</v-btn>\r\n\t\t</div>\r\n\t<v-navigation-drawer v-model=\"drawer\" :permanent=\"drawer\" absolute width=\"275\">\r\n\t\t<tool-configuration class=\"input-width\"></tool-configuration>\r\n\t\t</v-navigation-drawer>\r\n\t\t<div class=\"loading-progress\">\r\n\t\t\t<div></div>\r\n\t\t\t<v-progress-linear :value=\"loadingProgress\" class=\"disable-transition\" height=\"15\" rounded v-show=\"loading\">\r\n\t\t\t\t<span class=\"progress-font\">{{loadingMessage}}{{loadingProgress}}%</span>\r\n\t\t\t</v-progress-linear>\r\n\t\t</div>\r\n\r\n\t\t<div class=\"time-slider\">\r\n\t\t\t<v-row no-gutters>\r\n\t\t\t\t<v-col cols=\"10\">\r\n\t\t\t\t\t<v-slider :disabled=\"loading\" :label=\"filePositionString\" :max=\"fileSize\" min=\"0\" v-model=\"filePosition\"></v-slider>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"1\">\r\n\t\t\t\t\t<v-btn @click=\"playing = !playing\">\r\n\t\t\t\t\t\t<v-icon v-if=\"playing\">mdi-pause</v-icon>\r\n\t\t\t\t\t\t<v-icon v-else>mdi-play</v-icon>\r\n\t\t\t\t\t</v-btn>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"1\">\r\n\t\t\t\t\t<v-select :items=\"speeds\" v-model=\"playbackSpeedSelection\"></v-select>\r\n\t\t\t\t</v-col>\r\n\t\t\t\t<v-col cols=\"12\">\r\n\t\t\t\t\t<span v-if=\"!loading\">Prsss play or use the scrubber to go through file.</span>\r\n\t\t\t\t</v-col>\r\n\t\t\t</v-row>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\n'use strict';\r\n\r\nimport GCodeViewer from './viewer/gcodeviewer.js';\r\nimport {RenderMode, ColorMode} from './viewer/gcodeprocessor.js';\r\nimport {GetTool} from './viewer/tool.js';\r\nlet viewer = null;\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tdrawer: false,\r\n\t\t\tloading: false,\r\n\t\t\tloadingProgress: 0,\r\n\t\t\tloadingMessage: '',\r\n\t\t\tvoxelWidth: 1,\r\n\t\t\tvoxelHeight: 1,\r\n\t\t\tfeedColoring: true,\r\n\t\t\tminColorRate: 0,\r\n\t\t\tmaxColorRate: 6000,\r\n\t\t\textruderColors: ['#00FFFF', '#FF00FF', '#FFFF00', '#000000', '#FFFFFF'],\r\n\t\t\tfileSize: 0,\r\n\t\t\tfilePosition: 0,\r\n\t\t\tplaying: false,\r\n\t\t\tspeeds: [\r\n\t\t\t\t{text: '0.5x', value: 50},\r\n\t\t\t\t{text: '1x', value: 100},\r\n\t\t\t\t{text: '2x', value: 200},\r\n\t\t\t\t{text: '5x', value: 500},\r\n\t\t\t\t{text: '10x', value: 1000},\r\n\t\t\t],\r\n\t\t\tplaybackSpeedSelection: 100,\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\tfilePositionString() {\r\n\t\t\treturn `${this.filePosition}`;\r\n\t\t},\r\n\t},\r\n\tmounted() {\r\n\t\tthis.playbackSpeedSelection = 100;\r\n\t\tviewer = new GCodeViewer(this.$refs.gcodeViewer);\r\n\t\tviewer.init();\r\n\r\n\t\tviewer.gcodeProcessor.loadingProgressCallback = (progress, message) => {\r\n\t\t\tthis.loadingMessage = message;\r\n\t\t\tthis.loadingProgress = Math.ceil(progress * 100);\r\n\t\t\tif (this.loadingProgress > 99) {\r\n\t\t\t\tthis.loading = false;\r\n\t\t\t} else {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t}\r\n\t\t};\r\n\t\tviewer.gcodeProcessor.tools = GetTool();\r\n\r\n\t\tviewer.setCursorVisiblity(false);\r\n\t\tviewer.gcodeProcessor.colorMode = ColorMode.Feed;\r\n\t\tviewer.gcodeProcessor.renderMode = RenderMode.voxel;\r\n\t\tviewer.gcodeProcessor.meshBreakPoint = Number.MAX_VALUE; //We are going to overwrite the breakpoint for voxels (for now)  Voxel Engine will run it's own SPS. SPS per layer height?\r\n\t\tviewer.setZClipPlane(1000000, -1000000);\r\n\t\tsetInterval(() => {\r\n\t\t\tif (this.playing) {\r\n\t\t\t\tthis.filePosition += this.playbackSpeedSelection;\r\n\t\t\t\tviewer.gcodeProcessor.updateFilePosition(this.filePosition);\r\n\t\t\t}\r\n\t\t}, 200);\r\n\t},\r\n\tmethods: {\r\n\t\tresize() {\r\n\t\t\tif (viewer !== null) {\r\n\t\t\t\tviewer.resize();\r\n\t\t\t}\r\n\t\t},\r\n\t\tasync fileSelected(e) {\r\n\t\t\tthis.updateViewerSettings();\r\n\r\n\t\t\tconst reader = new FileReader();\r\n\t\t\treader.addEventListener('load', async (event) => {\r\n\t\t\t\tconst blob = event.target.result;\r\n\t\t\t\tviewer.gcodeProcessor.updateFilePosition(blob.length);\r\n\t\t\t\tawait viewer.processFile(blob);\r\n\t\t\t\tthis.fileSize = viewer.fileSize;\r\n\t\t\t\t//this.setGCodeValues();\r\n\t\t\t});\r\n\t\t\tthis.loading = true;\r\n\t\t\tviewer.gcodeProcessor.colorMode = this.feedColoring ? ColorMode.Feed : ColorMode.Color;\r\n\t\t\treader.readAsText(e.target.files[0]);\r\n\t\t\te.target.value = '';\r\n\t\t},\r\n\t\tupdateExtruderColor(index, value) {\r\n\t\t\tthis.$set(this.extruderColors, index, value);\r\n\t\t\tviewer.saveExtruderColors(this.extruderColors);\r\n\t\t},\r\n\t\tchooseFile() {\r\n\t\t\tthis.$refs.fileInput.click();\r\n\t\t},\r\n\t\tresetCam() {\r\n\t\t\tviewer.resetCamera();\r\n\t\t},\r\n\t\tasync reload() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.updateViewerSettings();\r\n\t\t\tawait viewer.reload();\r\n\t\t},\r\n\t\tupdateViewerSettings() {\r\n\t\t\tviewer.gcodeProcessor.tools = GetTool();\r\n\t\t\t//viewer.saveExtruderColors(this.extruderColors);\r\n\t\t\tviewer.gcodeProcessor.voxelWidth = isNaN(this.voxelWidth) || this.voxelWidth === '' ? 3 : this.voxelWidth;\r\n\t\t\tviewer.gcodeProcessor.voxelHeight = isNaN(this.voxelHeight) || this.voxelHeight === '' ? 3 : this.voxelHeight;\r\n\t\t\tviewer.gcodeProcessor.minColorRate = isNaN(this.minColorRate) ? 0 : this.minColorRate;\r\n\t\t\tviewer.gcodeProcessor.maxColorRate = isNaN(this.maxColorRate) ? 6000 : this.maxColorRate;\r\n\t\t\tviewer.gcodeProcessor.colorMode = this.feedColoring ? ColorMode.Feed : ColorMode.Color;\r\n\t\t},\r\n\t\tresetExtruderColors() {\r\n\t\t\tthis.extruderColors = ['#00FFFF', '#FF00FF', '#FFFF00', '#000000', '#FFFFFF'];\r\n\t\t\tviewer.saveExtruderColors(this.extruderColors);\r\n\t\t\tthis.extruderColors.forEach((v, i) => {\r\n\t\t\t\tthis.$set(this.extruderColors, i, v);\r\n\t\t\t});\r\n\t\t\tthis.extruderColors = viewer.getExtruderColors();\r\n\t\t},\r\n\t\tasync loadBenchy() {\r\n\t\t\tthis.loading = true;\r\n\t\t\tlet benchy = await fetch('./benchy_color.gcode');\r\n\t\t\tlet blob = await benchy.blob();\r\n\t\t\tlet text = await blob.text();\r\n\t\t\tif (blob === undefined) return;\r\n\t\t\tthis.updateViewerSettings();\r\n\t\t\tviewer.gcodeProcessor.updateFilePosition(text.length);\r\n\t\t\tawait viewer.processFile(text);\r\n\t\t\tthis.fileSize = viewer.fileSize;\r\n\t\t},\r\n\t},\r\n\twatch: {\r\n\t\tfilePosition(to) {\r\n\t\t\tviewer.gcodeProcessor.updateFilePosition(to);\r\n\t\t},\r\n\t},\r\n};\r\n</script>\r\n\r\n\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./viewer.vue?vue&type=template&id=44b3d1f8&scoped=true&\"\nimport script from \"./viewer.vue?vue&type=script&lang=js&\"\nexport * from \"./viewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./viewer.vue?vue&type=style&index=0&id=44b3d1f8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"44b3d1f8\",\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../../../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VNavigationDrawer } from 'vuetify/lib/components/VNavigationDrawer';\nimport { VProgressLinear } from 'vuetify/lib/components/VProgressLinear';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\ninstallComponents(component, {VBtn,VCheckbox,VCol,VIcon,VNavigationDrawer,VProgressLinear,VRow,VSelect,VSlider,VTextField})\n\n\n/* vuetify-loader */\nimport installDirectives from \"!../../../node_modules/vuetify-loader/lib/runtime/installDirectives.js\"\nimport Resize from 'vuetify/lib/directives/resize'\ninstallDirectives(component, {Resize})\n","import Vue from 'vue'\r\n\r\nimport ColorPicker from './ColorPicker.vue';\r\nimport ToolConfiguration from './ToolConfiguration.vue'\r\nimport ASMBLViewer from './viewer.vue'\r\n\r\nVue.component('color-picker', ColorPicker);\r\nVue.component('tool-configuration', ToolConfiguration);\r\nVue.component('asmbl-viewer', ASMBLViewer);\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport Vuetify from 'vuetify'\r\nimport '@mdi/font/css/materialdesignicons.css';\r\nimport './components'\r\nimport Vuex from 'vuex'\r\n\r\n\r\nVue.config.productionTip = false\r\nVue.use(Vuetify);\r\nVue.use(Vuex);\r\n\r\nnew Vue({\r\n  render: h => h(App),\r\n  vuetify: new Vuetify({\r\n    theme: { dark: true },\r\n    icons: {\r\n      iconfont: 'mdiSvg',\r\n    },\r\n  }),  \r\n}).$mount('#app')\r\n\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./viewer.vue?vue&type=style&index=0&id=44b3d1f8&scoped=true&lang=css&\""],"sourceRoot":""}