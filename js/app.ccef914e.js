(function(e){function t(t){for(var r,a,s=t[0],l=t[1],c=t[2],u=0,f=[];u<s.length;u++)a=s[u],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&f.push(n[a][0]),n[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],r=!0,s=1;s<o.length;s++){var l=o[s];0!==n[l]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=o[0]))}return e}var r={},n={app:0},i=[];function a(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,a),o.l=!0,o.exports}a.m=e,a.c=r,a.d=function(e,t,o){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(a.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(o,r,function(t){return e[t]}.bind(null,r));return o},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("56d7")},"0197":function(e,t,o){"use strict";o("586d")},"034f":function(e,t,o){"use strict";o("85ec")},1871:function(e,t,o){"use strict";o("5983")},1950:function(e,t,o){"use strict";o("1e3b")},"1e3b":function(e,t,o){},"4ee7":function(e,t,o){},"56d7":function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var r=o("2b0e"),n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{attrs:{id:"inspire"}},[o("v-app-bar",{attrs:{app:""}},[o("v-toolbar-title",[e._v("GCode Voxel Viewer by Sindarius")]),o("v-spacer"),o("v-btn",{on:{click:e.loadBenchy}},[e._v("Load a benchy!")])],1),o("v-main",{staticClass:"main-ref"},[o("asmbl-viewer",{ref:"viewer"})],1)],1)},i=[],a={data:function(){return{drawer:null}},methods:{loadBenchy:function(){this.$refs.viewer.loadBenchy()}}},s=a,l=(o("034f"),o("2877")),c=o("6544"),d=o.n(c),u=o("7496"),f=o("40dc"),v=o("8336"),h=o("f6c4"),p=o("2fa4"),g=o("2a7f"),m=Object(l["a"])(s,n,i,!1,null,null,null),x=m.exports;d()(m,{VApp:u["a"],VAppBar:f["a"],VBtn:v["a"],VMain:h["a"],VSpacer:p["a"],VToolbarTitle:g["a"]});var b=o("ce5b"),w=o.n(b),C=(o("5363"),function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("vue-draggable-resizable",{ref:"dragWindow",staticClass:"main-window",attrs:{hidden:!e.visible,"min-width":e.minWidth,"min-height":200,w:e.w,h:e.h,x:e.x,y:e.y,"drag-handle":e.dragHandle,parent:!0}},[o("div",{staticClass:"fill-area"},[o("v-toolbar",{staticClass:"drag-handle"},[o("v-btn",{staticClass:"close-button mr-1",attrs:{large:"",color:"error"},on:{click:e.hide}},[o("v-icon",[e._v("mdi-close")])],1),o("v-btn",{staticClass:"close-button mr-3",attrs:{large:"",color:"info"},on:{click:e.maximize}},[o("v-icon",[e._v(e._s(e.maximized?"mdi-window-restore":"mdi-window-maximize")+" ")])],1),o("v-toolbar-title",[e._v(e._s(e.title))])],1),o("main",{staticClass:"content-area"},[e._t("default")],2),o("footer",{staticClass:"footer"},[e._t("footer")],2)],1)])}),y=[],k=(o("a9e3"),o("96cf"),o("1da1")),S=o("fb19"),T=o.n(S);o("278f");r["default"].component("vue-draggable-resizable",T.a);var V={props:{visible:{type:Boolean,required:!0},title:String,startfull:{type:Boolean,default:!1},minWidth:{type:Number,default:300}},data:function(){return{dragHandle:".drag-handle",x:100,y:100,w:this.$props.minWidth,h:200,maximized:!1,restoreDimensions:{}}},methods:{maximize:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.maximized){t.next=8;break}return e.maximized=!1,e.dragHandle=".drag-handle",t.next=5,e.$nextTick().then((function(){e.w=e.restoreDimensions.w,e.h=e.restoreDimensions.h}));case 5:return t.next=7,e.$nextTick().then((function(){e.x=e.restoreDimensions.x,e.y=e.restoreDimensions.y}));case 7:return t.abrupt("return");case 8:e.maximized=!0,e.dragHandle=".drag-handle-disabled",e.restoreDimensions={x:e.$refs.dragWindow.left,y:e.$refs.dragWindow.top,w:e.$refs.dragWindow.width,h:e.$refs.dragWindow.height},e.x=0,e.y=0,e.w=window.innerWidth,e.h=window.innerHeight;case 15:case"end":return t.stop()}}),t)})))()},hide:function(){this.$emit("update:visible",!1)}},watch:{visible:function(e){e&&this.startfull&&!this.maximized&&this.maximize()}}},F=V,_=(o("1871"),o("132d")),P=o("71d9"),R=Object(l["a"])(F,C,y,!1,null,"3d6261f0",null),z=R.exports;d()(R,{VBtn:v["a"],VIcon:_["a"],VToolbar:P["a"],VToolbarTitle:g["a"]}),r["default"].use(z);var O=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",{attrs:{align:"center",justify:"center"}},[o("v-col",{staticClass:"shrink",style:[e.backgroundColorStyle]},[o("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",solo:""},on:{blur:function(t){return e.updateValue(e.internalTextColor)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateValue(e.internalTextColor)}},scopedSlots:e._u([{key:"append",fn:function(){return[o("v-menu",{attrs:{"close-on-content-click":!1,"nudge-bottom":"105","nudge-left":"16",top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("div",e._g({style:e.swatchStyle},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[o("v-card",[o("v-card-text",{staticClass:"pa-0"},[o("v-color-picker",{staticClass:"index-placement",attrs:{flat:""},on:{input:function(t){return e.updateValue(e.color)}},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)],1)]},proxy:!0}]),model:{value:e.internalTextColor,callback:function(t){e.internalTextColor=t},expression:"internalTextColor"}})],1)],1)},$=[],W=(o("843c"),o("2ca0"),{props:["editcolor"],data:function(){return{internalTextColor:"#000000",color:"#000000",menu:!1}},computed:{backgroundColorStyle:function(){return{minWidth:"220px",backgroundColor:this.color}},swatchStyle:function(){var e=this.color,t=this.menu;return{backgroundColor:e,cursor:"pointer",height:"30px",width:"30px",borderRadius:t?"50%":"4px",transition:"border-radius 200ms ease-in-out"}}},mounted:function(){this.color=this.editcolor,this.internalTextColor=this.editcolor},methods:{updateValue:function(e){this.color=e,e.startsWith("#")||(this.color="#"+e),this.color=this.color.toUpperCase().padEnd(7,"0").substring(0,7),this.internalTextColor=this.color,this.$emit("update:editcolor",this.color)}},watch:{editcolor:{handler:function(e){this.color=e,this.internalTextColor=e}}}}),j=W,E=(o("1950"),o("b0af")),N=o("99d9"),M=o("62ad"),H=o("03a4"),B=o("e449"),I=o("0fd9"),D=o("8654"),J=Object(l["a"])(j,O,$,!1,null,"0e916049",null),A=J.exports;d()(J,{VCard:E["a"],VCardText:N["a"],VCol:M["a"],VColorPicker:H["a"],VMenu:B["a"],VRow:I["a"],VTextField:D["a"]});var G=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"bgcolor"},[o("v-btn",{attrs:{block:""},on:{click:function(t){return e.save()}}},[e._v("Save Tools")]),e._l(e.tools,(function(t,r){return o("v-card",{key:r,staticClass:"mb-2"},[o("v-card-title",[e._v(e._s(t.name))]),o("v-card-text",[o("v-row",[o("v-col",{attrs:{cols:"12"}},[o("div",{staticClass:"mb-2"},[e._v("Filamnt Color")]),o("color-picker",{attrs:{editcolor:t.colorString},on:{"update:editcolor":function(o){return e.$set(t,"colorString",o)}}})],1),o("v-col",{attrs:{cols:"12"}},[e._v(" Diameter "),o("v-text-field",{model:{value:t.diameter,callback:function(o){e.$set(t,"diameter",o)},expression:"tool.diameter"}})],1),o("v-col",{attrs:{cols:"12"}},[e._v(" Tool Type "),o("v-select",{attrs:{items:e.toolTypes},model:{value:t.toolType,callback:function(o){e.$set(t,"toolType",o)},expression:"tool.toolType"}})],1)],1)],1)],1)}))],2)},L=[],U=(o("4160"),o("a434"),o("b0c0"),o("159b"),o("afbc")),q={data:function(){return{toolCountValue:1,tools:new Array,toolTypes:["Extruder","Endmill"],loadedTools:new Array}},mounted:function(){this.tools=this.GetTool()},methods:{save:function(){this.SaveTool()},GetTool:function(){var e=this;if(0===this.loadedTools.length){var t=window.localStorage.getItem("tools");if(t){this.loadedTools.splice();var o=JSON.parse(t);o.forEach((function(t){var o=U["a"].fromJson(t);e.loadedTools.push(o)}))}else for(var r=0;r<10;r++){var n=new U["a"];n.name="Tool #"+r,this.loadedTools.push(n)}}return this.loadedTools},SaveTool:function(){var e=JSON.stringify(this.loadedTools);window.localStorage.setItem("tools",e)}},computed:{toolCount:{get:function(){return this.toolCountValue},set:function(e){e>10||e<1||(this.toolCountValue=e)}}}},Q=q,Z=(o("0197"),o("b974")),K=Object(l["a"])(Q,G,L,!1,null,null,null),X=K.exports;d()(K,{VBtn:v["a"],VCard:E["a"],VCardText:N["a"],VCardTitle:N["b"],VCol:M["a"],VRow:I["a"],VSelect:Z["a"],VTextField:D["a"]});var Y=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{directives:[{name:"resize",rawName:"v-resize",value:e.resize,expression:"resize"}]},[o("canvas",{ref:"gcodeViewer",staticClass:"canvas-size"}),o("div",{staticClass:"main-container"},[o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{attrs:{cols:"12"}},[o("v-btn",{attrs:{title:"Load File"},on:{click:e.chooseFile}},[o("v-icon",[e._v("mdi-upload")]),e._v("Upload ")],1),o("v-btn",{staticClass:"ml-1",attrs:{title:"Reload With New Settings"},on:{click:e.reload}},[o("v-icon",[e._v("mdi-reload")]),e._v("Reload ")],1)],1),o("v-col",{attrs:{cols:"12"}},[o("span",{staticClass:"small-font-note"},[e._v("Reload after changing settings.")])]),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{staticClass:"input-width",attrs:{hint:"Voxel Width","persistent-hint":""},model:{value:e.voxelWidth,callback:function(t){e.voxelWidth=t},expression:"voxelWidth"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-text-field",{staticClass:"input-width",attrs:{hint:"Voxel Height","persistent-hint":""},model:{value:e.voxelHeight,callback:function(t){e.voxelHeight=t},expression:"voxelHeight"}})],1),o("v-col",{attrs:{cols:"12"}},[o("v-checkbox",{staticClass:"input-width",attrs:{hint:"Feed Rate Coloring","persistent-hint":""},model:{value:e.feedColoring,callback:function(t){e.feedColoring=t},expression:"feedColoring"}})],1),o("v-col",{attrs:{cols:"6"}}),o("v-col",{attrs:{cols:"6"}},[o("v-btn",{attrs:{title:"Reset Camera"},on:{click:e.resetCam}},[o("v-icon",[e._v("mdi-camera")])],1)],1)],1),o("input",{ref:"fileInput",attrs:{accept:".g,.gcode,.gc,.gco,.nc,.ngc,.tap",hidden:"",multiple:"",type:"file"},on:{change:e.fileSelected}})],1),o("div",{staticClass:"button-container",class:{"button-container-drawer":e.drawer}},[o("v-btn",{staticClass:"toggle-menu-button-close mb-10",attrs:{color:"secondary",small:"",title:"Show Tools"},on:{click:function(t){e.drawer=!e.drawer}}},[o("v-icon",[e._v("mdi-cog")])],1)],1),o("v-navigation-drawer",{attrs:{permanent:e.drawer,absolute:"",width:"275"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[o("tool-configuration",{staticClass:"input-width"})],1),o("div",{staticClass:"loading-progress"},[o("div"),o("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.loading,expression:"loading"}],staticClass:"disable-transition",attrs:{value:e.loadingProgress,height:"15",rounded:""}},[o("span",{staticClass:"progress-font"},[e._v(e._s(e.loadingMessage)+e._s(e.loadingProgress)+"%")])])],1),o("div",{staticClass:"time-slider"},[o("v-row",{attrs:{"no-gutters":""}},[o("v-col",{attrs:{cols:"10"}},[o("v-slider",{attrs:{disabled:e.loading,label:e.filePositionString,max:e.fileSize,min:"0"},model:{value:e.filePosition,callback:function(t){e.filePosition=t},expression:"filePosition"}})],1),o("v-col",{attrs:{cols:"1"}},[o("v-btn",{on:{click:function(t){e.playing=!e.playing}}},[e.playing?o("v-icon",[e._v("mdi-pause")]):o("v-icon",[e._v("mdi-play")])],1)],1),o("v-col",{attrs:{cols:"1"}},[o("v-select",{attrs:{items:e.speeds},model:{value:e.playbackSpeedSelection,callback:function(t){e.playbackSpeedSelection=t},expression:"playbackSpeedSelection"}})],1),o("v-col",{attrs:{cols:"12"}},[e.loading?e._e():o("span",[e._v("Press play or use the scrubber to go through file.")])])],1)],1)],1)},ee=[],te=(o("d3b7"),null),oe={data:function(){return{drawer:!1,loading:!1,loadingProgress:0,loadingMessage:"",voxelWidth:1,voxelHeight:1,feedColoring:!0,minColorRate:0,maxColorRate:6e3,extruderColors:["#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF"],fileSize:0,filePosition:0,playing:!1,speeds:[{text:"0.5x",value:50},{text:"1x",value:100},{text:"2x",value:200},{text:"5x",value:500},{text:"10x",value:1e3}],playbackSpeedSelection:100,loadedTools:new Array}},computed:{filePositionString:function(){return"".concat(this.filePosition)}},mounted:function(){var e=this;this.playbackSpeedSelection=100,te=new U["b"](this.$refs.gcodeViewer),te.init(),console.log(te),te.gcodeProcessor.loadingProgressCallback=function(t,o){e.loadingMessage=o,e.loadingProgress=Math.ceil(100*t),e.loadingProgress>99?e.loading=!1:e.loading=!0},te.gcodeProcessor.tools=this.GetTool(),te.setCursorVisiblity(!1),te.gcodeProcessor.colorMode=1,te.gcodeProcessor.renderMode=5,te.gcodeProcessor.meshBreakPoint=2e4,te.setZClipPlane(1e6,-1e6),setInterval((function(){e.playing&&(e.filePosition+=e.playbackSpeedSelection,te.gcodeProcessor.updateFilePosition(e.filePosition))}),200)},methods:{resize:function(){null!==te&&te.resize()},fileSelected:function(e){var t=this;return Object(k["a"])(regeneratorRuntime.mark((function o(){var r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:t.updateViewerSettings(),r=new FileReader,r.addEventListener("load",function(){var e=Object(k["a"])(regeneratorRuntime.mark((function e(o){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=o.target.result,te.gcodeProcessor.updateFilePosition(r.length),e.next=4,te.processFile(r);case 4:t.fileSize=te.fileSize;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.loading=!0,te.gcodeProcessor.colorMode=t.feedColoring?1:0,r.readAsText(e.target.files[0]),e.target.value="";case 7:case"end":return o.stop()}}),o)})))()},updateExtruderColor:function(e,t){this.$set(this.extruderColors,e,t),te.saveExtruderColors(this.extruderColors)},chooseFile:function(){this.$refs.fileInput.click()},resetCam:function(){te.resetCamera()},reload:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,e.updateViewerSettings(),t.next=4,te.reload();case 4:case"end":return t.stop()}}),t)})))()},updateViewerSettings:function(){te.gcodeProcessor.tools=this.GetTool(),te.gcodeProcessor.voxelWidth=isNaN(this.voxelWidth)||""===this.voxelWidth?3:this.voxelWidth,te.gcodeProcessor.voxelHeight=isNaN(this.voxelHeight)||""===this.voxelHeight?3:this.voxelHeight,te.gcodeProcessor.minColorRate=isNaN(this.minColorRate)?0:this.minColorRate,te.gcodeProcessor.maxColorRate=isNaN(this.maxColorRate)?6e3:this.maxColorRate,te.gcodeProcessor.colorMode=this.feedColoring?1:0,te.gcodeProcessor.setVoxelMode(!0),te.updateRenderQuality(6)},resetExtruderColors:function(){var e=this;this.extruderColors=["#00FFFF","#FF00FF","#FFFF00","#000000","#FFFFFF"],te.saveExtruderColors(this.extruderColors),this.extruderColors.forEach((function(t,o){e.$set(e.extruderColors,o,t)})),this.extruderColors=te.getExtruderColors()},loadBenchy:function(){var e=this;return Object(k["a"])(regeneratorRuntime.mark((function t(){var o,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.loading=!0,t.next=3,fetch("./benchy_color.gcode");case 3:return o=t.sent,t.next=6,o.blob();case 6:return r=t.sent,t.next=9,r.text();case 9:if(n=t.sent,void 0!==r){t.next=12;break}return t.abrupt("return");case 12:return e.updateViewerSettings(),te.gcodeProcessor.updateFilePosition(n.length),t.next=16,te.processFile(n);case 16:e.fileSize=te.fileSize;case 17:case"end":return t.stop()}}),t)})))()},GetTool:function(){var e=this;if(0===this.loadedTools.length){var t=window.localStorage.getItem("tools");if(t){this.loadedTools.splice();var o=JSON.parse(t);o.forEach((function(t){var o=U["a"].fromJson(t);e.loadedTools.push(o)}))}else for(var r=0;r<10;r++){var n=new U["a"];n.name="Tool #"+r,this.loadedTools.push(n)}}return this.loadedTools},SaveTool:function(){var e=JSON.stringify(this.loadedTools);window.localStorage.setItem("tools",e)}},watch:{filePosition:function(e){te.gcodeProcessor.updateFilePosition(e)}}},re=oe,ne=(o("95fd"),o("ac7c")),ie=o("f774"),ae=o("8e36"),se=o("ba0d"),le=o("269a"),ce=o.n(le),de=o("dc22"),ue=Object(l["a"])(re,Y,ee,!1,null,"806e2790",null),fe=ue.exports;d()(ue,{VBtn:v["a"],VCheckbox:ne["a"],VCol:M["a"],VIcon:_["a"],VNavigationDrawer:ie["a"],VProgressLinear:ae["a"],VRow:I["a"],VSelect:Z["a"],VSlider:se["a"],VTextField:D["a"]}),ce()(ue,{Resize:de["a"]}),r["default"].component("color-picker",A),r["default"].component("tool-configuration",X),r["default"].component("asmbl-viewer",fe);var ve=o("2f62");r["default"].config.productionTip=!1,r["default"].use(w.a),r["default"].use(ve["a"]),new r["default"]({render:function(e){return e(x)},vuetify:new w.a({theme:{dark:!0},icons:{iconfont:"mdiSvg"}})}).$mount("#app")},"586d":function(e,t,o){},5983:function(e,t,o){},"85ec":function(e,t,o){},"95fd":function(e,t,o){"use strict";o("4ee7")}});
//# sourceMappingURL=app.ccef914e.js.map