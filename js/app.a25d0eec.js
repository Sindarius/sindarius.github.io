(function(e){function t(t){for(var r,n,a=t[0],l=t[1],c=t[2],u=0,h=[];u<a.length;u++)n=a[u],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&h.push(s[n][0]),s[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,c||[]),o()}function o(){for(var e,t=0;t<i.length;t++){for(var o=i[t],r=!0,a=1;a<o.length;a++){var l=o[a];0!==s[l]&&(r=!1)}r&&(i.splice(t--,1),e=n(n.s=o[0]))}return e}var r={},s={app:0},i=[];function n(t){if(r[t])return r[t].exports;var o=r[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=r,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var d=l;i.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"0ee7":function(e,t,o){},"1f41":function(e,t,o){},"279c":function(e,t,o){"use strict";o("e6d5")},"4a39":function(e,t,o){},"527a":function(e,t,o){},5401:function(e,t,o){},"5c98":function(e,t,o){},"678b":function(e,t,o){},6848:function(e,t,o){e.exports=o.p+"img/chromeinfo.e268fed4.png"},"689b":function(e,t,o){"use strict";o("4a39")},"6b47":function(e,t,o){"use strict";o("527a")},"8d62":function(e,t,o){"use strict";o("dfb9")},9954:function(e,t,o){"use strict";o("5401")},a34b:function(e,t,o){"use strict";o("1f41")},aab3:function(e,t,o){"use strict";o("ea37")},ac44:function(e,t,o){"use strict";o("0ee7")},bad7:function(e,t,o){"use strict";o("e672")},c0a0:function(e,t,o){"use strict";o("de88")},c0c2:function(e,t,o){e.exports=o.p+"img/klipper.0ae8ba07.png"},cd49:function(e,t,o){"use strict";o.r(t);o("2d26"),o("96cf");var r=o("2b0e"),s=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",[o("v-app-bar",{attrs:{app:"",color:"primary",dense:""}},[o("Status"),o("v-spacer"),e.isConnected?o("v-btn",{staticClass:"mr-2",on:{click:e.disconnect}},[o("v-icon",{staticClass:"mr-2"},[e._v("mdi-lan-connect")]),e._v(" Disconnect")],1):o("v-btn",{staticClass:"mr-2",on:{click:function(t){e.showConnectionDialog=!0}}},[o("v-icon",{staticClass:"mr-2"},[e._v("mdi-lan-connect")]),e._v(" Connect")],1),o("v-btn",{on:{click:function(t){e.showAboutDialog=!0}}},[o("v-icon",{attrs:{color:"green"}},[e._v("mdi-information-outline")])],1),o("v-btn",{on:{click:function(t){e.showChromeInfo=!0}}},[o("v-icon",[e._v("mdi-google-chrome")])],1)],1),o("v-main",{staticClass:"main-relative"},[o("Viewer"),o("Connect",{attrs:{show:e.showConnectionDialog},on:{"update:show":function(t){e.showConnectionDialog=t}}}),o("About",{attrs:{show:e.showAboutDialog},on:{"update:show":function(t){e.showAboutDialog=t}}}),o("Toolbar",{class:e.toolbarClass}),o("ChromeInfo",{attrs:{show:e.showChromeInfo},on:{"update:show":function(t){e.showChromeInfo=t}}})],1)],1)},i=[],n=o("9ab4"),a=(o("5c98"),o("1b40")),l=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{directives:[{name:"show",rawName:"v-show",value:e.showGCodeStream,expression:"showGCodeStream"}],staticClass:"gcode-lines"}),o("canvas",{ref:"viewercanvas",staticClass:"canvas-sizing",on:{dragover:function(t){return t.preventDefault(),e.dragOver.apply(null,arguments)},dragleave:e.dragLeave,drop:function(t){return t.preventDefault(),e.drop.apply(null,arguments)}}}),o("v-progress-linear",{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],staticClass:"progress-position disable-transition",attrs:{striped:"",height:"30",rounded:"",value:e.progressPercent},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.value;return[o("strong",{staticClass:"progress-text"},[e._v(e._s(Math.ceil(r))+"% "+e._s(e.message)+" ")])]}}])}),o("div",{directives:[{name:"show",rawName:"v-show",value:!e.liveTracking&&e.scrubFileSize>0,expression:"!liveTracking && scrubFileSize > 0"}],staticClass:"scrubber"},[o("v-row",{attrs:{dense:""}},[o("v-col",{attrs:{cols:"9",md:"7"}},[o("v-slider",{attrs:{hint:e.scrubPosition+"/"+e.scrubFileSize,max:e.scrubFileSize,dense:"",min:"0","persistent-hint":""},model:{value:e.scrubPosition,callback:function(t){e.scrubPosition=t},expression:"scrubPosition"}})],1),o("v-col",{attrs:{cols:"3",md:"2"}},[o("v-btn",{ref:"playButton",on:{click:function(t){e.scrubPlaying=!e.scrubPlaying}}},[e.scrubPlaying?o("v-icon",[e._v("mdi-stop")]):o("v-icon",[e._v("mdi-play")])],1),o("v-btn",{on:{click:e.fastForward}},[o("v-icon",[e._v("mdi-fast-forward")])],1)],1),o("v-col",{attrs:{cols:"12",md:"2"}},[o("v-btn-toggle",{attrs:{dense:"",mandatory:"",rounded:""},model:{value:e.scrubSpeed,callback:function(t){e.scrubSpeed=t},expression:"scrubSpeed"}},[o("v-btn",{attrs:{value:1}},[e._v("1x")]),o("v-btn",{attrs:{value:2}},[e._v("2x")]),o("v-btn",{attrs:{value:5}},[e._v("5x")]),o("v-btn",{attrs:{value:10}},[e._v("10x")]),o("v-btn",{attrs:{value:20}},[e._v("20x")])],1)],1)],1)],1)],1)},c=[],d=o("afbc");let u=class extends r["a"]{async download(e,t){return await this.$store.dispatch("connections/download",{filename:e,callback:t})}get isMobile(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return!0}return!1}};u=Object(n["a"])([a["a"]],u);var h,p=u;let v,m=h=class extends(Object(a["b"])(p)){get tools(){return this.$store.state.viewer.tools}viewer(){return v}setGCodeViewer(e){v=e}get showProgress(){return this.$store.state.viewer.showProgress}set showProgress(e){this.$store.commit("viewer/showProgress",e)}get currentFileName(){return this.$store.state.viewer.currentFileName}set currentFileName(e){this.$store.commit("viewer/updateCurrentFile",e)}get liveTracking(){return this.$store.state.viewer.liveTracking}set liveTracking(e){this.$store.commit("viewer/liveTracking",e)}get reloadRequired(){return this.$store.state.viewer.reloadRequired}set reloadRequired(e){this.$store.commit("viewer/reloadRequired",e)}get renderQuality(){return this.$store.getters["viewer/renderQuality"]}set renderQuality(e){this.reloadRequired=!0,this.$store.commit("viewer/renderQuality",e)}get renderMode(){return this.$store.getters["viewer/renderMode"]}set renderMode(e){this.reloadRequired=!0,this.$store.commit("viewer/renderMode",e)}get lineMode(){return this.$store.getters["viewer/lineMode"]}set lineMode(e){this.reloadRequired=!0,this.$store.commit("viewer/lineMode",e)}get voxelMode(){return this.$store.getters["viewer/voxelMode"]}set voxelMode(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelMode",e)}get voxelWidth(){return this.$store.getters["viewer/voxelWidth"]}set voxelWidth(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelWidth",e)}get voxelHeight(){return this.$store.getters["viewer/voxelHeight"]}set voxelHeight(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelHeight",e)}get travelMoves(){return this.$store.getters["viewer/travelMoves"]}set travelMoves(e){v.toggleTravels(e),this.$store.commit("viewer/travelMoves",e)}get hqRender(){return this.$store.getters["viewer/hqRender"]}set hqRender(e){this.reloadRequired=!0,this.$store.commit("viewer/hqRender",e)}get specular(){return this.$store.getters["viewer/specular"]}set specular(e){null!=v&&(v.gcodeProcessor.useSpecularColor(e),this.$store.commit("viewer/specular",e))}get minFeedRate(){return this.$store.getters["viewer/minfeedrate"]}set minFeedRate(e){this.reloadRequired=!0,this.$store.commit("viewer/minfeedrate",e)}get maxFeedRate(){return this.$store.getters["viewer/maxfeedrate"]}set maxFeedRate(e){this.reloadRequired=!0,this.$store.commit("viewer/maxfeedrate",e)}get minFeedColor(){return this.$store.getters["viewer/minfeedcolor"]}set minFeedColor(e){this.reloadRequired=!0,this.$store.commit("viewer/minfeedcolor",e)}get maxFeedColor(){return this.$store.getters["viewer/maxfeedcolor"]}set maxFeedColor(e){this.reloadRequired=!0,this.$store.commit("viewer/maxfeedcolor",e)}get transparency(){return this.$store.getters["viewer/transparency"]}set transparency(e){this.reloadRequired=!0,this.$store.commit("viewer/transparency",e)}get progressColor(){return this.$store.getters["viewer/progressColor"]}set progressColor(e){v.setProgressColor(this.progressColor),this.$store.commit("viewer/progressColor",e)}get backgroundColor(){return this.$store.getters["viewer/backgroundColor"]}set backgroundColor(e){v.setBackgroundColor(this.backgroundColor),v.forceRender(),this.$store.commit("viewer/backgroundColor",e)}get gridColor(){return this.$store.getters["viewer/gridColor"]}set gridColor(e){v.bed.setBedColor(e),this.$store.commit("viewer/gridColor",e)}get fileOffset(){return this.$store.getters["viewer/fileOffset"]}set fileOffset(e){this.$store.commit("viewer/fileOffset",e)}get g1AsExtrusion(){return this.$store.getters["viewer/g1AsExtrusion"]}set g1AsExtrusion(e){this.$store.commit("viewer/g1AsExtrusion",e)}set showGCodeStream(e){console.log("gcode stream",e),this.$store.commit("viewer/showGCodeStream",e)}get showGCodeStream(){return this.$store.getters["viewer/showGCodeStream"]}get perimeterOnly(){return this.$store.getters["viewer/perimeterOnly"]}set perimeterOnly(e){console.log("Perimeter Only",e),this.$store.commit("viewer/perimeterOnly",e)}async reloadViewer(){this.reloadRequired=!1,this.showProgress=!0,v.gcodeProcessor.cancelLoad=!0,await new Promise(e=>setTimeout(e,500)),this.beforeRender(),await v.reload(),h.scrubPlaying||(v.gcodeProcessor.forceRedraw(),this.$eventHub.$emit("reloadComplete")),this.showProgress=!1}beforeRender(){this.voxelMode&&(v.gcodeProcessor.voxelWidth=this.voxelWidth,v.gcodeProcessor.voxelHeight=this.voxelHeight),v.gcodeProcessor.updateMinFeedColor(this.minFeedColor),v.gcodeProcessor.updateMaxFeedColor(this.maxFeedColor),v.gcodeProcessor.updateColorRate(this.minFeedRate,this.maxFeedRate),v.setZClipPlane(1e6,-1e6),v.setBackgroundColor(this.backgroundColor),v.setProgressColor(this.progressColor),v.bed.setBedColor(this.gridColor),v.gcodeProcessor.useSpecularColor(this.specular),v.toggleTravels(this.travelMoves),v.gcodeProcessor.setColorMode(this.renderMode),v.gcodeProcessor.updateForceWireMode(this.lineMode),v.gcodeProcessor.setVoxelMode(this.voxelMode),v.updateRenderQuality(this.renderQuality),v.gcodeProcessor.useHighQualityExtrusion(this.hqRender),v.gcodeProcessor.setAlpha(this.transparency),v.gcodeProcessor.resetTools(),v.gcodeProcessor.treatG1Extrusion=this.g1AsExtrusion,v.gcodeProcessor.perimeterOnly=this.perimeterOnly,console.log(this.perimeterOnly),this.g1AsExtrusion&&v.gcodeProcessor.updateForceWireMode(!0);for(let e=0;e<this.tools.length;e++){const t=this.tools[e];v.gcodeProcessor.addTool(t.color,t.diameter,t.toolType),v.gcodeProcessor.tools[e].toolType=t.toolType}}resetCamera(){v.resetCamera()}unload(){v.clearScene(!0),this.liveTracking=!1}};m.reloadRequired=!1,m.scrubPlaying=!1,m=h=Object(n["a"])([a["a"]],m);var g=m,b=o("bc3a"),f=o.n(b),w=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{ref:"view",on:{mouseup:e.mouseUp}})},y=[],x=o("02d1"),C=o("5070"),k=o("e1ea");let P=class extends a["g"]{constructor(){super(...arguments),this.document="",this.isSimulating=!1,this.view=void 0}mounted(){this.view=new x["c"]({doc:this.document,extensions:[C["a"],k["f"].readOnly.of(!0)],parent:this.$refs["view"]})}mouseUp(){if(this.view){let e=this.view.state.doc.lineAt(this.view.state.selection.ranges[0].from);this.$emit("update:currentline",e.to),this.view.contentDOM.blur(),this.$emit("got-focus")}}documentUpdated(){this.view&&this.view.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:this.document}})}currentlineUpdated(e){if(this.view){var t=this.view.state.doc.lineAt(e);this.view.dispatch({selection:{anchor:t.from,head:t.from},scrollIntoView:!0})}}};Object(n["a"])([Object(a["e"])("currentline")],P.prototype,"currentLineNumber",void 0),Object(n["a"])([Object(a["d"])()],P.prototype,"document",void 0),Object(n["a"])([Object(a["d"])()],P.prototype,"isSimulating",void 0),Object(n["a"])([Object(a["h"])("document")],P.prototype,"documentUpdated",null),Object(n["a"])([Object(a["h"])("currentline")],P.prototype,"currentlineUpdated",null),P=Object(n["a"])([Object(a["a"])({})],P);var _=P,O=_,T=(o("a34b"),o("2877")),F=Object(T["a"])(O,w,y,!1,null,"00d865fc",null),$=F.exports;let S,j=class extends(Object(a["b"])(g)){constructor(){super(...arguments),this.progressPercent=0,this.message="",this.scrubPosition=0,this.scrubPlaying=!1,this.scrubSpeed=1,this.scrubInterval=-1,this.scrubFileSize=0,this.gcodeLines="",this.fileData="",this.gcodeLineNumber=0}async mounted(){this.$eventHub.$on("trackCurrentJob",()=>{this.trackCurrentJob()}),this.$eventHub.$on("disconnect",()=>{this.disconnect()}),this.$eventHub.$on("openLocalFile",async e=>{await this.openLocalFile(e)}),this.$eventHub.$on("LoadBenchy",async()=>{await this.OpenBenchy()}),this.$eventHub.$on("reloadComplete",()=>{this.scrubFileSize>0&&!this.scrubPlaying&&(S.gcodeProcessor.updateFilePosition(this.scrubPosition),this.gcodeLines=S.getGCodeLine(),this.gcodeLineNumber=S.getGCodeLineNumber())}),S||(S=new d["b"](this.viewercanvas),this.setGCodeViewer(S),await S.init(),S.setCursorVisiblity(!0),window.onresize=()=>{S.resize()},S.gcodeProcessor.loadingProgressCallback=this.updatePercent,S.gcodeProcessor.g1AsExtrusion=this.g1AsExtrusion,S.lastLoadFailed()&&(this.renderQuality=1,S.clearLoadFlag()))}beforeDestroy(){this.$eventHub.$off("trackCurrentJob"),this.$eventHub.$off("disconnect"),this.$eventHub.$off("openLocalFile"),this.$eventHub.$off("LoadBenchy"),this.$eventHub.$off("reloadComplete")}get cursorPosition(){return this.$store.state.printer.motion}get buildVolume(){return this.$store.state.printer.buildVolume}get currentJob(){return this.$store.state.printer.job.fileName}get currentFilePosition(){var e,t;return null!==(e=null===(t=this.$store.state.printer.job)||void 0===t?void 0:t.filePosition)&&void 0!==e?e:0}currentFilePositionUpdated(e){this.liveTracking&&(S.gcodeProcessor.updateFilePosition(e-this.fileOffset),this.gcodeLines=S.getGCodeLine(),this.gcodeLineNumber=S.getGCodeLineNumber())}get viewerState(){return this.$store.state.viewer}cursorPositionChanged(e){var t;null===(t=S)||void 0===t||t.updateToolPosition(e)}buildVolumeChanged(e){for(var t in e){let r=e[t];if("XYZ".includes(r.axes)){var o=r.axes.toLowerCase();S.bed.buildVolume[o].min=r.min,S.bed.buildVolume[o].max=r.max}}S.bed.commitBedSize(),S.reload()}updatePercent(e,t){this.progressPercent=100*e,this.message=t}async trackCurrentJob(){if(this.currentJob){this.showProgress=!0,this.currentFileName=this.currentJob;let e=await this.download(this.currentJob,this.updatePercent);e&&(this.progressPercent=0,this.beforeRender(),await S.processFile(e),this.fileData=S.fileData,S.gcodeProcessor.forceRedraw(),this.scrubFileSize=S.fileSize,this.liveTracking=!0,this.showProgress=!1),this.showProgress=!1}}async OpenBenchy(){this.showProgress=!0,this.currentFileName="benchy_color.gcode";let e=await f.a.get("./benchy_color.gcode",{onDownloadProgress:e=>{const t=Math.round(100*e.loaded/e.total)/100;this.updatePercent(t,"Downloading Benchy")}}),t=e.data;this.scrubFileSize=t.length,S.gcodeProcessor.updateFilePosition(t.length),this.beforeRender(),await S.processFile(t),this.fileData=S.fileData,this.showProgress=!1}async openLocalFile(e){if(!e)return;this.unload();const t=new FileReader;this.showProgress=!0,this.liveTracking=!1,this.currentFileName=""+e.name,t.addEventListener("load",async e=>{var t;const o=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.result;this.beforeRender(),await S.processFile(o),this.fileData=S.fileData,this.scrubFileSize=S.fileSize,this.showProgress=!1}),t.readAsText(e)}disconnect(){this.liveTracking=!1,S.clearScene(!0)}fastForward(){this.scrubPlaying=!1,this.scrubPosition=this.scrubFileSize}scrubPositionChanged(e){this.liveTracking||(S.gcodeProcessor.updateFilePosition(e),S.simulateToolPosition(),this.gcodeLines=S.getGCodeLine(),this.gcodeLineNumber=S.getGCodeLineNumber())}scrubPlayingChanaged(e){e?(-1!=this.scrubInterval&&clearInterval(this.scrubInterval),this.scrubPlaying=!0,this.scrubPosition>=this.scrubFileSize&&(this.scrubPosition=0),S.gcodeProcessor.updateFilePosition(this.scrubPosition-3e4),this.gcodeLines=S.getGCodeLine(),this.gcodeLineNumber=S.getGCodeLineNumber(),this.scrubInterval=setInterval(()=>{this.scrubPosition+=100*this.scrubSpeed,S.gcodeProcessor.updateFilePosition(this.scrubPosition),S.simulateToolPosition(),this.gcodeLines=S.getGCodeLine(),this.gcodeLineNumber=S.getGCodeLineNumber(),(this.liveTracking||this.scrubPosition>=this.scrubFileSize)&&(this.scrubPlaying=!1)},200)):(this.scrubInterval>-1&&clearInterval(this.scrubInterval),g.scrubPlaying=!1,this.scrubInterval=-1)}dragOver(e){var t,o,r;(null!==(t=null===(o=e.dataTransfer)||void 0===o?void 0:o.files.length)&&void 0!==t?t:-1)>0&&(null===(r=e.dataTransfer)||void 0===r||r.files[0])}dragLeave(e){}async drop(e){var t,o;if((null!==(t=null===(o=e.dataTransfer)||void 0===o?void 0:o.files.length)&&void 0!==t?t:-1)>0){var r;let t=null===(r=e.dataTransfer)||void 0===r?void 0:r.files[0];t&&await this.openLocalFile(t)}}resetFocus(){console.log("Test")}};Object(n["a"])([Object(a["f"])("viewercanvas")],j.prototype,"viewercanvas",void 0),Object(n["a"])([Object(a["f"])("playButton")],j.prototype,"playButton",void 0),Object(n["a"])([Object(a["h"])("currentFilePosition")],j.prototype,"currentFilePositionUpdated",null),Object(n["a"])([Object(a["h"])("cursorPosition")],j.prototype,"cursorPositionChanged",null),Object(n["a"])([Object(a["h"])("buildVolume",{deep:!0})],j.prototype,"buildVolumeChanged",null),Object(n["a"])([Object(a["h"])("scrubPosition")],j.prototype,"scrubPositionChanged",null),Object(n["a"])([Object(a["h"])("scrubPlaying")],j.prototype,"scrubPlayingChanaged",null),j=Object(n["a"])([Object(a["a"])({components:{CodeStream:$}})],j);var M=j,V=M,I=(o("fc1e"),o("6544")),A=o.n(I),R=o("8336"),D=o("a609"),N=o("62ad"),E=o("132d"),L=o("8e36"),B=o("0fd9"),q=o("ba0d"),H=Object(T["a"])(V,l,c,!1,null,"b8e2673c",null),G=H.exports;A()(H,{VBtn:R["a"],VBtnToggle:D["a"],VCol:N["a"],VIcon:E["a"],VProgressLinear:L["a"],VRow:B["a"],VSlider:q["a"]});var Q,z=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{"max-width":"425"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("v-card",[r("v-form",{on:{submit:function(t){return t.preventDefault(),e.connect.apply(null,arguments)}}},[r("v-card-title",[e._v("Connect To...")]),r("v-card-text",[r("v-row",[r("v-col",{directives:[{name:"show",rawName:"v-show",value:e.error.length>0,expression:"error.length > 0"}],attrs:{cols:"12"}},[e._v(" "+e._s(e.error)+" ")]),r("v-col",{attrs:{cols:"12"}},[r("v-btn-toggle",{attrs:{mandatory:"",dense:""},model:{value:e.connectionType,callback:function(t){e.connectionType=t},expression:"connectionType"}},[r("v-btn",[r("v-img",{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o("f6cf")}}),e._v(" RRF/Duet")],1),r("v-btn",[r("v-img",{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o("c0c2")}}),e._v(" Klipper")],1),r("v-btn",[r("v-img",{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o("dcc2")}}),e._v(" OctoPrint"),r("br"),e._v("(Beta)")],1)],1)],1),r("v-col",{attrs:{cols:"12"}},[r("v-text-field",{attrs:{hint:"Address","persistent-hint":!0},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:0===e.connectionType,expression:"connectionType === 0"}],attrs:{hint:"Password (Optional)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:1===e.connectionType,expression:"connectionType === 1"}],attrs:{hint:"API Key (Optional)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),r("v-text-field",{directives:[{name:"show",rawName:"v-show",value:2===e.connectionType,expression:"connectionType === 2"}],attrs:{hint:"API Key (Required)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),r("v-col",{attrs:{cols:"12"}},[r("b",[e._v("NOTES")]),0===e.connectionType?r("div",{staticClass:"notes"},[e._v(" Depending on if you connect Standalone or SBC you may have to set M586 C param to allow CORS. "),r("br"),e._v(" Example "),r("i",[e._v('M586 C"*"')]),e._v(" Use at your own risk. "),r("a",{attrs:{href:"https://duet3d.dozuki.com/Wiki/Gcode#Section_M586_Configure_network_protocols",target:"_blank"}},[e._v("https://duet3d.dozuki.com/Wiki/Gcode#Section_M586_Configure_network_protocols")])]):e._e(),1===e.connectionType?r("div",[e._v(" Depending on your configuration you may need to supply an api key for connection. "),r("br"),e._v(" Instructions are available here "),r("a",{attrs:{href:"https://moonraker.readthedocs.io/en/latest/installation/#retreiving-the-api-key",target:"_blank"}},[e._v("https://moonraker.readthedocs.io/en/latest/installation/#retreiving-the-api-key")]),e._v(" under "),r("b",[e._v("Retreiving the API Key")]),e._v(" You may have to add http://www.sindarius.com to the cors_domains in moonraker.conf ")]):e._e(),2===e.connectionType?r("div",[r("strong",[e._v("OctoPrint interface is still a work in progress. This may or may not function.")]),r("br"),e._v(" API Key is REQUIRED to make a connection. Go here to get more information about generating an API key. "),r("a",{attrs:{href:"https://docs.octoprint.org/en/master/bundledplugins/appkeys.html?highlight=api",target:"_blank"}},[e._v("https://docs.octoprint.org/en/master/bundledplugins/appkeys.html?highlight=api")])]):e._e()])],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{loading:e.busy,color:"info",type:"submit"}},[e._v("Connect")]),r("v-btn",{attrs:{disabled:e.busy,color:"error"},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1)],1)},W=[];class J{constructor(e,t){this.address="",this.connectionType=Q.unknown,this.address=e,this.connectionType=t}}(function(e){e[e["rrf"]=0]="rrf",e[e["klipper"]=1]="klipper",e[e["octoprint"]=2]="octoprint",e[e["unknown"]=3]="unknown"})(Q||(Q={}));class U{constructor(e){this.protocol="http",this.protocolWS="ws",this.address="",this.sessionKey="",this.password="reprap",this.connected=!1,this.connectionType=Q.unknown,this.store=e}async connect(e,t="reprap",o="http"){}request(){}disconnect(){var e,t;this.connected=!1,null===(e=this.store)||void 0===e||e.commit("printer/clear",{}),null===(t=this.store)||void 0===t||t.commit("connections/clear",{})}timeToStr(e){let t="";return t+=e.getFullYear()+"-",t+=e.getMonth()+1+"-",t+=e.getDate()+"T",t+=e.getHours()+":",t+=e.getMinutes()+":",t+=e.getSeconds(),t}async downloadFile(e,t){return""}}class K extends U{constructor(e){super(e),this.pollInterval=-1,this.connectionType=Q.rrf}async connect(e,t="reprap",o="http"){-1==this.pollInterval&&this.disconnect(),this.protocol=o,this.protocolWS="http"==o?"ws":"wss",this.address=e,this.password=t;const r=await f.a.get(`${o}://${this.address}/rr_connect?password=${this.password}`,{responseType:"text"});200==r.status&&(this.connected=!0,this.poll())}async poll(){if(!this.connected||null===this.store)return;const e=await f.a.get(`${this.protocol}://${this.address}/rr_model?flags=d99fv`);this.store.commit("printer/updateDuetModelData",e.data.result);const t=await f.a.get(`${this.protocol}://${this.address}/rr_model?key=move&flags=d99vn`);this.store.commit("printer/updateDuetModelData",{move:t.data.result});const o=await f.a.get(`${this.protocol}://${this.address}/rr_model?key=job&flags=d99vn`);this.store.commit("printer/updateDuetModelData",{job:o.data.result});this.pollInterval=setInterval(async()=>{var e,t;const o=await f.a.get(`${this.protocol}://${this.address}/rr_model?flags=d99fn`);null===(e=this.store)||void 0===e||e.commit("printer/updateDuetModelData",o.data.result);const r=await f.a.get(`${this.protocol}://${this.address}/rr_model?key=job&flags=d99vn`);null===(t=this.store)||void 0===t||t.commit("printer/updateDuetModelData",{job:r.data.result})},250)}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}timeToStr(e){let t="";return t+=e.getFullYear()+"-",t+=e.getMonth()+1+"-",t+=e.getDate()+"T",t+=e.getHours()+":",t+=e.getMinutes()+":",t+=e.getSeconds(),t}async downloadFile(e,t){const o=encodeURIComponent(e),r=await f.a.get(`${this.protocol}://${this.address}/rr_download?name=${o}`,{onDownloadProgress:o=>{const r=Math.round(100*o.loaded/o.total)/100;t(r,"Downloading "+e)}});return r.data}}class X extends U{constructor(e){super(e),this.connectionType=Q.rrf}async connect(e,t="reprap",o="http"){this.protocol=o,this.protocolWS="http"==o?"ws":"wss",this.address=e,this.password=t;try{const e=await f.a.get(`${o}://${this.address}/machine/connect`);200==e.status&&(this.connected=!0)}catch{}try{return new Promise((e,t)=>{this.webSocket=new WebSocket(`${this.protocolWS}://${this.address}/machine`),this.webSocket.onmessage=t=>{var o,r;null===(o=this.store)||void 0===o||o.commit("printer/updateDuetModelData",JSON.parse(t.data)),null===(r=this.webSocket)||void 0===r||r.send("OK\n"),e()},this.webSocket.onopen=t=>{this.connected=!0,e()},this.webSocket.onerror=t=>{this.connected=!1,e()}})}catch{this.connected=!1}}disconnect(){var e;null===(e=this.webSocket)||void 0===e||e.close(),super.disconnect()}async downloadFile(e,t){const o=encodeURIComponent(e),r=await f.a.get(`${this.protocol}://${this.address}/machine/file/${o}`,{onDownloadProgress:o=>{const r=Math.round(100*o.loaded/o.total)/100;t(r,"Downloading "+e)}});return r.data}}class Y extends U{constructor(e){super(e),this.connectionType=Q.klipper,this.connection_id="",this.pollInterval=-1,this.apiHeader={}}async connect(e,t="",o="http"){var r;this.address=e,this.password=t;let s=t;this.apiHeader={};if(this.address.includes(":")||(this.address+=":7125"),""===s){const e=await f.a.get(`http://${this.address}/access/oneshot_token`,{headers:this.apiHeader,data:{}}),t=e.data.result,o=await f.a.get(`http://${this.address}/access/api_key?token=${t}`);s=o.data.result}s&&(this.apiHeader={"Content-Type":"text/plain","X-Api-Key":s,Accept:"text/plain"});const i=await f.a.get(`${this.protocol}://${this.address}/printer/objects/query?configfile&webhooks&motion_report&virtual_sdcard&display_status`,{headers:this.apiHeader,data:{}});return null===(r=this.store)||void 0===r||r.commit("printer/updateKlipperModelData",i.data.result.status),new Promise(e=>{this.pollInterval=setInterval(async()=>{var e;const t=await f.a.get(`${this.protocol}://${this.address}/printer/objects/query?motion_report&virtual_sdcard&display_status`,{headers:this.apiHeader,data:{}});null===(e=this.store)||void 0===e||e.commit("printer/updateKlipperModelData",t.data.result.status)},250),this.connected=!0,e()})}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}async downloadFile(e,t){e=e.replace("/home/pi/gcode_files","");const o=await f.a.get(`${this.protocol}://${this.address}/server/files/gcodes${e}`,{headers:this.apiHeader,responseType:"text",data:{},onDownloadProgress:o=>{const r=Math.round(100*o.loaded/o.total)/100;t(r,"Downloading "+e)}});return o.data}}class Z extends U{constructor(e){super(e),this.connectionType=Q.octoprint,this.connection_id="",this.pollInterval=-1,this.apiHeader={},this.waitingResponse=!1}async connect(e,t="",o="http"){var r;this.address=e,this.password=t;const s=t;this.apiHeader={};this.address.includes(":"),s&&(this.apiHeader={"Content-Type":"text/plain","X-Api-Key":s,Accept:"text/plain"});const i=await f.a.get(`${this.protocol}://${this.address}/api/printerprofiles`,{headers:this.apiHeader,data:{}});return null===(r=this.store)||void 0===r||r.commit("printer/updateOctoPrintModelData",i.data),new Promise(e=>{this.startPolling(),this.connected=!0,e()})}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}stopPolling(){clearInterval(this.pollInterval)}startPolling(){this.pollInterval=setInterval(async()=>{if(!this.waitingResponse)try{var e;this.waitingResponse=!0;const t=await f.a.get(`${this.protocol}://${this.address}/api/job`,{headers:this.apiHeader,data:{},timeout:400});null===(e=this.store)||void 0===e||e.commit("printer/updateOctoPrintModelData",t.data)}catch{}finally{this.waitingResponse=!1}},500)}async downloadFile(e,t){this.stopPolling();try{const o=await f.a.get(`${this.protocol}://${this.address}/api/files/local/${e}`,{headers:this.apiHeader,data:{}}),r=o.data.refs.download,s=await f.a.get(""+r,{headers:this.apiHeader,responseType:"text",data:{},onDownloadProgress:o=>{const r=Math.round(100*o.loaded/o.total)/100;t(r,"Downloading "+e)}});return s.data}catch(o){console.error(o)}finally{this.startPolling()}return Promise.reject("Could not download file "+e)}}let ee=class extends r["a"]{constructor(){super(...arguments),this.address="",this.connectionType=Q.rrf,this.password="",this.error="",this.busy=!1}mounted(){try{let e=this.$store.getters["connections/getLastConnection"];e&&(this.address=e.address,this.connectionType=e.connectionType)}catch(e){}}get isConnected(){return this.$store.getters["connections/isConnected"]}get currentConnection(){return this.$store.state.connection}async connect(){if(!this.isConnected&&!this.busy)try{switch(this.busy=!0,this.connectionType){case 0:try{this.connector=new K(this.$store),await this.connector.connect(this.address,this.password)}catch{}try{this.connector.connected||(this.connector=new X(this.$store),await this.connector.connect(this.address))}catch{}break;case 1:try{this.connector=new Y(this.$store),await this.connector.connect(this.address,this.password)}catch{}break;case 2:try{if(""===this.password||"ENTER API KEY"===this.password)return this.password="ENTER API KEY",void(this.busy=!1);this.connector=new Z(this.$store),await this.connector.connect(this.address,this.password)}catch{}break}if(this.busy=!1,!this.connector.connected)return void(this.error="Unable to connect to "+this.address);this.$store.commit("connections/setConnection",this.connector),this.showDialog=!1}finally{this.busy=!1}}cancel(){this.showDialog=!1}};Object(n["a"])([Object(a["e"])("show",{type:Boolean})],ee.prototype,"showDialog",void 0),ee=Object(n["a"])([a["a"]],ee);var te=ee,oe=te,re=(o("6b47"),o("b0af")),se=o("99d9"),ie=o("169a"),ne=o("4bd4"),ae=o("adda"),le=o("2fa4"),ce=o("8654"),de=Object(T["a"])(oe,z,W,!1,null,"1148d0f2",null),ue=de.exports;A()(de,{VBtn:R["a"],VBtnToggle:D["a"],VCard:re["a"],VCardActions:se["a"],VCardText:se["b"],VCardTitle:se["c"],VCol:N["a"],VDialog:ie["a"],VForm:ne["a"],VImg:ae["a"],VRow:B["a"],VSpacer:le["a"],VTextField:ce["a"]});var he=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"div-style"},[""===e.getConnectionIcon?o("span",{class:e.getLabelStyle},[e._v("Sindarius G-Code Viewer")]):e._e(),o("span",[o("v-img",{staticClass:"align-text mr-3",attrs:{contain:!0,width:"45",height:"45",src:e.getConnectionIcon}}),o("span",{class:e.getLabelStyle},[e._v(e._s(e.address)+" "+e._s(e.status))])],1)])},pe=[];let ve=class extends(Object(a["b"])(p)){get getConnectionIcon(){try{var e;switch(null===(e=this.$store.state.connections.connection)||void 0===e?void 0:e.connectionType){case Q.rrf:return o("f6cf");case Q.klipper:return o("c0c2");case Q.octoprint:return o("dcc2")}}catch{}return""}get getLabelStyle(){return this.isMobile?"address-text-sm":"address-text"}get address(){var e,t;return null!==(e=null===(t=this.$store.state.connections.connection)||void 0===t?void 0:t.address)&&void 0!==e?e:""}get status(){return""!==this.address?" -- "+this.$store.state.printer.status:""}};ve=Object(n["a"])([a["a"]],ve);var me=ve,ge=me,be=(o("8d62"),Object(T["a"])(ge,he,pe,!1,null,"0d62b58a",null)),fe=be.exports;A()(be,{VImg:ae["a"]});var we=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-btn-toggle",{staticClass:"toggle-align",attrs:{dense:"",multiple:""},model:{value:e.selectedButton,callback:function(t){e.selectedButton=t},expression:"selectedButton"}},[o("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.openlocal"),icon:"mdi-folder-outline"},on:{click:e.showFileSelect}}),o("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.resetCamera"),icon:"mdi-camera-outline"},on:{click:e.resetCamera}}),o("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.toolstitle"),icon:"mdi-printer-3d-nozzle-outline"},on:{click:function(t){e.showToolsDialog=!0}}}),o("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.reloadViewer"),icon:"mdi-reload",color:e.reloadRequiredColor},on:{click:e.reloadViewer}}),o("ToolbarPopover",{attrs:{color:e.qualityColor,icon:e.qualityIcon},scopedSlots:e._u([{key:"header",fn:function(){return[o("v-btn",{on:{click:e.reloadViewer}},[o("v-icon",{attrs:{size:"35"}},[e._v("mdi-reload")])],1),o("v-spacer"),e._v(" Quality ")]},proxy:!0},{key:"content",fn:function(){return[o("RenderQuality"),o("RenderMode")]},proxy:!0}])}),o("ToolbarPopover",{attrs:{icon:"mdi-palette"},scopedSlots:e._u([{key:"header",fn:function(){return[o("v-btn",{on:{click:e.reloadViewer}},[o("v-icon",{attrs:{size:"35"}},[e._v("mdi-reload")])],1),o("v-spacer"),e._v(" Colors ")]},proxy:!0},{key:"content",fn:function(){return[o("RenderColors")]},proxy:!0}])}),e.canLiveTrack?o("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.liveTrack"),icon:"mdi-vhs",color:"warning"},on:{click:e.liveTrack}}):e._e()],1),o("tools-dialog",{attrs:{show:e.showToolsDialog},on:{"update:show":function(t){e.showToolsDialog=t}}}),o("input",{ref:"fileInput",attrs:{type:"file",accept:".g,.gcode,.gc,.gco,.nc,.ngc,.tap",hidden:""},on:{change:e.fileSelected}})],1)},ye=[],xe=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[o("v-card",[o("v-card-title",[o("strong",[e._v(" "+e._s(e.$t("viewer.tools.title")))]),o("v-spacer"),o("div",{staticClass:"tool-quantity"},[o("v-combobox",{attrs:{type:"number",hint:e.$t("viewer.tools.quantity"),"persistent-hint":"",rules:[e.numberRule],items:e.toolNumbers},model:{value:e.toolQty,callback:function(t){e.toolQty=t},expression:"toolQty"}})],1)],1),o("v-card-text",[o("v-row",e._l(e.editTools,(function(e,t){return o("v-col",{key:e.id,attrs:{cols:"12",md:"4"}},[o("ToolCard",{attrs:{tool:e,toolIndex:t}})],1)})),1)],1),o("v-card-actions",[o("v-btn",{attrs:{color:"warning"},on:{click:e.reset}},[e._v(" "+e._s(e.$t("default.reset"))+" ")]),o("v-btn",{attrs:{color:"warning"},on:{click:e.loadDefault}},[e._v(" "+e._s(e.$t("default.default"))+" ")]),o("v-spacer"),o("v-btn",{attrs:{color:"info"},on:{click:e.save}},[e._v(" "+e._s(e.$t("default.save"))+" ")]),o("v-btn",{attrs:{color:"error"},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("default.cancel"))+" ")])],1)],1)],1)},Ce=[],ke=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-card",{attrs:{outlined:"",rounded:"10"}},[o("v-card-title",[o("strong",[e._v(e._s(e.$t(""))+" #"+e._s(e.toolIndex))])]),o("v-card-text",[o("color-picker",{model:{value:e.toolColor,callback:function(t){e.toolColor=t},expression:"toolColor"}}),o("v-select",{attrs:{hint:"Type","persistent-hint":"",items:e.toolTypes},model:{value:e.toolType,callback:function(t){e.toolType=t},expression:"toolType"}}),o("v-text-field",{attrs:{hint:"Diameter",type:"number","persistent-hint":""},model:{value:e.toolDiameter,callback:function(t){e.toolDiameter=t},expression:"toolDiameter"}})],1)],1)},Pe=[],_e=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-row",{attrs:{justify:"center",align:"center"}},[o("v-col",{staticClass:"shrink",style:[e.backgroundColorStyle]},[o("v-text-field",{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",solo:""},on:{blur:function(t){return e.updateValue(e.internalTextColor)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateValue(e.internalTextColor)}},scopedSlots:e._u([{key:"append",fn:function(){return[o("v-menu",{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("div",e._g({style:e.swatchStyle},r))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[o("v-card",[o("v-card-text",{staticClass:"pa-0"},[o("v-color-picker",{staticClass:"index-placement",attrs:{flat:""},on:{input:function(t){return e.updateValue(e.color)}},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)],1)]},proxy:!0}]),model:{value:e.internalTextColor,callback:function(t){e.internalTextColor=t},expression:"internalTextColor"}})],1)],1)},Oe=[];let Te=class extends r["a"]{constructor(){super(...arguments),this.internalTextColor="#000000",this.color="#000000",this.menu=!1}get backgroundColorStyle(){return{minWidth:"220px",backgroundColor:this.color}}get swatchStyle(){const{color:e,menu:t}=this;return{backgroundColor:e,cursor:"pointer",height:"30px",width:"30px",borderRadius:t?"50%":"4px",transition:"border-radius 200ms ease-in-out"}}mounted(){this.color=this.editcolormodel,this.internalTextColor=this.editcolormodel}updateValue(e){this.color=e,e.startsWith("#")||(this.color="#"+e),this.color=this.color.toUpperCase().padEnd(7,"0").substring(0,7),this.internalTextColor=this.color,this.$emit("change",this.color)}editColorChanged(e){this.color=e,this.internalTextColor=e}};Object(n["a"])([Object(a["c"])("editorcolor","change")],Te.prototype,"editcolormodel",void 0),Object(n["a"])([Object(a["h"])("editcolor")],Te.prototype,"editColorChanged",null),Te=Object(n["a"])([a["a"]],Te);var Fe=Te,$e=Fe,Se=(o("aab3"),o("03a4")),je=o("e449"),Me=Object(T["a"])($e,_e,Oe,!1,null,"8c8debb0",null),Ve=Me.exports;A()(Me,{VCard:re["a"],VCardText:se["b"],VCol:N["a"],VColorPicker:Se["a"],VMenu:je["a"],VRow:B["a"],VTextField:ce["a"]});let Ie=class extends g{constructor(){super(...arguments),this.toolTypes=["Extruder","Endmill"]}get toolColor(){return this.tool.color}set toolColor(e){this.tool.color=e}get toolType(){return this.tool.toolType}set toolType(e){this.tool.toolType=e}get toolDiameter(){return this.tool.diameter}set toolDiameter(e){isNaN(e)?this.tool.diameter=.4:this.tool.diameter=Number(e)}};Object(n["a"])([Object(a["d"])()],Ie.prototype,"tool",void 0),Object(n["a"])([Object(a["d"])()],Ie.prototype,"toolIndex",void 0),Ie=Object(n["a"])([Object(a["a"])({components:{ColorPicker:Ve}})],Ie);var Ae=Ie,Re=Ae,De=o("b974"),Ne=Object(T["a"])(Re,ke,Pe,!1,null,"467362b4",null),Ee=Ne.exports;A()(Ne,{VCard:re["a"],VCardText:se["b"],VCardTitle:se["c"],VSelect:De["a"],VTextField:ce["a"]});class Le{constructor(e="#00ff00",t=.4,o=d["a"].Extruder){this.id=0,this.id=Math.random(),this.color=e,this.diameter=t,this.toolType=o}}const Be={updateCurrentFile(e,t){r["a"].set(e,"currentFileName",t)},liveTracking(e,t){r["a"].set(e,"liveTracking",t)},saveTools(e,t){r["a"].set(e,"tools",t),localStorage.setItem("tools",JSON.stringify(t))},showProgress(e,t){r["a"].set(e,"showProgress",t)},reloadRequired(e,t){r["a"].set(e,"reloadRequired",t)},renderQuality(e,t){localStorage.setItem("renderQuality",""+t),r["a"].set(e,"renderQuality",t)},renderMode(e,t){localStorage.setItem("renderMode",""+t),r["a"].set(e,"renderMode",t)},lineMode(e,t){localStorage.setItem("lineMode",""+t),r["a"].set(e,"lineMode",t),t&&(localStorage.setItem("voxelMode","false"),r["a"].set(e,"voxelMode",!1))},voxelMode(e,t){localStorage.setItem("voxelMode",""+t),r["a"].set(e,"voxelMode",t),t&&(localStorage.setItem("lineMode","false"),r["a"].set(e,"lineMode",!1))},voxelWidth(e,t){t<0&&(t=1),localStorage.setItem("voxelWidth",""+t),r["a"].set(e,"voxelWidth",t)},voxelHeight(e,t){t<0&&(t=1),localStorage.setItem("voxelHeight",""+t),r["a"].set(e,"voxelHeight",t)},travelMoves(e,t){localStorage.setItem("travelMoves",""+t),r["a"].set(e,"travelMoves",t)},hqRender(e,t){localStorage.setItem("hqRender",""+t),r["a"].set(e,"hqRender",t)},specular(e,t){localStorage.setItem("specular",""+t),r["a"].set(e,"specular",t)},minfeedrate(e,t){t<0&&(t=1),localStorage.setItem("minfeedrate",""+t),r["a"].set(e,"minfeedrate",t)},maxfeedrate(e,t){t<0&&(t=1),localStorage.setItem("maxfeedrate",""+t),r["a"].set(e,"maxfeedrate",t)},minfeedcolor(e,t){localStorage.setItem("minfeedcolor",""+t),r["a"].set(e,"minfeedcolor",t)},maxfeedcolor(e,t){localStorage.setItem("maxfeedcolor",""+t),r["a"].set(e,"maxfeedcolor",t)},transparency(e,t){localStorage.setItem("transparency",""+t),r["a"].set(e,"transparency",t)},progressColor(e,t){localStorage.setItem("progressColor",t),r["a"].set(e,"progressColor",t)},backgroundColor(e,t){localStorage.setItem("backgroundColor",t),r["a"].set(e,"backgroundColor",t)},gridColor(e,t){localStorage.setItem("gridColor",t),r["a"].set(e,"gridColor",t)},fileOffset(e,t){localStorage.setItem("fileOffset",""+t),r["a"].set(e,"fileOffset",t)},g1AsExtrusion(e,t){localStorage.setItem("g1AsExtrusion",""+t),r["a"].set(e,"g1AsExtrusion",t)},showGCodeStream(e,t){localStorage.setItem("showGCodeStream",""+t),r["a"].set(e,"showGCodeStream",t)},perimeterOnly(e,t){localStorage.setItem("perimeterOnly",""+t),r["a"].set(e,"perimeterOnly",t)}};function qe(e,t){let o=e;if(null===o)try{const e=localStorage.getItem(t);o="true"==e}catch{o=!1}return o}function He(e,t,o=1){let r=e;if(null===r||-1===r){const e=localStorage.getItem(t);if(e){const t=Number(e);isNaN(t)||(r=t)}else r=o}return r}function Ge(e,t,o){let r=e;if(null===r)try{var s;const e=localStorage.getItem(t);if(null===e)return o;r=null!==(s=e.length>0)&&void 0!==s&&s?e:o}catch{r=o}return r}const Qe={renderQuality(e){let t=e.renderQuality;if(-1===t){const e=localStorage.getItem("renderQuality");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=3}return t},renderMode(e){let t=e.renderMode;if(-1===t){const e=localStorage.getItem("renderMode");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=0}return t},lineMode(e){return qe(e.lineMode,"lineMode")},voxelMode(e){return qe(e.voxelMode,"voxelMode")},voxelWidth(e){let t=e.voxelWidth;if(-1===t){const e=localStorage.getItem("voxelWidth");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=1}return t},voxelHeight(e){let t=e.voxelHeight;if(-1===t){const e=localStorage.getItem("voxelHeight");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=1}return t},travelMoves(e){let t=e.travelMoves;if(null===t)try{const e=localStorage.getItem("travelMoves");t="true"==e}catch{t=!1}return t},hqRender(e){return qe(e.hqRender,"hqRender")},specular(e){return qe(e.specular,"specular")},minfeedrate(e){return He(e.minfeedrate,"minfeedrate",10)},maxfeedrate(e){return He(e.maxfeedrate,"maxfeedrate",60)},minfeedcolor(e){return Ge(e.minfeedcolor,"minfeedcolor","#0000FF")},maxfeedcolor(e){return Ge(e.maxfeedcolor,"maxfeedcolor","#FF0000")},transparency(e){return qe(e.transparency,"transparency")},progressColor(e){return Ge(e.progressColor,"progressColor","#00FF00")},backgroundColor(e){return Ge(e.backgroundColor,"backgroundColor","#000000")},gridColor(e){return Ge(e.gridColor,"gridColor","#0000FF")},fileOffset(e){return He(e.fileOffset,"fileOffset",0)},g1AsExtrusion(e){return qe(e.g1AsExtrusion,"g1AsExtrusion")},showGCodeStream(e){return qe(e.showGCodeStream,"showGCodeStream")},perimeterOnly(e){return qe(e.perimeterOnly,"perimeterOnly")}},ze={},We=()=>{const e=localStorage.getItem("tools");if(e){const t=JSON.parse(e);if(0!==t.length)return t}return[new Le("#00FFFF",.4,d["a"].Extruder),new Le("#FF00FF",.4,d["a"].Extruder),new Le("#FFFF00",.4,d["a"].Extruder),new Le("#000000",.4,d["a"].Extruder),new Le("#FFFFFF",.4,d["a"].Extruder)]},Je=()=>[new Le("#00FFFF",.4,d["a"].Extruder),new Le("#FF00FF",.4,d["a"].Extruder),new Le("#FFFF00",.4,d["a"].Extruder),new Le("#000000",.4,d["a"].Extruder),new Le("#FFFFFF",.4,d["a"].Extruder)],Ue=()=>({currentFileName:null,liveTracking:!1,fileData:null,showProgress:!1,tools:We(),reloadRequired:!1,renderQuality:-1,renderMode:-1,lineMode:null,voxelMode:null,voxelWidth:-1,voxelHeight:-1,travelMoves:null,hqRender:null,specular:null,minfeedrate:null,minfeedcolor:null,maxfeedrate:null,maxfeedcolor:null,transparency:null,progressColor:null,backgroundColor:null,gridColor:null,fileOffset:null,g1AsExtrusion:!1,showGCodeStream:!0,perimeterOnly:!1}),Ke=Ue(),Xe={namespaced:!0,state:Ke,mutations:Be,getters:Qe,actions:ze};let Ye=class extends(Object(a["b"])(g)){constructor(){super(...arguments),this.editTools=[],this.toolQty=1,this.toolNumbers=[...Array(10).keys()].map(e=>e+1)}reset(){let e=We();this.editTools.splice(0,this.editTools.length),this.editTools.push(...JSON.parse(JSON.stringify(e))),this.editTools.forEach(e=>e.id=Math.random()),this.toolQty=this.editTools.length}mounted(){this.reset()}save(){this.$store.commit("viewer/saveTools",this.editTools),this.currentFileName&&(this.reloadRequired=!0),this.showDialog=!1}cancel(){this.showDialog=!1,this.reset()}numberRule(e){let t=parseInt(e);return!isNaN(t)&&t>=1&&t<=10||this.$t("viewer.tools.qtyerror")}loadDefault(){this.editTools.splice(0,this.editTools.length),this.editTools.push(...Je()),this.editTools.forEach(e=>e.id=Math.random()),this.toolQty=this.editTools.length}toolQtyUpdated(e){if(!0===this.numberRule(e))if(e>this.editTools.length){let t=e-this.editTools.length-1;for(let e=0;e<=t;e++)this.editTools.push(new Le)}else{let t=this.editTools.length-e-1;for(let e=0;e<=t;e++)this.editTools.pop()}}};Object(n["a"])([Object(a["e"])("show",{type:Boolean})],Ye.prototype,"showDialog",void 0),Object(n["a"])([Object(a["h"])("toolQty")],Ye.prototype,"toolQtyUpdated",null),Ye=Object(n["a"])([Object(a["a"])({components:{ToolCard:Ee}})],Ye);var Ze=Ye,et=Ze,tt=(o("9954"),o("2b5d")),ot=Object(T["a"])(et,xe,Ce,!1,null,"0ebac2ee",null),rt=ot.exports;A()(ot,{VBtn:R["a"],VCard:re["a"],VCardActions:se["a"],VCardText:se["b"],VCardTitle:se["c"],VCol:N["a"],VCombobox:tt["a"],VDialog:ie["a"],VRow:B["a"],VSpacer:le["a"]});var st=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("v-btn",e._g(e._b({on:{click:function(t){return t.stopPropagation(),e.clicked.apply(null,arguments)}}},"v-btn",e.size,!1),r),[o("v-icon",e._b({attrs:{color:e.color}},"v-icon",e.size,!1),[e._v(e._s(e.icon))])],1)]}}])},[o("span",{staticClass:"whitespace-line"},[e._v(e._s(e.title))])])},it=[];let nt=class extends r["a"]{clicked(){this.$emit("click")}get size(){const e={xs:"",sm:"medium",md:"",lg:"large",xl:"x-large"}[this.$vuetify.breakpoint.name];return e?{[e]:!0}:{}}};Object(n["a"])([Object(a["d"])()],nt.prototype,"icon",void 0),Object(n["a"])([Object(a["d"])()],nt.prototype,"title",void 0),Object(n["a"])([Object(a["d"])()],nt.prototype,"color",void 0),nt=Object(n["a"])([a["a"]],nt);var at=nt,lt=at,ct=(o("ac44"),o("3a2f")),dt=Object(T["a"])(lt,st,it,!1,null,"12070923",null),ut=dt.exports;A()(dt,{VBtn:R["a"],VIcon:E["a"],VTooltip:ct["a"]});var ht=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-menu",{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[o("v-btn",e._g(e._b({on:{click:function(t){t.stopPropagation(),e.menu=!e.menu}}},"v-btn",e.size,!1),r),[o("v-icon",e._b({attrs:{color:e.color}},"v-icon",e.size,!1),[e._v(" "+e._s(e.icon)+" ")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[o("v-card",{attrs:{outlined:"",shaped:"",elevation:"10"}},[o("v-card-title",[e._t("header"),o("v-spacer"),o("v-btn",{attrs:{color:"error"},on:{click:function(t){e.menu=!1}}},[o("v-icon",[e._v("mdi-close")])],1)],2),o("v-card-text",{staticClass:"overflow-y-auto card-overflow"},[e._t("content")],2)],1)],1)},pt=[];let vt=class extends r["a"]{constructor(){super(...arguments),this.menu=!1}get size(){const e={xs:"",sm:"medium",md:"",lg:"large",xl:"x-large"}[this.$vuetify.breakpoint.name];return e?{[e]:!0}:{}}};Object(n["a"])([Object(a["d"])()],vt.prototype,"icon",void 0),Object(n["a"])([Object(a["d"])()],vt.prototype,"title",void 0),Object(n["a"])([Object(a["d"])()],vt.prototype,"color",void 0),vt=Object(n["a"])([a["a"]],vt);var mt=vt,gt=mt,bt=(o("c0a0"),Object(T["a"])(gt,ht,pt,!1,null,"289d1d93",null)),ft=bt.exports;A()(bt,{VBtn:R["a"],VCard:re["a"],VCardText:se["b"],VCardTitle:se["c"],VIcon:E["a"],VMenu:je["a"],VSpacer:le["a"]});var wt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-select",{staticClass:"pa-0 mt-4",attrs:{dense:"",items:e.items,"item-text":"name","item-value":"value",label:"Quality","persistent-hint":"",hint:e.renderQualityWarning},model:{value:e.renderQuality,callback:function(t){e.renderQuality=t},expression:"renderQuality"}}),e.renderQuality>4?o("v-switch",{staticClass:"pa-0",attrs:{dense:"",label:e.$t("viewer.settings.hqrender")},model:{value:e.hqRender,callback:function(t){e.hqRender=t},expression:"hqRender"}}):e._e()],1)},yt=[];let xt=class extends(Object(a["b"])(g)){constructor(){super(...arguments),this.items=[{name:"Low",value:1},{name:"Medium",value:3},{name:"High",value:5},{name:"Max",value:6}]}get renderQualityWarning(){return 6===this.renderQuality?"Max quality ignores Force Line Mode ":""}};xt=Object(n["a"])([a["a"]],xt);var Ct=xt,kt=Ct,Pt=o("b73d"),_t=Object(T["a"])(kt,wt,yt,!1,null,"152f4d62",null),Ot=_t.exports;A()(_t,{VSelect:De["a"],VSwitch:Pt["a"]});var Tt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-select",{attrs:{items:e.items,"item-text":"name","item-value":"value",label:"Render Mode","persistent-hint":""},model:{value:e.renderMode,callback:function(t){e.renderMode=t},expression:"renderMode"}}),1===e.renderMode?o("v-row",{attrs:{dense:""}},[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{type:"number",label:e.$t("viewer.settings.minfeedrate")},model:{value:e.minFeedRate,callback:function(t){e.minFeedRate=t},expression:"minFeedRate"}})],1),o("v-col",{attrs:{cols:"6"}},[o("color-picker",{model:{value:e.minFeedColor,callback:function(t){e.minFeedColor=t},expression:"minFeedColor"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{type:"number",label:e.$t("viewer.settings.maxfeedrate")},model:{value:e.maxFeedRate,callback:function(t){e.maxFeedRate=t},expression:"maxFeedRate"}})],1),o("v-col",{attrs:{cols:"6"}},[o("color-picker",{model:{value:e.maxFeedColor,callback:function(t){e.maxFeedColor=t},expression:"maxFeedColor"}})],1)],1):e._e(),o("v-switch",{staticClass:"mt-1 mb-0",attrs:{dense:"",label:"Show Travel Moves"},model:{value:e.travelMoves,callback:function(t){e.travelMoves=t},expression:"travelMoves"}}),o("v-switch",{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.transparency")},model:{value:e.transparency,callback:function(t){e.transparency=t},expression:"transparency"}}),o("v-switch",{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.forceLineMode")},model:{value:e.lineMode,callback:function(t){e.lineMode=t},expression:"lineMode"}}),o("v-switch",{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.voxelMode")},model:{value:e.voxelMode,callback:function(t){e.voxelMode=t},expression:"voxelMode"}}),e.voxelMode?o("v-row",[o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{type:"number",label:e.$t("viewer.settings.voxelWidth")},model:{value:e.voxelWidth,callback:function(t){e.voxelWidth=t},expression:"voxelWidth"}})],1),o("v-col",{attrs:{cols:"6"}},[o("v-text-field",{attrs:{type:"number",label:e.$t("viewer.settings.voxelHeight")},model:{value:e.voxelHeight,callback:function(t){e.voxelHeight=t},expression:"voxelHeight"}})],1)],1):e._e(),o("v-switch",{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.useSpecular")},model:{value:e.specular,callback:function(t){e.specular=t},expression:"specular"}}),o("v-switch",{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.g1AsExtrusion")},model:{value:e.g1AsExtrusion,callback:function(t){e.g1AsExtrusion=t},expression:"g1AsExtrusion"}}),o("v-switch",{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.showGCodeStream")},model:{value:e.showGCodeStream,callback:function(t){e.showGCodeStream=t},expression:"showGCodeStream"}}),o("v-switch",{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.perimeterOnly")},model:{value:e.perimeterOnly,callback:function(t){e.perimeterOnly=t},expression:"perimeterOnly"}}),o("v-text-field",{attrs:{type:"number",dense:"",label:e.$t("viewer.settings.fileOffset"),hint:"Adjust if print appears faster than cursor"},model:{value:e.fileOffset,callback:function(t){e.fileOffset=t},expression:"fileOffset"}})],1)},Ft=[];let $t=class extends(Object(a["b"])(g)){constructor(){super(...arguments),this.items=[{name:"Color",value:0},{name:"Feed Rate",value:1},{name:"Feature",value:2}]}};$t=Object(n["a"])([Object(a["a"])({components:{ColorPicker:Ve}})],$t);var St=$t,jt=St,Mt=Object(T["a"])(jt,Tt,Ft,!1,null,"06f174b6",null),Vt=Mt.exports;A()(Mt,{VCol:N["a"],VRow:B["a"],VSelect:De["a"],VSwitch:Pt["a"],VTextField:ce["a"]});var It=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("v-simple-table",[o("tbody",[o("tr",[o("td",[e._v("Progress Color")]),o("td",[o("ColorPicker",{model:{value:e.progressColor,callback:function(t){e.progressColor=t},expression:"progressColor"}})],1)]),o("tr",[o("td",[e._v("Background Color")]),o("td",[o("ColorPicker",{model:{value:e.backgroundColor,callback:function(t){e.backgroundColor=t},expression:"backgroundColor"}})],1)]),o("tr",[o("td",[e._v("Grid Color")]),o("td",[o("ColorPicker",{model:{value:e.gridColor,callback:function(t){e.gridColor=t},expression:"gridColor"}})],1)])])])],1)},At=[];let Rt=class extends(Object(a["b"])(g)){};Rt=Object(n["a"])([Object(a["a"])({components:{ColorPicker:Ve}})],Rt);var Dt=Rt,Nt=Dt,Et=(o("bad7"),o("1f4f")),Lt=Object(T["a"])(Nt,It,At,!1,null,"03ebea79",null),Bt=Lt.exports;A()(Lt,{VSimpleTable:Et["a"]});let qt=class extends(Object(a["b"])(g)){constructor(){super(...arguments),this.showToolsDialog=!1,this.selectedButton=[]}showFileSelect(){this.fileInput.click()}fileSelected(e){this.$eventHub.$emit("openLocalFile",e.target.files[0])}liveTrack(){this.$eventHub.$emit("trackCurrentJob")}get reloadRequiredColor(){return this.$store.state.viewer.reloadRequired?"green":""}get qualityColor(){return this.renderQuality<2?"red":""}get qualityIcon(){return this.renderQuality<2?"mdi-speedometer-slow":this.renderQuality<5?"mdi-speedometer-medium":"mdi-speedometer"}selectedButtonUpdated(){this.selectedButton.length>0&&this.selectedButton.pop()}get canLiveTrack(){return!this.$store.state.viewer.liveTracking&&this.$store.getters["printer/isPrinting"]&&!this.showProgress}};Object(n["a"])([Object(a["f"])("fileInput")],qt.prototype,"fileInput",void 0),Object(n["a"])([Object(a["h"])("selectedButton")],qt.prototype,"selectedButtonUpdated",null),qt=Object(n["a"])([Object(a["a"])({components:{ToolsDialog:rt,ToolbarItem:ut,ToolbarPopover:ft,RenderQuality:Ot,RenderMode:Vt,RenderColors:Bt}})],qt);var Ht=qt,Gt=Ht,Qt=(o("689b"),Object(T["a"])(Gt,we,ye,!1,null,"63149da1",null)),zt=Qt.exports;A()(Qt,{VBtn:R["a"],VBtnToggle:D["a"],VIcon:E["a"],VSpacer:le["a"]});var Wt=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-dialog",{attrs:{width:"600"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[o("v-card",[o("v-card-title",[e._v("About the GCode Viewer")]),o("v-card-text",[o("p",[e._v("This viewer was designed and written by Juan Rosario (Sindarius) using BabylonJS."),o("br")]),o("p",[e._v(" This standalone version of the GCode Viewer adds the ability to connect to a RRF/Duet Printer or a Klipper/Moonraker instance for live tracking."),o("br"),e._v(" This web application runs locally so no data is sent up to a server for processing. ")]),o("p",[o("strong",[e._v("***NOTE ASMBL Users: The ASMBL voxel rendering feature is not gone!***")]),e._v(" "),o("br"),e._v(" Go to the "),o("b",[e._v("Quality")]),e._v(" menu and turn on Voxel Mode(ASMBL) to show additive and subtractive gcode. "),o("br"),e._v(" As a bonus you can also use "),o("b",[e._v("Force Line Mode")]),e._v(" to see a line version. Subtractive lines will appear red. ")]),o("p",[e._v(" If you enjoy this viewer consider buying me a coffee"),o("br"),o("strong",[o("a",{attrs:{href:"https://www.buymeacoffee.com/sindarius",target:"_blank"}},[e._v("https://www.buymeacoffee.com/sindarius")])])]),o("p",[e._v(" Don't have a gcode file to load.... How about loading a benchy :) "),o("v-btn",{attrs:{color:"info"},on:{click:e.loadBenchy}},[e._v("Load a benchy!")])],1)])],1)],1)},Jt=[];let Ut=class extends a["g"]{loadBenchy(){this.$eventHub.$emit("LoadBenchy"),this.showDialog=!1}};Object(n["a"])([Object(a["e"])("show",{type:Boolean})],Ut.prototype,"showDialog",void 0),Ut=Object(n["a"])([a["a"]],Ut);var Kt=Ut,Xt=Kt,Yt=Object(T["a"])(Xt,Wt,Jt,!1,null,"b50de890",null),Zt=Yt.exports;A()(Yt,{VBtn:R["a"],VCard:re["a"],VCardText:se["b"],VCardTitle:se["c"],VDialog:ie["a"]});var eo=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-dialog",{attrs:{width:"600"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[r("v-card",[r("v-card-title",[r("span",[r("v-icon",[e._v("mdi-google-chrome")]),e._v("Chrome Info")],1),r("v-card-text",[r("div",[e._v("Due to changes in Google Chrome you have to change the "),r("i",[e._v("Block insecure private network requests")]),e._v(" settings to disabled to connect to a local printer.")]),r("br"),r("div",[e._v("Link : chrome://flags/#block-insecure-private-network-requests")]),r("v-img",{attrs:{src:o("6848")}})],1)],1)],1)],1)},to=[];let oo=class extends a["g"]{};Object(n["a"])([Object(a["e"])("show",{type:Boolean})],oo.prototype,"showDialog",void 0),oo=Object(n["a"])([a["a"]],oo);var ro=oo,so=ro,io=Object(T["a"])(so,eo,to,!1,null,null,null),no=io.exports;A()(io,{VCard:re["a"],VCardText:se["b"],VCardTitle:se["c"],VDialog:ie["a"],VIcon:E["a"],VImg:ae["a"]});let ao=class extends(Object(a["b"])(p)){constructor(){super(...arguments),this.showConnectionDialog=!1,this.showToolsDialog=!1,this.showAboutDialog=!1,this.showChromeInfo=!1}get connection(){return this.$store.state.connections.connection}get motion(){return this.$store.state.printer.motion}get status(){return this.$store.state.printer.status}get isConnected(){return this.$store.getters["connections/isConnected"]}get toolbarClass(){return this.isMobile?"toolbar-sm":"toolbar"}async downloadTest(){this.$eventHub.$emit("trackCurrentJob")}dumpState(){console.log(this.$store.state)}disconnect(){this.connection.disconnect(),this.$eventHub.$emit("disconnect")}};ao=Object(n["a"])([Object(a["a"])({components:{Viewer:G,Connect:ue,Status:fe,Toolbar:zt,About:Zt,ChromeInfo:no}})],ao);var lo=ao,co=lo,uo=(o("279c"),o("7496")),ho=o("40dc"),po=o("f6c4"),vo=Object(T["a"])(co,s,i,!1,null,"754d1270",null),mo=vo.exports;A()(vo,{VApp:uo["a"],VAppBar:ho["a"],VBtn:R["a"],VIcon:E["a"],VMain:po["a"],VSpacer:le["a"]});var go=o("9483");Object(go["a"])("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var bo=o("2f62");const fo={setConnection(e,t){r["a"].set(e,"connection",t);const o=new J(t.address,t.connectionType);localStorage.setItem("lastConnection",JSON.stringify(o))},clear(e,t){r["a"].set(e,"connection",{})}},wo={isConnected(e){return null!==e.connection&&e.connection.connected},getLastConnection(){const e=localStorage.getItem("lastConnection");return e?JSON.parse(e):null}},yo={async download({state:e},t){if(null!==e.connection&&e.connection.connected){const o=await e.connection.downloadFile(t.filename,t.callback);return o}return null}},xo=()=>({connection:new U(null)}),Co=xo(),ko={namespaced:!0,state:Co,mutations:fo,getters:wo,actions:yo};class Po{constructor(e,t){this.axes="",this.position=0,this.axes=e,this.position=t}}class _o{constructor(e,t,o){this.axes="",this.min=0,this.max=100,this.axes=e,this.min=t,this.max=o}}class Oo{constructor(){this.filePosition=0,this.duration=0,this.fileName="",this.size=0}}var To;(function(e){e["Unknown"]="Unknown",e["Printing"]="Printing",e["Idle"]="Idle",e["Error"]="Error",e["Busy"]="Busy",e["Simulating"]="Simulating"})(To||(To={}));const Fo={};var $o=o("da81"),So=o.n($o);const jo={updateDuetModelData(e,t){var o,s;null===e.sourcemodel&&r["a"].set(e,"sourcemodel",{});const i={...e.sourcemodel};if(So()(i,t),r["a"].set(e,"sourcemodel",i),e.sourcemodel==={})return;const n=e.sourcemodel.move.axes;let a=[];a=n.map(e=>new Po(e.letter,e.userPosition)),r["a"].set(e,"motion",a);let l=[];l=n.map(e=>new _o(e.letter,e.min,e.max));const c=e.buildVolume.every((t,o)=>t.min===e.buildVolume[o].min&&t.max===e.buildVolume[o].max);l.length==e.buildVolume.length&&c||r["a"].set(e,"buildVolume",l);let d=To.Unknown;switch(e.sourcemodel.state.status){case"idle":d=To.Idle;break;case"processing":d=To.Printing,e.job&&r["a"].set(e.job,"filePosition",e.sourcemodel.job.filePosition);break;case"error":d=To.Error;break;case"busy":d=To.Busy;break;case"simulating":d=To.Simulating,e.job&&r["a"].set(e.job,"filePosition",e.sourcemodel.job.filePosition);break}if(r["a"].set(e,"status",d),null!==(o=t.job)&&void 0!==o&&null!==(s=o.file)&&void 0!==s&&s.fileName){var u,h,p,v;const t=new Oo;t.fileName=null!==(u=null===(h=e.sourcemodel.job)||void 0===h||null===(p=h.file)||void 0===p?void 0:p.fileName)&&void 0!==u?u:"",t.size=null===(v=e.sourcemodel.job)||void 0===v?void 0:v.file.size,t.filePosition=e.sourcemodel.job.filePosition,t.duration=e.sourcemodel.job.duration,r["a"].set(e,"job",t)}},updateKlipperModelData(e,t){var o,s,i;const n={...e.sourcemodel};var a;(So()(n,t),r["a"].set(e,"sourcemodel",n),"error"===(null===(o=t.webhooks)||void 0===o?void 0:o.state))&&console.error("Klipper has reported an error : "+(null===(a=t.webhooks)||void 0===a?void 0:a.state_message));if(null!==(s=t.configfile)&&void 0!==s&&null!==(i=s.config)&&void 0!==i&&i.stepper_x)try{const o=[];o.push(new _o("X",Number.parseFloat(t.configfile.config.stepper_x.position_endstop),Number.parseFloat(t.configfile.config.stepper_x.position_max))),o.push(new _o("Y",Number.parseFloat(t.configfile.config.stepper_y.position_endstop),Number.parseFloat(t.configfile.config.stepper_y.position_max))),o.push(new _o("Z",Number.parseFloat(t.configfile.config.stepper_z.position_endstop),Number.parseFloat(t.configfile.config.stepper_z.position_max)));const s=e.buildVolume.every((t,o)=>t.min===e.buildVolume[o].min&&t.max===e.buildVolume[o].max);o.length==e.buildVolume.length&&s||r["a"].set(e,"buildVolume",o)}catch(u){console.error(u)}let l=To.Unknown;l=e.sourcemodel.virtual_sdcard.is_active?To.Printing:To.Idle,r["a"].set(e,"status",l);const c=[];c.push(new Po("X",e.sourcemodel.motion_report.live_position[0])),c.push(new Po("Y",e.sourcemodel.motion_report.live_position[1])),c.push(new Po("Z",e.sourcemodel.motion_report.live_position[2])),r["a"].set(e,"motion",c);const d=new Oo;d.fileName=e.sourcemodel.virtual_sdcard.file_path,d.filePosition=e.sourcemodel.virtual_sdcard.file_position,d.size=e.sourcemodel.virtual_sdcard.file_size,r["a"].set(e,"job",d)},updateOctoPrintModelData(e,t){var o;if(null!==(o=t.profiles)&&void 0!==o&&o._default)try{var s;const o=null===(s=t.profiles)||void 0===s?void 0:s._default.volume,i=[];i.push(new _o("X",0,Number.parseFloat(o.width))),i.push(new _o("Y",0,Number.parseFloat(o.height))),i.push(new _o("Z",0,Number.parseFloat(o.depth))),r["a"].set(e,"buildVolume",i)}catch(i){console.error(i)}if(t.state&&(t.state.includes("Printing")?r["a"].set(e,"status",To.Printing):r["a"].set(e,"status",To.Idle)),t.job){const o=new Oo;o.fileName=t.job.file.path,o.size=t.job.file.size,e.status===To.Printing&&(o.filePosition=t.progress.filepos),r["a"].set(e,"job",o)}},clear(e,t){r["a"].set(e,"sourcemodel",{}),r["a"].set(e,"motion",{}),r["a"].set(e,"status",{}),r["a"].set(e,"job",{})}},Mo={isCurrentJob(e,t){var o;return(null===(o=e.job)||void 0===o?void 0:o.fileName)===t},isPrinting(e){return e.status===To.Printing||e.status===To.Simulating}},Vo=()=>({sourcemodel:{},buildVolume:[new _o("X",0,235),new _o("Y",0,250),new _o("Z",0,200)]}),Io=Vo(),Ao={namespaced:!0,state:Io,actions:Fo,mutations:jo,getters:Mo};r["a"].use(bo["a"]);var Ro=new bo["a"].Store({modules:{connections:ko,printer:Ao,viewer:Xe}}),Do=o("f309");o("bf40");r["a"].use(Do["a"]);var No=new Do["a"]({theme:{dark:!0}}),Eo=o("a925"),Lo={language:"English",default:{save:"Save",cancel:"Cancel",reset:"Reset",default:"Default"},$vuetify:{badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"}},viewer:{tools:{title:"Tools",tool:"Tool|Tools",quantity:"Quantity",qtyerror:"The number of tools must be between 1 and 10"},toolbar:{toolstitle:"Edit Tools",openlocal:"Open Local File\nDrag/Drop on Viewer",reloadViewer:"Reload Viewer",resetCamera:"Reset Camera",liveTrack:"Live Track Print"},settings:{hqrender:"HQ Rendering (Round Extrusions)",minfeedrate:"Min Feed Rate",maxfeedrate:"Max Feed Rate",voxelHeight:"Voxel Height",voxelWidth:"Voxel Width",useSpecular:"Specular Lighting",transparency:"Transparency",forceLineMode:"Force Line Mode",voxelMode:"Voxel Mode (ASMBL)",fileOffset:"File Offset",g1AsExtrusion:"G1 As Extrusion (CNC)",showGCodeStream:"Show GCode Stream",perimeterOnly:"Perimeter Only"}}};r["a"].use(Eo["a"]);const Bo=r["a"].observable({en:Lo});var qo=new Eo["a"]({locale:"en",fallbackLocale:"en",messages:Bo});r["a"].config.productionTip=!1,r["a"].prototype.$eventHub=new r["a"],new r["a"]({store:Ro,render:e=>e(mo),vuetify:No,i18n:qo}).$mount("#app")},dcc2:function(e,t,o){e.exports=o.p+"img/octoprint.6aa2c67e.png"},de88:function(e,t,o){},dfb9:function(e,t,o){},e672:function(e,t,o){},e6d5:function(e,t,o){},ea37:function(e,t,o){},f6cf:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAyCAYAAADImlLUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAA6F4AAOheAW9nZpEAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAABWZJREFUaEPNmX1MVXUYxxFBREBeZGsDIsgsa9RorVWupmkvW6vFH636ozVKrP7qRdAKsSkioaETJWk11pq5FAyJloSImryEKGqAoq5NUOPFShfIy+Xt6fscnss5XM7l3nPvBc53++zu/s7z8r2/87u/c869XlMhH6/kcLCXX2XI3ILRBeAsIHldIIfMKRgMA/Vi2Aq/D5MQcwnGQsFpMWoLj4dKqDkEQyGgTgzag4+HSMrMCkaCQa0YcwTHBUvqzAgG5oMaMeQsHD9fSkyv0DgIVIsRo1SBICk1PULDQFApBlyF8wOl5NQKjQLAb9J4HBF3bKAnn9hJCS/l06uvfKe88vtIjOvFA64TIKWnRtwAHJOGFBKUSm++sZcK9p2l9rb/aDK1t3VRwf5zSnxIYKrWONebJy08Ky4MKrhRzJ2bKHdnJXV39YslY+pCXs6OExQdsdFqnOt61jgK+oPyAL+PadPGw9TbOyDt3VNPj4XWrztE/r5r2Xg595GW7gmF5oKyuPu3UGNDm7TT18gIUUdHlxJ3pv4aXbp4g7q7HZ+N06eu0qLYzWy8jPtJa9eEAn6gFNDJ2lZpMV6dHd20K6eSXnj+awoPSbOe7jF8Z6XQors309uJP1BJcRMNDAxJ5nhlbz1mzeF+fmLBmJDoDQqlEN13z+f07z890oKopeUmJb21j+bNWUuxWOMfvn+Qin5soIvNnXTrVi/dvm2h9vYuqv29hb7MraKXX8xXYqMj05X1bLGo5o+UX6a5PmvGPig4ALzFivNCUrqmiMIzT+dRf/8gbc8+TkH+n9Aj8dvop+JGGh7CunBCnZ3dWMOlFBzwKfFyqzvZqnzI8NCJZwikixXnhISlYFhTYAzeOfgLuX3bcRoaGhY7xtTaepOeW/HV2Mzr9QHcf5lYmlwI5HV8WRJ1+eiDYmk/XjyTP5ecxxo/QVuyKihvdzVV4NTrfRn7+gYnM2yFfThe3wharUnSxW/2Gjr0ywWlOe8YxUWNtHzpbprjnaLMHq//+AezFVO+s5KVM/MarpCn6q4qOax3VxXo1tYhWazpCwG8vXVoEuwSNn8djDfTimWjZtnU4bJLygxqdQOzn/9NLT2MD8E7yXvvFFJWZoVuTTt0AvvbIA4maoKd4t6FmcoO4UjDwyPK1sizrlfHAYlicaJw8KhNsEOeWrKL+m1m154a/mijUNyv6NVxwFGxOF44wA+lQ5pAp+GbIF7bFssgFR1ooJTVJbRq5X7a8NmvVFNzRTHMV8qFd2Xo5jsB+5r4cIzBBE2QYVbiQsOmeN3Gx32h7OnWG6Jnl+fRksdyJuQYJEGsqsJghk2QYR56YCtdON+hzCxrBNNfWHDOekPkLhliVRUGxy7ZrsJXujP118XyqLIyj+jGukChWFWFQaMPqLrERKVT21+jDwQHcS/C26FenAvUiFVVGGyyCXKZxx/dQdVVV5SZ1zvuIk1iVRUGm22C3MJvtsdm2EqzWFWFQdvf4MxGvVhVhUHlZt/ElIpVVRjMtQkyG7liVRUGk2yCzEaSWFWFwcU2QWZjsVhVhUHmT02QmWBf4tRGOOD2pXyKmHgJtwoHY8CgJtgMsJ8YsagvBOzRJJiBPWLNvhAUC/o0STMJ+4gVa5MLgWmaxJkkTSw5FoJ9gKu/8nsK7u8jlpwTEiLBdSkw3XDfSLFiTEiMA39LoemC+8WJBdfEBcA1KTjVcB/3DFuFQhGA/5HSa+QpuH6EtPSMUJC/nKmgF+g1dRWux3WNfemMCMX5qvktGAB6JpyF87nO5Fc7TwrNosB6YPTZkuM5L0pKzYxgIBq8DviG63vAT0H8jxW/8nse5+PRkuKGvLz+B3FxPJ8UDprXAAAAAElFTkSuQmCC"},fc1e:function(e,t,o){"use strict";o("678b")}});
//# sourceMappingURL=app.a25d0eec.js.map