(function(){"use strict";var e={2090:function(e,t,o){o(28594),o(35666);var s=o(20144),r=o(40998),i=o(10704),n=o(64562),a=o(4324),l=o(3059),c=o(48718),d=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(r.Z,[t(i.Z,{attrs:{app:"",color:"primary",dense:""}},[t("Status"),t(c.Z),e.isConnected?t(n.Z,{staticClass:"mr-2",on:{click:e.disconnect}},[t(a.Z,{staticClass:"mr-2"},[e._v("mdi-lan-connect")]),e._v(" Disconnect")],1):t(n.Z,{staticClass:"mr-2",on:{click:function(t){e.showConnectionDialog=!0}}},[t(a.Z,{staticClass:"mr-2"},[e._v("mdi-lan-connect")]),e._v(" Connect")],1),t(n.Z,{on:{click:function(t){e.showAboutDialog=!0}}},[t(a.Z,{attrs:{color:"green"}},[e._v("mdi-information-outline")])],1),t(n.Z,{on:{click:function(t){e.showChromeInfo=!0}}},[t(a.Z,[e._v("mdi-google-chrome")])],1)],1),t(l.Z,{staticClass:"main-relative"},[t("Viewer"),t("Connect",{attrs:{show:e.showConnectionDialog},on:{"update:show":function(t){e.showConnectionDialog=t}}}),t("About",{attrs:{show:e.showAboutDialog},on:{"update:show":function(t){e.showAboutDialog=t}}}),t("Toolbar",{class:e.toolbarClass}),t("ChromeInfo",{attrs:{show:e.showChromeInfo},on:{"update:show":function(t){e.showChromeInfo=t}}})],1)],1)},u=[],h=o(47327),p=o(70655),g=o(12195),m=o(22016),v=o(60266),f=o(29592),w=o(11713),y=o(69670),b=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.showGCodeStream,expression:"showGCodeStream"}],staticClass:"codestream"},[t("CodeStream",{attrs:{currentline:e.scrubPosition,document:e.fileData,shown:e.showGCodeStream},on:{"update:currentline":function(t){e.scrubPosition=t},"got-focus":e.resetFocus,updated:e.codeStreamUpdate}})],1),t("canvas",{ref:"viewercanvas",class:e.showGCodeStream?"canvas-sizing-codestream":"canvas-sizing",on:{dragover:function(t){return t.preventDefault(),e.dragOver.apply(null,arguments)},dragleave:e.dragLeave,drop:function(t){return t.preventDefault(),e.drop.apply(null,arguments)}}}),t(f.Z,{directives:[{name:"show",rawName:"v-show",value:e.showProgress,expression:"showProgress"}],staticClass:"progress-position disable-transition",attrs:{striped:"",height:"30",rounded:"",value:e.progressPercent},scopedSlots:e._u([{key:"default",fn:function({value:o}){return[t("strong",{staticClass:"progress-text"},[e._v(e._s(Math.ceil(o))+"% "+e._s(e.message)+" ")])]}}])}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.liveTracking&&e.scrubFileSize>0,expression:"!liveTracking && scrubFileSize > 0"}],class:e.showGCodeStream?"scrubber-codestream":"scrubber"},[t(w.Z,{attrs:{dense:""}},[t(v.Z,{attrs:{cols:"9",md:"7"}},[t(y.Z,{attrs:{hint:e.scrubPosition+"/"+e.scrubFileSize,max:e.scrubFileSize,dense:"",min:"0","persistent-hint":""},on:{start:e.scrubStart,end:e.scrubEnd,change:e.scrubPositionChanged},model:{value:e.scrubPosition,callback:function(t){e.scrubPosition=t},expression:"scrubPosition"}})],1),t(v.Z,{attrs:{cols:"3",md:"2"}},[t(n.Z,{ref:"playButton",on:{click:e.simulatePlay}},[e.scrubPlaying?t(a.Z,[e._v("mdi-stop")]):t(a.Z,[e._v("mdi-play")])],1),t(n.Z,{on:{click:e.fastForward}},[t(a.Z,[e._v("mdi-fast-forward")])],1)],1),t(v.Z,{attrs:{cols:"12",md:"2"}},[t(m.Z,{attrs:{dense:"",mandatory:"",rounded:""},model:{value:e.scrubSpeed,callback:function(t){e.scrubSpeed=t},expression:"scrubSpeed"}},[t(n.Z,{attrs:{value:1}},[e._v("1x")]),t(n.Z,{attrs:{value:2}},[e._v("2x")]),t(n.Z,{attrs:{value:5}},[e._v("5x")]),t(n.Z,{attrs:{value:10}},[e._v("10x")]),t(n.Z,{attrs:{value:20}},[e._v("20x")]),t(n.Z,{attrs:{value:100}},[e._v("100x")])],1)],1)],1)],1)],1)},x=[],Z=o(75520);o(82801),o(23767),o(8585),o(68696);let _=class extends s.ZP{async download(e,t){return await this.$store.dispatch("connections/download",{filename:e,callback:t})}get isMobile(){switch(this.$vuetify.breakpoint.name){case"xs":case"sm":return!0}return!1}};_=(0,p.gn)([g.wA],_);var P,C,k=_,$=o(55733),S=o.n($),F=o(93162),T=o.n(F);let A,M=(P=class extends((0,g.Wr)(k)){get tools(){return this.$store.state.viewer.tools}viewer(){return A}setGCodeViewer(e){A=e}get showProgress(){return this.$store.state.viewer.showProgress}set showProgress(e){this.$store.commit("viewer/showProgress",e)}get currentFileName(){return this.$store.state.viewer.currentFileName}set currentFileName(e){this.$store.commit("viewer/updateCurrentFile",e)}get liveTracking(){return this.$store.state.viewer.liveTracking}set liveTracking(e){this.$store.commit("viewer/liveTracking",e)}get reloadRequired(){return this.$store.state.viewer.reloadRequired}set reloadRequired(e){this.$store.commit("viewer/reloadRequired",e)}get renderQuality(){return this.$store.getters["viewer/renderQuality"]}set renderQuality(e){this.reloadRequired=!0,this.$store.commit("viewer/renderQuality",e)}get renderMode(){return this.$store.getters["viewer/renderMode"]}set renderMode(e){this.reloadRequired=!0,this.$store.commit("viewer/renderMode",e)}get lineMode(){return this.$store.getters["viewer/lineMode"]}set lineMode(e){this.reloadRequired=!0,this.$store.commit("viewer/lineMode",e)}get voxelMode(){return this.$store.getters["viewer/voxelMode"]}set voxelMode(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelMode",e)}get voxelWidth(){return this.$store.getters["viewer/voxelWidth"]}set voxelWidth(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelWidth",e)}get voxelHeight(){return this.$store.getters["viewer/voxelHeight"]}set voxelHeight(e){this.reloadRequired=!0,this.$store.commit("viewer/voxelHeight",e)}get travelMoves(){return this.$store.getters["viewer/travelMoves"]}set travelMoves(e){A.toggleTravels(e),this.$store.commit("viewer/travelMoves",e)}get hqRender(){return this.$store.getters["viewer/hqRender"]}set hqRender(e){this.reloadRequired=!0,this.$store.commit("viewer/hqRender",e)}get specular(){return this.$store.getters["viewer/specular"]}set specular(e){null!=A&&(A.gcodeProcessor.useSpecularColor(e),this.$store.commit("viewer/specular",e))}get minFeedRate(){return this.$store.getters["viewer/minfeedrate"]}set minFeedRate(e){this.reloadRequired=!0,this.$store.commit("viewer/minfeedrate",e)}get maxFeedRate(){return this.$store.getters["viewer/maxfeedrate"]}set maxFeedRate(e){this.reloadRequired=!0,this.$store.commit("viewer/maxfeedrate",e)}get minFeedColor(){return this.$store.getters["viewer/minfeedcolor"]}set minFeedColor(e){this.reloadRequired=!0,this.$store.commit("viewer/minfeedcolor",e)}get maxFeedColor(){return this.$store.getters["viewer/maxfeedcolor"]}set maxFeedColor(e){this.reloadRequired=!0,this.$store.commit("viewer/maxfeedcolor",e)}get transparency(){return this.$store.getters["viewer/transparency"]}set transparency(e){this.reloadRequired=!0,this.$store.commit("viewer/transparency",e)}get transparentPercent(){return this.$store.getters["viewer/transparentPercent"]}set transparentPercent(e){this.reloadRequired=!0,A.gcodeProcessor.setTransparencyValue(e/100),A.gcodeProcessor.forceRedraw(),this.$store.commit("viewer/transparentPercent",e)}get progressColor(){return this.$store.getters["viewer/progressColor"]}set progressColor(e){A.setProgressColor(this.progressColor),this.$store.commit("viewer/progressColor",e)}get backgroundColor(){return this.$store.getters["viewer/backgroundColor"]}set backgroundColor(e){A.setBackgroundColor(this.backgroundColor),A.forceRender(),this.$store.commit("viewer/backgroundColor",e)}get gridColor(){return this.$store.getters["viewer/gridColor"]}set gridColor(e){A.bed.setBedColor(e),this.$store.commit("viewer/gridColor",e)}get fileOffset(){return this.$store.getters["viewer/fileOffset"]}set fileOffset(e){this.$store.commit("viewer/fileOffset",e)}get g1AsExtrusion(){const e=this.$store.getters["viewer/g1AsExtrusion"];return e}set g1AsExtrusion(e){this.$store.commit("viewer/g1AsExtrusion",e)}set showGCodeStream(e){this.$store.commit("viewer/showGCodeStream",e),this.$nextTick((()=>{A.resize()}))}get showGCodeStream(){return this.$store.getters["viewer/showGCodeStream"]}get perimeterOnly(){return this.$store.getters["viewer/perimeterOnly"]}set perimeterOnly(e){this.$store.commit("viewer/perimeterOnly",e)}get zBelt(){return this.$store.getters["viewer/zBelt"]}set zBelt(e){this.$store.commit("viewer/zBelt",e)}get zBeltAngle(){return this.$store.getters["viewer/zBeltAngle"]}set zBeltAngle(e){this.$store.commit("viewer/zBeltAngle",e)}get progressMode(){return this.$store.getters["viewer/progressMode"]}set progressMode(e){this.reloadRequired=!0,this.$store.commit("viewer/progressMode",e)}get showNozzle(){return this.$store.getters["viewer/showNozzle"]}set showNozzle(e){A.setCursorVisiblity(e),A.gcodeProcessor.forceRedraw(),this.$store.commit("viewer/showNozzle",e)}get showBed(){return this.$store.getters["viewer/showBed"]}set showBed(e){A.bed.setRenderMode(e?0:3),A.gcodeProcessor.forceRedraw(),this.$store.commit("viewer/showBed",e)}get showAxis(){return this.$store.getters["viewer/showAxis"]}set showAxis(e){A.axes.show(e),this.$store.commit("viewer/showAxis",e)}async reloadViewer(){this.reloadRequired=!1,this.showProgress=!0,A.gcodeProcessor.cancelLoad=!0,await new Promise((e=>setTimeout(e,500))),this.beforeRender(),await A.reload(),C.scrubPlaying||(A.gcodeProcessor.forceRedraw(),this.$eventHub.$emit("reloadComplete")),this.showProgress=!1}async playLayers(e,t){A.stopSimulation(),A.gcodeProcessor.setRenderAnimation(!1);const o=A.getLayers();if(o<=0)return;const s=new(S());for(let r=1;r<o.length;r++){A.gcodeProcessor.updateFilePosition(o[r]);const i=await A.createScreenshot(e,t);null!=i&&s.file(`${r}.png`,i.slice(i.indexOf(",")+1),{base64:!0})}await s.generateAsync({type:"blob"}).then((e=>{T().saveAs(e,`${this.currentFileName}.zip`)}))}dataURItoBlob(e){const t=atob(e.split(",")[1]),o=e.split(",")[0].split(":")[1].split(";")[0],s=new ArrayBuffer(t.length),r=new Uint8Array(s);for(let n=0;n<t.length;n++)r[n]=t.charCodeAt(n);const i=new Blob([s],{type:o});return i}takeScreenshot(e,t){A.createScreenshot(e,t).then((e=>{null!=e&&T().saveAs(this.dataURItoBlob(e),`${this.currentFileName}.png`)}))}beforeRender(){this.voxelMode&&(A.gcodeProcessor.voxelWidth=this.voxelWidth,A.gcodeProcessor.voxelHeight=this.voxelHeight),A.gcodeProcessor.setRenderAnimation(!1),A.gcodeProcessor.updateMinFeedColor(this.minFeedColor),A.gcodeProcessor.updateMaxFeedColor(this.maxFeedColor),A.gcodeProcessor.updateColorRate(this.minFeedRate,this.maxFeedRate),A.setZClipPlane(1e6,-1e6),A.setBackgroundColor(this.backgroundColor),A.setProgressColor(this.progressColor),A.bed.setBedColor(this.gridColor),A.gcodeProcessor.useSpecularColor(this.specular),A.toggleTravels(this.travelMoves),A.gcodeProcessor.setColorMode(this.renderMode),A.gcodeProcessor.updateForceWireMode(this.lineMode),A.gcodeProcessor.setVoxelMode(this.voxelMode),A.updateRenderQuality(this.renderQuality),A.gcodeProcessor.useHighQualityExtrusion(this.hqRender),A.gcodeProcessor.setAlpha(this.transparency),A.gcodeProcessor.resetTools(),A.gcodeProcessor.g1AsExtrusion=this.g1AsExtrusion,A.gcodeProcessor.perimeterOnly=this.perimeterOnly,A.setZBelt(this.zBelt,this.zBeltAngle),A.gcodeProcessor.progressMode=this.progressMode,A.gcodeProcessor.setTransparencyValue(this.transparentPercent/100),A.setCursorVisiblity(this.showNozzle),A.bed.setRenderMode(this.showBed?0:3),A.axes.show(this.showAxis),this.updateTools()}updateTools(){A.gcodeProcessor.resetTools();for(let e=0;e<this.tools.length;e++){const t=this.tools[e];A.gcodeProcessor.addTool(t.color,t.diameter,t.toolType),A.gcodeProcessor.tools[e].toolType=t.toolType}}resetCamera(){A.resetCamera()}unload(){A.clearScene(!0),this.liveTracking=!1}setCameraPosition(e,t,o){A.setCameraPosition(e,t,o)}setCameraTarget(e,t,o){A.setCameraTarget(e,t,o)}},C=P,(0,h.Z)(P,"reloadRequired",!1),(0,h.Z)(P,"scrubPlaying",!1),P);M=C=(0,p.gn)([g.wA],M);var z=M,R=o(9669),B=o.n(R),I=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"view",staticClass:"codeview",on:{mouseup:e.mouseUp,keydown:e.keyPress,keypress:e.keyPress}})},N=[],D=o(14456),O=o(87457),q=o(78120);let E=class extends g.w3{constructor(...e){super(...e),(0,h.Z)(this,"currentLineNumber",void 0),(0,h.Z)(this,"view",void 0)}mounted(){this.view=new D.tk({doc:this.document,extensions:[O.Xy,q.yy.readOnly.of(!0)],parent:this.$refs["view"]})}mouseUp(){if(this.view){const e=this.view.state.doc.lineAt(this.view.state.selection.ranges[0].from);this.$emit("updated",e.to),this.view.contentDOM.blur(),this.$emit("got-focus")}}keyPress(){if(this.view){const e=this.view.state.doc.lineAt(this.view.state.selection.ranges[0].from);this.$emit("updated",e.to),this.$emit("got-focus")}}documentUpdated(){this.view&&this.shown&&this.view.dispatch({changes:{from:0,to:this.view.state.doc.length,insert:this.document}})}currentlineUpdated(e){if(this.view&&this.shown){const t=this.view.state.doc.lineAt(e);this.view.dispatch({selection:{anchor:t.from,head:t.from},scrollIntoView:!0})}}};(0,p.gn)([(0,g.vZ)("currentline")],E.prototype,"currentLineNumber",void 0),(0,p.gn)([(0,g.fI)({type:String,default:""})],E.prototype,"document",void 0),(0,p.gn)([(0,g.fI)({type:Boolean,default:!1})],E.prototype,"isSimulating",void 0),(0,p.gn)([(0,g.fI)({type:Boolean,default:!1})],E.prototype,"shown",void 0),(0,p.gn)([(0,g.RL)("document")],E.prototype,"documentUpdated",null),(0,p.gn)([(0,g.RL)("currentline")],E.prototype,"currentlineUpdated",null),E=(0,p.gn)([(0,g.wA)({})],E);var L=E,V=L,H=o(1001),W=(0,H.Z)(V,I,N,!1,null,"4b95fb35",null),Q=W.exports;let G,j=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"viewercanvas",void 0),(0,h.Z)(this,"playButton",void 0),(0,h.Z)(this,"progressPercent",0),(0,h.Z)(this,"message",""),(0,h.Z)(this,"scrubPosition",0),(0,h.Z)(this,"scrubPlaying",!1),(0,h.Z)(this,"scrubSpeed",1),(0,h.Z)(this,"scrubInterval",-1),(0,h.Z)(this,"scrubFileSize",0),(0,h.Z)(this,"gcodeLines",""),(0,h.Z)(this,"fileData",""),(0,h.Z)(this,"gcodeLineNumber",0)}async mounted(){this.$eventHub.$on("trackCurrentJob",(()=>{this.trackCurrentJob()})),this.$eventHub.$on("disconnect",(()=>{this.disconnect()})),this.$eventHub.$on("openLocalFile",(async e=>{await this.openLocalFile(e)})),this.$eventHub.$on("LoadBenchy",(async()=>{await this.OpenBenchy()})),this.$eventHub.$on("reloadComplete",(()=>{this.scrubFileSize>0&&!this.scrubPlaying&&(G.gcodeProcessor.updateFilePosition(this.scrubPosition),this.gcodeLines=G.getGCodeLine(),this.gcodeLineNumber=G.getGCodeLineNumber())})),G||(G=new Z.ZP(this.viewercanvas),this.setGCodeViewer(G),await G.init(),G.setCursorVisiblity(!0),window.onresize=()=>{G.resize()},G.gcodeProcessor.loadingProgressCallback=this.updatePercent,G.gcodeProcessor.g1AsExtrusion=this.g1AsExtrusion,this.beforeRender(),G.simulationUpdatePosition=e=>{this.scrubPosition=e-2},G.simulationStopped=()=>{this.scrubPlaying=!1},G.lastLoadFailed()&&(this.renderQuality=1,G.clearLoadFlag()))}beforeDestroy(){this.$eventHub.$off("trackCurrentJob"),this.$eventHub.$off("disconnect"),this.$eventHub.$off("openLocalFile"),this.$eventHub.$off("LoadBenchy"),this.$eventHub.$off("reloadComplete")}get cursorPosition(){return this.$store.state.printer.motion}get buildVolume(){return this.$store.state.printer.buildVolume}get currentJob(){return this.$store.state.printer.job.fileName}get currentFilePosition(){return this.$store.state.printer.job?.filePosition??0}currentFilePositionUpdated(e){this.liveTracking&&(G.gcodeProcessor.updateFilePosition(e-this.fileOffset),this.gcodeLines=G.getGCodeLine(),this.gcodeLineNumber=G.getGCodeLineNumber())}get viewerState(){return this.$store.state.viewer}cursorPositionChanged(e){G?.updateToolPosition(e)}buildVolumeChanged(e){for(const t in e){const o=e[t];if("XYZ".includes(o.axes)){const e=o.axes.toLowerCase();G.bed.buildVolume[e].min=o.min,G.bed.buildVolume[e].max=o.max}}G.bed.commitBedSize(),G.reload()}updatePercent(e,t){this.progressPercent=100*e,this.message=t}async trackCurrentJob(){if(this.currentJob){this.showProgress=!0,this.currentFileName=this.currentJob;const e=await this.download(this.currentJob,this.updatePercent);e&&(this.progressPercent=0,this.beforeRender(),await G.processFile(e),this.fileData=G.fileData,G.gcodeProcessor.forceRedraw(),this.scrubFileSize=G.fileSize,this.liveTracking=!0,this.showProgress=!1),this.showProgress=!1}}async OpenBenchy(){this.showProgress=!0,this.currentFileName="benchy_color.gcode";const e=await B().get("./benchy_color.gcode",{onDownloadProgress:e=>{const t=Math.round(100*e.loaded/e.total)/100;this.updatePercent(t,"Downloading Benchy")}}),t=e.data;this.scrubFileSize=t.length,G.gcodeProcessor.updateFilePosition(t.length),this.beforeRender(),await G.processFile(t),this.fileData=G.fileData,this.showProgress=!1}async openLocalFile(e){if(!e)return;this.unload();const t=new FileReader;this.showProgress=!0,this.liveTracking=!1,this.currentFileName=`${e.name}`,t.addEventListener("load",(async e=>{const t=e?.target?.result;this.beforeRender(),await G.processFile(t),console.log(G.getLayers()),this.fileData=G.fileData,this.scrubFileSize=G.fileSize,this.showProgress=!1})),t.readAsText(e)}disconnect(){this.liveTracking=!1,G.clearScene(!0)}fastForward(){G.stopSimulation(),this.scrubPlaying=!1,this.scrubPosition=this.scrubFileSize,G.gcodeProcessor.updateFilePosition(this.scrubFileSize),G.simulateToolPosition()}scrubStart(){G.simulation=!1}scrubEnd(){G.simulation=this.scrubPlaying}scrubPositionChanged(e){const t=G.simulation;G.simulation=!1,this.$nextTick((()=>{this.scrubPosition=e,G.gcodeProcessor.updateFilePosition(e),G.simulateToolPosition(),G.simulation=t}))}scrubSpeedChanged(e){G.simulationMultiplier=e}simulatePlay(){this.scrubPlaying?G.stopSimulation():G.startSimulation(),this.scrubPlaying=G.simulation}dragOver(e){e.dataTransfer?.files.length}dragLeave(e){}async drop(e){if((e.dataTransfer?.files.length??-1)>0){const t=e.dataTransfer?.files[0];t&&await this.openLocalFile(t)}}resetFocus(){}codeStreamUpdate(e){const t=G.simulation;G.simulation=!1,this.$nextTick((()=>{this.scrubPosition=e,G.gcodeProcessor.updateFilePosition(e),G.simulateToolPosition(),G.simulation=t}))}};(0,p.gn)([(0,g.Rl)("viewercanvas")],j.prototype,"viewercanvas",void 0),(0,p.gn)([(0,g.Rl)("playButton")],j.prototype,"playButton",void 0),(0,p.gn)([(0,g.RL)("currentFilePosition")],j.prototype,"currentFilePositionUpdated",null),(0,p.gn)([(0,g.RL)("cursorPosition")],j.prototype,"cursorPositionChanged",null),(0,p.gn)([(0,g.RL)("buildVolume",{deep:!0})],j.prototype,"buildVolumeChanged",null),(0,p.gn)([(0,g.RL)("scrubSpeed")],j.prototype,"scrubSpeedChanged",null),j=(0,p.gn)([(0,g.wA)({components:{CodeStream:Q}})],j);var J,K=j,U=K,X=(0,H.Z)(U,b,x,!1,null,"7e69353b",null),Y=X.exports,ee=o(79582),te=o(54886),oe=o(29930),se=o(65005),re=o(65495),ie=o(17808),ne=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(oe.Z,{attrs:{"max-width":"425"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(ee.Z,[t(se.Z,{on:{submit:function(t){return t.preventDefault(),e.connect.apply(null,arguments)}}},[t(te.EB,[e._v("Connect To...")]),t(te.ZB,[t(w.Z,[t(v.Z,{directives:[{name:"show",rawName:"v-show",value:e.error.length>0,expression:"error.length > 0"}],attrs:{cols:"12"}},[e._v(" "+e._s(e.error)+" ")]),t(v.Z,{attrs:{cols:"12"}},[t(m.Z,{attrs:{mandatory:"",dense:""},model:{value:e.connectionType,callback:function(t){e.connectionType=t},expression:"connectionType"}},[t(n.Z,[t(re.Z,{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o(52585)}}),e._v(" RRF/Duet")],1),t(n.Z,[t(re.Z,{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o(89790)}}),e._v(" Klipper")],1),t(n.Z,[t(re.Z,{staticClass:"mr-2",attrs:{width:"25",height:"25",contain:!0,src:o(35782)}}),e._v(" OctoPrint"),t("br"),e._v("(Beta)")],1)],1)],1),t(v.Z,{attrs:{cols:"12"}},[t(ie.Z,{attrs:{hint:"Address","persistent-hint":!0},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}}),t(ie.Z,{directives:[{name:"show",rawName:"v-show",value:0===e.connectionType,expression:"connectionType === 0"}],attrs:{hint:"Password (Optional)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(ie.Z,{directives:[{name:"show",rawName:"v-show",value:1===e.connectionType,expression:"connectionType === 1"}],attrs:{hint:"API Key (Optional)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),t(ie.Z,{directives:[{name:"show",rawName:"v-show",value:2===e.connectionType,expression:"connectionType === 2"}],attrs:{hint:"API Key (Required)","persistent-hint":!0},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),t(v.Z,{attrs:{cols:"12"}},[t("b",[e._v("NOTES")]),0===e.connectionType?t("div",{staticClass:"notes"},[e._v(" Depending on if you connect Standalone or SBC you may have to set M586 C param to allow CORS. "),t("br"),e._v(" Example "),t("i",[e._v('M586 C"*"')]),e._v(" Use at your own risk. "),t("a",{attrs:{href:"https://duet3d.dozuki.com/Wiki/Gcode#Section_M586_Configure_network_protocols",target:"_blank"}},[e._v("https://duet3d.dozuki.com/Wiki/Gcode#Section_M586_Configure_network_protocols")])]):e._e(),1===e.connectionType?t("div",[e._v(" Depending on your configuration you may need to supply an api key for connection. "),t("br"),e._v(" Instructions are available here "),t("a",{attrs:{href:"https://moonraker.readthedocs.io/en/latest/installation/#retreiving-the-api-key",target:"_blank"}},[e._v("https://moonraker.readthedocs.io/en/latest/installation/#retreiving-the-api-key")]),e._v(" under "),t("b",[e._v("Retreiving the API Key")]),e._v(" You may have to add http://www.sindarius.com to the cors_domains in moonraker.conf ")]):e._e(),2===e.connectionType?t("div",[t("strong",[e._v("OctoPrint interface is still a work in progress. This may or may not function.")]),t("br"),e._v(" API Key is REQUIRED to make a connection. Go here to get more information about generating an API key. "),t("a",{attrs:{href:"https://docs.octoprint.org/en/master/bundledplugins/appkeys.html?highlight=api",target:"_blank"}},[e._v("https://docs.octoprint.org/en/master/bundledplugins/appkeys.html?highlight=api")])]):e._e()])],1)],1),t(te.h7,[t(c.Z),t(n.Z,{attrs:{loading:e.busy,color:"info",type:"submit"}},[e._v("Connect")]),t(n.Z,{attrs:{disabled:e.busy,color:"error"},on:{click:e.cancel}},[e._v("Cancel")])],1)],1)],1)],1)},ae=[];class le{constructor(e,t){(0,h.Z)(this,"address",""),(0,h.Z)(this,"connectionType",J.unknown),this.address=e,this.connectionType=t}}(function(e){e[e["rrf"]=0]="rrf",e[e["klipper"]=1]="klipper",e[e["octoprint"]=2]="octoprint",e[e["unknown"]=3]="unknown"})(J||(J={}));class ce{constructor(e){(0,h.Z)(this,"protocol","http"),(0,h.Z)(this,"protocolWS","ws"),(0,h.Z)(this,"address",""),(0,h.Z)(this,"webSocket",void 0),(0,h.Z)(this,"sessionKey",""),(0,h.Z)(this,"password","reprap"),(0,h.Z)(this,"connected",!1),(0,h.Z)(this,"store",void 0),(0,h.Z)(this,"connectionType",J.unknown),this.store=e}async connect(e,t="reprap",o="http"){}request(){}disconnect(){this.connected=!1,this.store?.commit("printer/clear",{}),this.store?.commit("connections/clear",{})}timeToStr(e){let t="";return t+=e.getFullYear()+"-",t+=e.getMonth()+1+"-",t+=e.getDate()+"T",t+=e.getHours()+":",t+=e.getMinutes()+":",t+=e.getSeconds(),t}async downloadFile(e,t){return""}}class de extends ce{constructor(e){super(e),(0,h.Z)(this,"pollInterval",-1),(0,h.Z)(this,"connectionType",J.rrf)}async connect(e,t="reprap",o="http"){-1==this.pollInterval&&this.disconnect(),this.protocol=o,this.protocolWS="http"==o?"ws":"wss",this.address=e,this.password=t;const s=await B().get(`${o}://${this.address}/rr_connect?password=${this.password}`,{responseType:"text"});200==s.status&&(this.connected=!0,this.poll())}async poll(){if(!this.connected||null===this.store)return;const e=await B().get(`${this.protocol}://${this.address}/rr_model?flags=d99fv`);this.store.commit("printer/updateDuetModelData",e.data.result);const t=await B().get(`${this.protocol}://${this.address}/rr_model?key=move&flags=d99vn`);this.store.commit("printer/updateDuetModelData",{move:t.data.result});const o=await B().get(`${this.protocol}://${this.address}/rr_model?key=job&flags=d99vn`);this.store.commit("printer/updateDuetModelData",{job:o.data.result});this.pollInterval=window.setInterval((async()=>{const e=await B().get(`${this.protocol}://${this.address}/rr_model?flags=d99fn`);this.store?.commit("printer/updateDuetModelData",e.data.result);const t=await B().get(`${this.protocol}://${this.address}/rr_model?key=job&flags=d99vn`);this.store?.commit("printer/updateDuetModelData",{job:t.data.result})}),250)}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}timeToStr(e){let t="";return t+=e.getFullYear()+"-",t+=e.getMonth()+1+"-",t+=e.getDate()+"T",t+=e.getHours()+":",t+=e.getMinutes()+":",t+=e.getSeconds(),t}async downloadFile(e,t){const o=encodeURIComponent(e),s=await B().get(`${this.protocol}://${this.address}/rr_download?name=${o}`,{onDownloadProgress:o=>{const s=Math.round(100*o.loaded/o.total)/100;t(s,`Downloading ${e}`)}});return s.data}}class ue extends ce{constructor(e){super(e),(0,h.Z)(this,"connectionType",J.rrf)}async connect(e,t="reprap",o="http"){this.protocol=o,this.protocolWS="http"==o?"ws":"wss",this.address=e,this.password=t;try{const e=await B().get(`${o}://${this.address}/machine/connect`);200==e.status&&(this.connected=!0)}catch{}try{return new Promise(((e,t)=>{this.webSocket=new WebSocket(`${this.protocolWS}://${this.address}/machine`),this.webSocket.onmessage=t=>{this.store?.commit("printer/updateDuetModelData",JSON.parse(t.data)),this.webSocket?.send("OK\n"),e()},this.webSocket.onopen=t=>{this.connected=!0,e()},this.webSocket.onerror=t=>{this.connected=!1,e()}}))}catch{this.connected=!1}}disconnect(){this.webSocket?.close(),super.disconnect()}async downloadFile(e,t){const o=encodeURIComponent(e),s=await B().get(`${this.protocol}://${this.address}/machine/file/${o}`,{onDownloadProgress:o=>{const s=Math.round(100*o.loaded/o.total)/100;t(s,`Downloading ${e}`)}});return s.data}}class he extends ce{constructor(e){super(e),(0,h.Z)(this,"connectionType",J.klipper),(0,h.Z)(this,"connection_id",""),(0,h.Z)(this,"pollInterval",-1),(0,h.Z)(this,"apiHeader",{})}async connect(e,t="",o="http"){this.address=e,this.password=t;let s=t;this.apiHeader={};if(this.address.includes(":")||(this.address+=":7125"),""===s){const e=await B().get(`http://${this.address}/access/oneshot_token`,{headers:this.apiHeader,data:{}}),t=e.data.result,o=await B().get(`http://${this.address}/access/api_key?token=${t}`);s=o.data.result}s&&(this.apiHeader={"Content-Type":"text/plain","X-Api-Key":s,Accept:"text/plain"});const r=await B().get(`${this.protocol}://${this.address}/printer/objects/query?configfile&webhooks&motion_report&virtual_sdcard&display_status`,{headers:this.apiHeader,data:{}});return this.store?.commit("printer/updateKlipperModelData",r.data.result.status),new Promise((e=>{this.pollInterval=window.setInterval((async()=>{const e=await B().get(`${this.protocol}://${this.address}/printer/objects/query?motion_report&virtual_sdcard&display_status`,{headers:this.apiHeader,data:{}});this.store?.commit("printer/updateKlipperModelData",e.data.result.status)}),250),this.connected=!0,e()}))}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}async downloadFile(e,t){e=e.replace("/home/pi/gcode_files","");const o=await B().get(`${this.protocol}://${this.address}/server/files/gcodes${e}`,{headers:this.apiHeader,responseType:"text",data:{},onDownloadProgress:o=>{const s=Math.round(100*o.loaded/o.total)/100;t(s,`Downloading ${e}`)}});return o.data}}class pe extends ce{constructor(e){super(e),(0,h.Z)(this,"connectionType",J.octoprint),(0,h.Z)(this,"connection_id",""),(0,h.Z)(this,"pollInterval",-1),(0,h.Z)(this,"apiHeader",{}),(0,h.Z)(this,"waitingResponse",!1)}async connect(e,t="",o="http"){this.address=e,this.password=t,this.protocol=o;const s=t;this.apiHeader={};this.address.includes(":"),s&&(this.apiHeader={"Content-Type":"text/plain","X-Api-Key":s,Accept:"text/plain"});const r=await B().get(`${this.protocol}://${this.address}/api/printerprofiles`,{headers:this.apiHeader,data:{}});return this.store?.commit("printer/updateOctoPrintModelData",r.data),new Promise((e=>{this.startPolling(),this.connected=!0,e()}))}disconnect(){clearInterval(this.pollInterval),this.pollInterval=-1,super.disconnect()}stopPolling(){clearInterval(this.pollInterval)}startPolling(){this.pollInterval=window.setInterval((async()=>{if(!this.waitingResponse)try{this.waitingResponse=!0;const e=await B().get(`${this.protocol}://${this.address}/api/job`,{headers:this.apiHeader,data:{},timeout:400});this.store?.commit("printer/updateOctoPrintModelData",e.data)}catch{}finally{this.waitingResponse=!1}}),500)}async downloadFile(e,t){this.stopPolling();try{const o=await B().get(`${this.protocol}://${this.address}/api/files/local/${e}`,{headers:this.apiHeader,data:{}}),s=o.data.refs.download,r=await B().get(`${s}`,{headers:this.apiHeader,responseType:"text",data:{},onDownloadProgress:o=>{const s=Math.round(100*o.loaded/o.total)/100;t(s,`Downloading ${e}`)}});return r.data}catch(o){console.error(o)}finally{this.startPolling()}return Promise.reject(`Could not download file ${e}`)}}let ge=class extends s.ZP{constructor(...e){super(...e),(0,h.Z)(this,"showDialog",void 0),(0,h.Z)(this,"address",""),(0,h.Z)(this,"connector",void 0),(0,h.Z)(this,"connectionType",J.rrf),(0,h.Z)(this,"password",""),(0,h.Z)(this,"error",""),(0,h.Z)(this,"busy",!1)}mounted(){try{const e=this.$store.getters["connections/getLastConnection"];e&&(this.address=e.address,this.connectionType=e.connectionType)}catch(e){}}get isConnected(){return this.$store.getters["connections/isConnected"]}get currentConnection(){return this.$store.state.connection}async connect(){if(!this.isConnected&&!this.busy)try{switch(this.busy=!0,this.connectionType){case 0:try{this.connector=new de(this.$store),await this.connector.connect(this.address,this.password)}catch{}try{this.connector.connected||(this.connector=new ue(this.$store),await this.connector.connect(this.address))}catch{}break;case 1:try{this.connector=new he(this.$store),await this.connector.connect(this.address,this.password)}catch{}break;case 2:try{if(""===this.password||"ENTER API KEY"===this.password)return this.password="ENTER API KEY",void(this.busy=!1);this.connector=new pe(this.$store),await this.connector.connect(this.address,this.password)}catch{}break}if(this.busy=!1,!this.connector.connected)return void(this.error=`Unable to connect to ${this.address}`);this.$store.commit("connections/setConnection",this.connector),this.showDialog=!1}finally{this.busy=!1}}cancel(){this.showDialog=!1}};(0,p.gn)([(0,g.vZ)("show",{type:Boolean})],ge.prototype,"showDialog",void 0),ge=(0,p.gn)([g.wA],ge);var me=ge,ve=me,fe=(0,H.Z)(ve,ne,ae,!1,null,"483141ac",null),we=fe.exports,ye=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"div-style"},[""===e.getConnectionIcon?t("span",{class:e.getLabelStyle},[e._v("Sindarius G-Code Viewer")]):e._e(),t("span",[t(re.Z,{staticClass:"align-text mr-3",attrs:{contain:!0,width:"45",height:"45",src:e.getConnectionIcon}}),t("span",{class:e.getLabelStyle},[e._v(e._s(e.address)+" "+e._s(e.status))])],1)])},be=[];let xe=class extends((0,g.Wr)(k)){get getConnectionIcon(){try{switch(this.$store.state.connections.connection?.connectionType){case J.rrf:return o(52585);case J.klipper:return o(89790);case J.octoprint:return o(35782)}}catch{}return""}get getLabelStyle(){return this.isMobile?"address-text-sm":"address-text"}get address(){return this.$store.state.connections.connection?.address??""}get status(){return""!==this.address?` -- ${this.$store.state.printer.status}`:""}};xe=(0,p.gn)([g.wA],xe);var Ze=xe,_e=Ze,Pe=(0,H.Z)(_e,ye,be,!1,null,"0d62b58a",null),Ce=Pe.exports,ke=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(m.Z,{staticClass:"toggle-align",attrs:{dense:"",multiple:""},model:{value:e.selectedButton,callback:function(t){e.selectedButton=t},expression:"selectedButton"}},[t("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.openlocal"),icon:"mdi-folder-outline"},on:{click:e.showFileSelect}}),t("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.resetCamera"),icon:"mdi-camera-outline"},on:{click:e.resetCamera}}),t("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.toolstitle"),icon:"mdi-printer-3d-nozzle-outline"},on:{click:function(t){e.showToolsDialog=!0}}}),t("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.reloadViewer"),icon:"mdi-reload",color:e.reloadRequiredColor},on:{click:e.reloadViewer}}),t("ToolbarPopover",{attrs:{color:e.qualityColor,icon:e.qualityIcon},scopedSlots:e._u([{key:"header",fn:function(){return[t(n.Z,{on:{click:e.reloadViewer}},[t(a.Z,{attrs:{size:"35"}},[e._v("mdi-reload")])],1),t(c.Z),e._v(" Quality ")]},proxy:!0},{key:"content",fn:function(){return[t("RenderQuality"),t("RenderMode")]},proxy:!0}])}),t("ToolbarPopover",{attrs:{icon:"mdi-palette"},scopedSlots:e._u([{key:"header",fn:function(){return[t(n.Z,{on:{click:e.reloadViewer}},[t(a.Z,{attrs:{size:"35"}},[e._v("mdi-reload")])],1),t(c.Z),e._v(" Colors ")]},proxy:!0},{key:"content",fn:function(){return[t("RenderColors")]},proxy:!0}])}),t("ToolbarPopover",{attrs:{icon:"mdi-cctv"},scopedSlots:e._u([{key:"content",fn:function(){return[t("CustomActions")]},proxy:!0}])}),e.canLiveTrack?t("ToolbarItem",{attrs:{title:e.$t("viewer.toolbar.liveTrack"),icon:"mdi-vhs",color:"warning"},on:{click:e.liveTrack}}):e._e()],1),t("tools-dialog",{attrs:{show:e.showToolsDialog},on:{"update:show":function(t){e.showToolsDialog=t}}}),t("input",{ref:"fileInput",attrs:{type:"file",accept:".g,.gcode,.gc,.gco,.nc,.ngc,.tap",hidden:""},on:{change:e.fileSelected}})],1)},$e=[],Se=o(99674),Fe=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(oe.Z,{model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(ee.Z,[t(te.EB,[t("strong",[e._v(" "+e._s(e.$t("viewer.tools.title")))]),t(c.Z),t("div",{staticClass:"tool-quantity"},[t(Se.Z,{attrs:{type:"number",hint:e.$t("viewer.tools.quantity"),"persistent-hint":"",rules:[e.numberRule],items:e.toolNumbers},model:{value:e.toolQty,callback:function(t){e.toolQty=t},expression:"toolQty"}})],1)],1),t(te.ZB,[t(w.Z,e._l(e.editTools,(function(e,o){return t(v.Z,{key:e.id,attrs:{cols:"12",md:"4"}},[t("ToolCard",{attrs:{tool:e,toolIndex:o}})],1)})),1)],1),t(te.h7,[t(n.Z,{attrs:{color:"warning"},on:{click:e.reset}},[e._v(" "+e._s(e.$t("default.reset"))+" ")]),t(n.Z,{attrs:{color:"warning"},on:{click:e.loadDefault}},[e._v(" "+e._s(e.$t("default.default"))+" ")]),t(c.Z),t(n.Z,{attrs:{color:"info"},on:{click:e.save}},[e._v(" "+e._s(e.$t("default.save"))+" ")]),t(n.Z,{attrs:{color:"error"},on:{click:e.cancel}},[e._v(" "+e._s(e.$t("default.cancel"))+" ")])],1)],1)],1)},Te=[],Ae=(o(57658),o(50184)),Me=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ee.Z,{attrs:{outlined:"",rounded:"10"}},[t(te.EB,[t("strong",[e._v(e._s(e.$t(""))+" #"+e._s(e.toolIndex))])]),t(te.ZB,[t("color-picker",{model:{value:e.toolColor,callback:function(t){e.toolColor=t},expression:"toolColor"}}),t(Ae.Z,{attrs:{hint:"Type","persistent-hint":"",items:e.toolTypes},model:{value:e.toolType,callback:function(t){e.toolType=t},expression:"toolType"}}),t(ie.Z,{attrs:{hint:"Diameter",type:"number","persistent-hint":""},model:{value:e.toolDiameter,callback:function(t){e.toolDiameter=t},expression:"toolDiameter"}})],1)],1)},ze=[],Re=o(14699),Be=o(44568),Ie=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(w.Z,{attrs:{justify:"center",align:"center"}},[t(v.Z,{staticClass:"shrink",style:[e.backgroundColorStyle]},[t(ie.Z,{staticClass:"ma-0 pa-0",attrs:{"hide-details":"",solo:""},on:{blur:function(t){return e.updateValue(e.internalTextColor)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.updateValue(e.internalTextColor)}},scopedSlots:e._u([{key:"append",fn:function(){return[t(Be.Z,{attrs:{top:"","nudge-bottom":"105","nudge-left":"16","close-on-content-click":!1},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t("div",e._g({style:e.swatchStyle},o))]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(ee.Z,[t(te.ZB,{staticClass:"pa-0"},[t(Re.Z,{staticClass:"index-placement",attrs:{flat:""},on:{input:function(t){return e.updateValue(e.color)}},model:{value:e.color,callback:function(t){e.color=t},expression:"color"}})],1)],1)],1)]},proxy:!0}]),model:{value:e.internalTextColor,callback:function(t){e.internalTextColor=t},expression:"internalTextColor"}})],1)],1)},Ne=[];let De=class extends s.ZP{constructor(...e){super(...e),(0,h.Z)(this,"editcolormodel",void 0),(0,h.Z)(this,"internalTextColor","#000000"),(0,h.Z)(this,"color","#000000"),(0,h.Z)(this,"menu",!1)}get backgroundColorStyle(){return{minWidth:"220px",backgroundColor:this.color}}get swatchStyle(){const{color:e,menu:t}=this;return{backgroundColor:e,cursor:"pointer",height:"30px",width:"30px",borderRadius:t?"50%":"4px",transition:"border-radius 200ms ease-in-out"}}mounted(){this.color=this.editcolormodel,this.internalTextColor=this.editcolormodel}updateValue(e){this.color=e,e.startsWith("#")||(this.color="#"+e),this.color=this.color.toUpperCase().padEnd(7,"0").substring(0,7),this.internalTextColor=this.color,this.$emit("change",this.color)}editColorChanged(e){this.color=e,this.internalTextColor=e}};(0,p.gn)([(0,g.yU)("editorcolor","change")],De.prototype,"editcolormodel",void 0),(0,p.gn)([(0,g.RL)("editcolor")],De.prototype,"editColorChanged",null),De=(0,p.gn)([g.wA],De);var Oe=De,qe=Oe,Ee=(0,H.Z)(qe,Ie,Ne,!1,null,"8c8debb0",null),Le=Ee.exports;let Ve=class extends z{constructor(...e){super(...e),(0,h.Z)(this,"tool",void 0),(0,h.Z)(this,"toolIndex",void 0),(0,h.Z)(this,"toolTypes",["Extruder","Endmill"])}get toolColor(){return this.tool.color}set toolColor(e){this.tool.color=e}get toolType(){return this.tool.toolType}set toolType(e){this.tool.toolType=e}get toolDiameter(){return this.tool.diameter}set toolDiameter(e){isNaN(e)?this.tool.diameter=.4:this.tool.diameter=Number(e)}};(0,p.gn)([(0,g.fI)()],Ve.prototype,"tool",void 0),(0,p.gn)([(0,g.fI)()],Ve.prototype,"toolIndex",void 0),Ve=(0,p.gn)([(0,g.wA)({components:{ColorPicker:Le}})],Ve);var He=Ve,We=He,Qe=(0,H.Z)(We,Me,ze,!1,null,"a0001ed4",null),Ge=Qe.exports;class je{constructor(e="#00ff00",t=.4,o=Z.qK.Extruder){(0,h.Z)(this,"id",0),(0,h.Z)(this,"color",void 0),(0,h.Z)(this,"diameter",void 0),(0,h.Z)(this,"toolType",void 0),this.id=Math.random(),this.color=e,this.diameter=t,this.toolType=o}}const Je={updateCurrentFile(e,t){s.ZP.set(e,"currentFileName",t)},liveTracking(e,t){s.ZP.set(e,"liveTracking",t)},saveTools(e,t){s.ZP.set(e,"tools",t),localStorage.setItem("tools",JSON.stringify(t))},showProgress(e,t){s.ZP.set(e,"showProgress",t)},reloadRequired(e,t){s.ZP.set(e,"reloadRequired",t)},renderQuality(e,t){localStorage.setItem("renderQuality",`${t}`),s.ZP.set(e,"renderQuality",t)},renderMode(e,t){localStorage.setItem("renderMode",`${t}`),s.ZP.set(e,"renderMode",t)},lineMode(e,t){localStorage.setItem("lineMode",`${t}`),s.ZP.set(e,"lineMode",t),t&&(localStorage.setItem("voxelMode","false"),s.ZP.set(e,"voxelMode",!1))},voxelMode(e,t){localStorage.setItem("voxelMode",`${t}`),s.ZP.set(e,"voxelMode",t),t&&(localStorage.setItem("lineMode","false"),s.ZP.set(e,"lineMode",!1))},voxelWidth(e,t){t<0&&(t=1),localStorage.setItem("voxelWidth",`${t}`),s.ZP.set(e,"voxelWidth",t)},voxelHeight(e,t){t<0&&(t=1),localStorage.setItem("voxelHeight",`${t}`),s.ZP.set(e,"voxelHeight",t)},travelMoves(e,t){localStorage.setItem("travelMoves",`${t}`),s.ZP.set(e,"travelMoves",t)},hqRender(e,t){localStorage.setItem("hqRender",`${t}`),s.ZP.set(e,"hqRender",t)},specular(e,t){localStorage.setItem("specular",`${t}`),s.ZP.set(e,"specular",t)},minfeedrate(e,t){t<0&&(t=1),localStorage.setItem("minfeedrate",`${t}`),s.ZP.set(e,"minfeedrate",t)},maxfeedrate(e,t){t<0&&(t=1),localStorage.setItem("maxfeedrate",`${t}`),s.ZP.set(e,"maxfeedrate",t)},minfeedcolor(e,t){localStorage.setItem("minfeedcolor",`${t}`),s.ZP.set(e,"minfeedcolor",t)},maxfeedcolor(e,t){localStorage.setItem("maxfeedcolor",`${t}`),s.ZP.set(e,"maxfeedcolor",t)},transparency(e,t){localStorage.setItem("transparency",`${t}`),s.ZP.set(e,"transparency",t)},progressColor(e,t){localStorage.setItem("progressColor",t),s.ZP.set(e,"progressColor",t)},backgroundColor(e,t){localStorage.setItem("backgroundColor",t),s.ZP.set(e,"backgroundColor",t)},gridColor(e,t){localStorage.setItem("gridColor",t),s.ZP.set(e,"gridColor",t)},fileOffset(e,t){localStorage.setItem("fileOffset",`${t}`),s.ZP.set(e,"fileOffset",t)},g1AsExtrusion(e,t){localStorage.setItem("g1AsExtrusion",`${t}`),s.ZP.set(e,"g1AsExtrusion",t)},showGCodeStream(e,t){localStorage.setItem("showGCodeStream",`${t}`),s.ZP.set(e,"showGCodeStream",t)},perimeterOnly(e,t){localStorage.setItem("perimeterOnly",`${t}`),s.ZP.set(e,"perimeterOnly",t)},zBelt(e,t){localStorage.setItem("zBelt",`${t}`),s.ZP.set(e,"zBelt",t)},zBeltAngle(e,t){localStorage.setItem("zBeltAngle",`${t}`),s.ZP.set(e,"zBeltAngle",t)},transparentPercent(e,t){s.ZP.set(e,"transparentPercent",t)},progressMode(e,t){s.ZP.set(e,"progressMode",t)},showNozzle(e,t){localStorage.setItem("showNozzle",`${t}`),s.ZP.set(e,"showNozzle",t)},showBed(e,t){localStorage.setItem("showBed",`${t}`),s.ZP.set(e,"showBed",t)},showAxis(e,t){localStorage.setItem("showAxis",`${t}`),s.ZP.set(e,"showAxis",t)}};function Ke(e,t,o=!1){let s=e;if(null===s)try{const e=localStorage.getItem(t);if(null===e)return o;s="true"==e}catch{s=!1}return s}function Ue(e,t,o=1){let s=e;if(null===s||-1===s){const e=localStorage.getItem(t);if(e){const t=Number(e);isNaN(t)||(s=t)}else s=o}return s}function Xe(e,t,o){let s=e;if(null===s)try{const e=localStorage.getItem(t);if(null===e)return o;s=e.length>0?e:o}catch{s=o}return s}const Ye={renderQuality(e){let t=e.renderQuality;if(-1===t){const e=localStorage.getItem("renderQuality");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=3}return t},renderMode(e){let t=e.renderMode;if(-1===t){const e=localStorage.getItem("renderMode");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=0}return t},lineMode(e){return Ke(e.lineMode,"lineMode")},voxelMode(e){return Ke(e.voxelMode,"voxelMode")},voxelWidth(e){let t=e.voxelWidth;if(-1===t){const e=localStorage.getItem("voxelWidth");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=1}return t},voxelHeight(e){let t=e.voxelHeight;if(-1===t){const e=localStorage.getItem("voxelHeight");if(e){const o=Number(e);isNaN(o)||(t=o)}else t=1}return t},travelMoves(e){let t=e.travelMoves;if(null===t)try{const e=localStorage.getItem("travelMoves");t="true"==e}catch{t=!1}return t},hqRender(e){return Ke(e.hqRender,"hqRender")},specular(e){return Ke(e.specular,"specular")},minfeedrate(e){return Ue(e.minfeedrate,"minfeedrate",10)},maxfeedrate(e){return Ue(e.maxfeedrate,"maxfeedrate",60)},minfeedcolor(e){return Xe(e.minfeedcolor,"minfeedcolor","#0000FF")},maxfeedcolor(e){return Xe(e.maxfeedcolor,"maxfeedcolor","#FF0000")},transparency(e){return Ke(e.transparency,"transparency")},progressColor(e){return Xe(e.progressColor,"progressColor","#00FF00")},backgroundColor(e){return Xe(e.backgroundColor,"backgroundColor","#000000")},gridColor(e){return Xe(e.gridColor,"gridColor","#0000FF")},fileOffset(e){return Ue(e.fileOffset,"fileOffset",0)},g1AsExtrusion(e){return Ke(e.g1AsExtrusion,"g1AsExtrusion")},showGCodeStream(e){return Ke(e.showGCodeStream,"showGCodeStream")},perimeterOnly(e){return Ke(e.perimeterOnly,"perimeterOnly")},zBelt(e){return Ke(e.zBelt,"zBelt")},zBeltAngle(e){return Ue(e.zBeltAngle,"zBeltAngle")},transparentPercent(e){return e.transparentPercent},progressMode(e){return e.progressMode},showNozzle(e){return Ke(e.showNozzle,"showNozzle",!0)},showBed(e){return Ke(e.showBed,"showBed",!0)},showAxis(e){return Ke(e.showAxis,"showAxis",!0)}},et={},tt=()=>{const e=localStorage.getItem("tools");if(e){const t=JSON.parse(e);if(0!==t.length)return t}return[new je("#00FFFF",.4,Z.qK.Extruder),new je("#FF00FF",.4,Z.qK.Extruder),new je("#FFFF00",.4,Z.qK.Extruder),new je("#000000",.4,Z.qK.Extruder),new je("#FFFFFF",.4,Z.qK.Extruder)]},ot=()=>[new je("#00FFFF",.4,Z.qK.Extruder),new je("#FF00FF",.4,Z.qK.Extruder),new je("#FFFF00",.4,Z.qK.Extruder),new je("#000000",.4,Z.qK.Extruder),new je("#FFFFFF",.4,Z.qK.Extruder)],st=()=>({currentFileName:null,liveTracking:!1,fileData:null,showProgress:!1,tools:tt(),reloadRequired:!1,renderQuality:-1,renderMode:-1,lineMode:null,voxelMode:null,voxelWidth:-1,voxelHeight:-1,travelMoves:null,hqRender:null,specular:null,minfeedrate:null,minfeedcolor:null,maxfeedrate:null,maxfeedcolor:null,transparency:null,progressColor:null,backgroundColor:null,gridColor:null,fileOffset:null,g1AsExtrusion:null,showGCodeStream:null,perimeterOnly:!1,zBelt:!1,zBeltAngle:45,transparentPercent:.25,progressMode:!1,showNozzle:null,showBed:null,showAxis:null}),rt=st(),it={namespaced:!0,state:rt,mutations:Je,getters:Ye,actions:et};let nt=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"showDialog",void 0),(0,h.Z)(this,"editTools",[]),(0,h.Z)(this,"toolQty",1),(0,h.Z)(this,"toolNumbers",[...Array(10).keys()].map((e=>e+1)))}reset(){const e=tt();this.editTools.splice(0,this.editTools.length),this.editTools.push(...JSON.parse(JSON.stringify(e))),this.editTools.forEach((e=>e.id=Math.random())),this.toolQty=this.editTools.length}mounted(){this.reset()}save(){this.$store.commit("viewer/saveTools",this.editTools),this.currentFileName&&(this.reloadRequired=!1),this.showDialog=!1,this.updateTools(),this.viewer().gcodeProcessor.forceRedraw()}cancel(){this.showDialog=!1,this.reset()}numberRule(e){const t=parseInt(e);return!isNaN(t)&&t>=1&&t<=10||this.$t("viewer.tools.qtyerror")}loadDefault(){this.editTools.splice(0,this.editTools.length),this.editTools.push(...ot()),this.editTools.forEach((e=>e.id=Math.random())),this.toolQty=this.editTools.length}toolQtyUpdated(e){if(!0===this.numberRule(e))if(e>this.editTools.length){const t=e-this.editTools.length-1;for(let e=0;e<=t;e++)this.editTools.push(new je)}else{const t=this.editTools.length-e-1;for(let e=0;e<=t;e++)this.editTools.pop()}}};(0,p.gn)([(0,g.vZ)("show",{type:Boolean})],nt.prototype,"showDialog",void 0),(0,p.gn)([(0,g.RL)("toolQty")],nt.prototype,"toolQtyUpdated",null),nt=(0,p.gn)([(0,g.wA)({components:{ToolCard:Ge}})],nt);var at=nt,lt=at,ct=(0,H.Z)(lt,Fe,Te,!1,null,"57ebd170",null),dt=ct.exports,ut=o(82082),ht=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(ut.Z,{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(n.Z,e._g(e._b({on:{click:function(t){return t.stopPropagation(),e.clicked.apply(null,arguments)}}},"v-btn",e.size,!1),o),[t(a.Z,e._b({attrs:{color:e.color}},"v-icon",e.size,!1),[e._v(e._s(e.icon))])],1)]}}])},[t("span",{staticClass:"whitespace-line"},[e._v(e._s(e.title))])])},pt=[];let gt=class extends s.ZP{constructor(...e){super(...e),(0,h.Z)(this,"icon",void 0),(0,h.Z)(this,"title",void 0),(0,h.Z)(this,"color",void 0)}clicked(){this.$emit("click")}get size(){const e={xs:"",sm:"medium",md:"",lg:"large",xl:"x-large"}[this.$vuetify.breakpoint.name];return e?{[e]:!0}:{}}};(0,p.gn)([(0,g.fI)()],gt.prototype,"icon",void 0),(0,p.gn)([(0,g.fI)()],gt.prototype,"title",void 0),(0,p.gn)([(0,g.fI)()],gt.prototype,"color",void 0),gt=(0,p.gn)([g.wA],gt);var mt=gt,vt=mt,ft=(0,H.Z)(vt,ht,pt,!1,null,"12070923",null),wt=ft.exports,yt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(Be.Z,{attrs:{"close-on-content-click":!1,"nudge-width":200,"offset-y":""},scopedSlots:e._u([{key:"activator",fn:function({on:o}){return[t(n.Z,e._g(e._b({on:{click:function(t){t.stopPropagation(),e.menu=!e.menu}}},"v-btn",e.size,!1),o),[t(a.Z,e._b({attrs:{color:e.color}},"v-icon",e.size,!1),[e._v(" "+e._s(e.icon)+" ")])],1)]}}]),model:{value:e.menu,callback:function(t){e.menu=t},expression:"menu"}},[t(ee.Z,{attrs:{outlined:"",shaped:"",elevation:"10"}},[t(te.EB,[e._t("header"),t(c.Z),t(n.Z,{attrs:{color:"error"},on:{click:function(t){e.menu=!1}}},[t(a.Z,[e._v("mdi-close")])],1)],2),t(te.ZB,{staticClass:"overflow-y-auto card-overflow"},[e._t("content")],2)],1)],1)},bt=[];let xt=class extends s.ZP{constructor(...e){super(...e),(0,h.Z)(this,"menu",!1),(0,h.Z)(this,"icon",void 0),(0,h.Z)(this,"title",void 0),(0,h.Z)(this,"color",void 0)}get size(){const e={xs:"",sm:"medium",md:"",lg:"large",xl:"x-large"}[this.$vuetify.breakpoint.name];return e?{[e]:!0}:{}}};(0,p.gn)([(0,g.fI)()],xt.prototype,"icon",void 0),(0,p.gn)([(0,g.fI)()],xt.prototype,"title",void 0),(0,p.gn)([(0,g.fI)()],xt.prototype,"color",void 0),xt=(0,p.gn)([g.wA],xt);var Zt=xt,_t=Zt,Pt=(0,H.Z)(_t,yt,bt,!1,null,"289d1d93",null),Ct=Pt.exports,kt=o(6319),$t=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(Ae.Z,{staticClass:"pa-0 mt-4",attrs:{dense:"",items:e.items,"item-text":"name","item-value":"value",label:"Quality","persistent-hint":"",hint:e.renderQualityWarning},model:{value:e.renderQuality,callback:function(t){e.renderQuality=t},expression:"renderQuality"}}),e.renderQuality>4?t(kt.Z,{staticClass:"pa-0",attrs:{dense:"",label:e.$t("viewer.settings.hqrender")},model:{value:e.hqRender,callback:function(t){e.hqRender=t},expression:"hqRender"}}):e._e()],1)},St=[];let Ft=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"items",[{name:"Low",value:1},{name:"Medium",value:3},{name:"High",value:5},{name:"Max",value:6}])}get renderQualityWarning(){return 6===this.renderQuality?"Max quality ignores Force Line Mode ":""}};Ft=(0,p.gn)([g.wA],Ft);var Tt=Ft,At=Tt,Mt=(0,H.Z)(At,$t,St,!1,null,"152f4d62",null),zt=Mt.exports,Rt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(w.Z,[t(v.Z,{attrs:{cols:"6"}},[t(Ae.Z,{attrs:{items:e.items,"item-text":"name","item-value":"value",label:"Render Mode","persistent-hint":""},model:{value:e.renderMode,callback:function(t){e.renderMode=t},expression:"renderMode"}}),1===e.renderMode?t(w.Z,{attrs:{dense:""}},[t(v.Z,{attrs:{cols:"6"}},[t(ie.Z,{attrs:{type:"number",label:e.$t("viewer.settings.minfeedrate")},model:{value:e.minFeedRate,callback:function(t){e.minFeedRate=t},expression:"minFeedRate"}})],1),t(v.Z,{attrs:{cols:"6"}},[t("color-picker",{model:{value:e.minFeedColor,callback:function(t){e.minFeedColor=t},expression:"minFeedColor"}})],1),t(v.Z,{attrs:{cols:"6"}},[t(ie.Z,{attrs:{type:"number",label:e.$t("viewer.settings.maxfeedrate")},model:{value:e.maxFeedRate,callback:function(t){e.maxFeedRate=t},expression:"maxFeedRate"}})],1),t(v.Z,{attrs:{cols:"6"}},[t("color-picker",{model:{value:e.maxFeedColor,callback:function(t){e.maxFeedColor=t},expression:"maxFeedColor"}})],1)],1):e._e(),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:"Show Travel Moves"},model:{value:e.travelMoves,callback:function(t){e.travelMoves=t},expression:"travelMoves"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:"Progress Mode"},model:{value:e.progressMode,callback:function(t){e.progressMode=t},expression:"progressMode"}}),t(kt.Z,{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.transparency")},model:{value:e.transparency,callback:function(t){e.transparency=t},expression:"transparency"}}),e.transparency?t(y.Z,{attrs:{min:"0",max:"100",step:"1"},model:{value:e.transparentPercent,callback:function(t){e.transparentPercent=t},expression:"transparentPercent"}}):e._e(),t(kt.Z,{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.forceLineMode")},model:{value:e.lineMode,callback:function(t){e.lineMode=t},expression:"lineMode"}}),t(kt.Z,{staticClass:"ma-0",attrs:{dense:"",label:e.$t("viewer.settings.voxelMode")},model:{value:e.voxelMode,callback:function(t){e.voxelMode=t},expression:"voxelMode"}}),e.voxelMode?t(w.Z,[t(v.Z,{attrs:{cols:"6"}},[t(ie.Z,{attrs:{type:"number",label:e.$t("viewer.settings.voxelWidth")},model:{value:e.voxelWidth,callback:function(t){e.voxelWidth=t},expression:"voxelWidth"}})],1),t(v.Z,{attrs:{cols:"6"}},[t(ie.Z,{attrs:{type:"number",label:e.$t("viewer.settings.voxelHeight")},model:{value:e.voxelHeight,callback:function(t){e.voxelHeight=t},expression:"voxelHeight"}})],1),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.useSpecular")},model:{value:e.specular,callback:function(t){e.specular=t},expression:"specular"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.g1AsExtrusion")},model:{value:e.g1AsExtrusion,callback:function(t){e.g1AsExtrusion=t},expression:"g1AsExtrusion"}})],1):e._e()],1),t(v.Z,{attrs:{cols:"6"}},[t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.showGCodeStream")},model:{value:e.showGCodeStream,callback:function(t){e.showGCodeStream=t},expression:"showGCodeStream"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.showNozzle")},model:{value:e.showNozzle,callback:function(t){e.showNozzle=t},expression:"showNozzle"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.showBed")},model:{value:e.showBed,callback:function(t){e.showBed=t},expression:"showBed"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.showAxis")},model:{value:e.showAxis,callback:function(t){e.showAxis=t},expression:"showAxis"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.perimeterOnly")},model:{value:e.perimeterOnly,callback:function(t){e.perimeterOnly=t},expression:"perimeterOnly"}}),t(ie.Z,{attrs:{type:"number",dense:"",label:e.$t("viewer.settings.fileOffset"),hint:"Adjust if print appears faster than cursor"},model:{value:e.fileOffset,callback:function(t){e.fileOffset=t},expression:"fileOffset"}}),t(kt.Z,{staticClass:"mt-1 mb-0",attrs:{dense:"",label:e.$t("viewer.settings.zBelt")},model:{value:e.zBelt,callback:function(t){e.zBelt=t},expression:"zBelt"}}),t(ie.Z,{directives:[{name:"show",rawName:"v-show",value:e.zBelt,expression:"zBelt"}],attrs:{type:"number",dense:"",label:e.$t("viewer.settings.zBeltAngle"),hint:"Gantry Angle"},model:{value:e.zBeltAngle,callback:function(t){e.zBeltAngle=t},expression:"zBeltAngle"}})],1)],1)],1)},Bt=[];let It=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"items",[{name:"Color",value:0},{name:"Feed Rate",value:1},{name:"Feature",value:2}])}};It=(0,p.gn)([(0,g.wA)({components:{ColorPicker:Le}})],It);var Nt=It,Dt=Nt,Ot=(0,H.Z)(Dt,Rt,Bt,!1,null,"480a8f7e",null),qt=Ot.exports,Et=o(9449),Lt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(Et.Z,[t("tbody",[t("tr",[t("td",[e._v("Progress Color")]),t("td",[t("ColorPicker",{model:{value:e.progressColor,callback:function(t){e.progressColor=t},expression:"progressColor"}})],1)]),t("tr",[t("td",[e._v("Background Color")]),t("td",[t("ColorPicker",{model:{value:e.backgroundColor,callback:function(t){e.backgroundColor=t},expression:"backgroundColor"}})],1)]),t("tr",[t("td",[e._v("Grid Color")]),t("td",[t("ColorPicker",{model:{value:e.gridColor,callback:function(t){e.gridColor=t},expression:"gridColor"}})],1)])])])],1)},Vt=[];let Ht=class extends((0,g.Wr)(z)){};Ht=(0,p.gn)([(0,g.wA)({components:{ColorPicker:Le}})],Ht);var Wt=Ht,Qt=Wt,Gt=(0,H.Z)(Qt,Lt,Vt,!1,null,"03ebea79",null),jt=Gt.exports,Jt=function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",[t(se.Z,{on:{submit:function(t){return t.preventDefault(),e.set_camera.apply(null,arguments)},keypress:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.set_camera.apply(null,arguments)}}},[t(w.Z,{attrs:{dense:""}},[t(v.Z,{attrs:{cols:"6"}},[t("h3",[e._v("Camera Position")]),t(Et.Z,{attrs:{header:"Set Camera Position"}},[t("tbody",[t("tr",[t("td",[e._v("X")]),t("td",[t(ie.Z,{model:{value:e.camera_position_x,callback:function(t){e.camera_position_x=t},expression:"camera_position_x"}})],1)]),t("tr",[t("td",[e._v("Y")]),t("td",[t(ie.Z,{model:{value:e.camera_position_y,callback:function(t){e.camera_position_y=t},expression:"camera_position_y"}})],1)]),t("tr",[t("td",[e._v("Z")]),t("td",[t(ie.Z,{model:{value:e.camera_position_z,callback:function(t){e.camera_position_z=t},expression:"camera_position_z"}})],1)])])])],1),t(v.Z,{attrs:{cols:"6"}},[t("h3",[e._v("Target Position")]),t(Et.Z,{attrs:{header:"Set Camera Position",dense:""}},[t("tbody",[t("tr",[t("td",[e._v("X")]),t("td",[t(ie.Z,{model:{value:e.target_position_x,callback:function(t){e.target_position_x=t},expression:"target_position_x"}})],1)]),t("tr",[t("td",[e._v("Y")]),t("td",[t(ie.Z,{model:{value:e.target_position_y,callback:function(t){e.target_position_y=t},expression:"target_position_y"}})],1)]),t("tr",[t("td",[e._v("Z")]),t("td",[t(ie.Z,{model:{value:e.target_position_z,callback:function(t){e.target_position_z=t},expression:"target_position_z"}})],1)])])])],1)],1),t(n.Z,{staticClass:"btnwidth",attrs:{type:"submit"},on:{click:e.set_camera}},[e._v("Set Camera")])],1),t(ie.Z,{model:{value:e.width,callback:function(t){e.width=t},expression:"width"}}),t(ie.Z,{model:{value:e.height,callback:function(t){e.height=t},expression:"height"}}),t(n.Z,{staticClass:"btnwidth",on:{click:e.play_layers}},[e._v("Save Layers")]),t(n.Z,{staticClass:"btnwidth",on:{click:e.take_screenshot}},[e._v("Take Screenshot")])],1)},Kt=[];let Ut=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"width",1920),(0,h.Z)(this,"height",1080),(0,h.Z)(this,"camera_x",0),(0,h.Z)(this,"camera_y",0),(0,h.Z)(this,"camera_z",0),(0,h.Z)(this,"target_x",0),(0,h.Z)(this,"target_y",0),(0,h.Z)(this,"target_z",0)}mounted(){console.log("mounted")}get camera_position_x(){return this.camera_x}set camera_position_x(e){this.camera_x=e}get camera_position_y(){return this.camera_y}set camera_position_y(e){this.camera_y=e}get camera_position_z(){return this.camera_z}set camera_position_z(e){this.camera_z=e}get target_position_x(){return this.target_x}set target_position_x(e){this.target_x=e}get target_position_y(){return this.target_y}set target_position_y(e){this.target_y=e}get target_position_z(){return this.target_z}set target_position_z(e){this.target_z=e}set_camera(){console.log(`Camera ${this.camera_x} ${this.camera_y} ${this.camera_z}`),this.setCameraPosition(this.camera_x,this.camera_y,this.camera_z),console.log(`Target ${this.target_x} ${this.target_y} ${this.target_z}`),this.setCameraTarget(this.target_x,this.target_y,this.target_z)}take_screenshot(){this.takeScreenshot(this.width,this.height)}async play_layers(){await this.playLayers(this.width,this.height)}};Ut=(0,p.gn)([(0,g.wA)({})],Ut);var Xt=Ut,Yt=Xt,eo=(0,H.Z)(Yt,Jt,Kt,!1,null,"5240c613",null),to=eo.exports;let oo=class extends((0,g.Wr)(z)){constructor(...e){super(...e),(0,h.Z)(this,"showToolsDialog",!1),(0,h.Z)(this,"fileInput",void 0),(0,h.Z)(this,"selectedButton",[])}showFileSelect(){this.fileInput.click()}fileSelected(e){this.$eventHub.$emit("openLocalFile",e.target.files[0])}liveTrack(){this.$eventHub.$emit("trackCurrentJob")}get reloadRequiredColor(){return this.$store.state.viewer.reloadRequired?"green":""}get qualityColor(){return this.renderQuality<2?"red":""}get qualityIcon(){return this.renderQuality<2?"mdi-speedometer-slow":this.renderQuality<5?"mdi-speedometer-medium":"mdi-speedometer"}selectedButtonUpdated(){this.selectedButton.length>0&&this.selectedButton.pop()}get canLiveTrack(){return!this.$store.state.viewer.liveTracking&&this.$store.getters["printer/isPrinting"]&&!this.showProgress}};(0,p.gn)([(0,g.Rl)("fileInput")],oo.prototype,"fileInput",void 0),(0,p.gn)([(0,g.RL)("selectedButton")],oo.prototype,"selectedButtonUpdated",null),oo=(0,p.gn)([(0,g.wA)({components:{ToolsDialog:dt,ToolbarItem:wt,ToolbarPopover:Ct,RenderQuality:zt,RenderMode:qt,RenderColors:jt,CustomActions:to}})],oo);var so=oo,ro=so,io=(0,H.Z)(ro,ke,$e,!1,null,"bc294aa0",null),no=io.exports,ao=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(oe.Z,{attrs:{width:"600"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(ee.Z,[t(te.EB,[e._v("About the GCode Viewer")]),t(te.ZB,[t("p",[e._v("This viewer was designed and written by Juan Rosario (Sindarius) using BabylonJS."),t("br")]),t("p",[e._v(" This standalone version of the GCode Viewer adds the ability to connect to a RRF/Duet Printer or a Klipper/Moonraker instance for live tracking."),t("br"),e._v(" This web application runs locally so no data is sent up to a server for processing. ")]),t("p",[t("strong",[e._v("***NOTE ASMBL Users: The ASMBL voxel rendering feature is not gone!***")]),e._v(" "),t("br"),e._v(" Go to the "),t("b",[e._v("Quality")]),e._v(" menu and turn on Voxel Mode(ASMBL) to show additive and subtractive gcode. "),t("br"),e._v(" As a bonus you can also use "),t("b",[e._v("Force Line Mode")]),e._v(" to see a line version. Subtractive lines will appear red. ")]),t("p",[e._v(" If you enjoy this viewer consider buying me a coffee"),t("br"),t("strong",[t("a",{attrs:{href:"https://www.buymeacoffee.com/sindarius",target:"_blank"}},[e._v("https://www.buymeacoffee.com/sindarius")])])]),t("p",[e._v(" Don't have a gcode file to load.... How about loading a benchy :) "),t(n.Z,{attrs:{color:"info"},on:{click:e.loadBenchy}},[e._v("Load a benchy!")])],1)])],1)],1)},lo=[];let co=class extends g.w3{constructor(...e){super(...e),(0,h.Z)(this,"showDialog",void 0)}loadBenchy(){this.$eventHub.$emit("LoadBenchy"),this.showDialog=!1}};(0,p.gn)([(0,g.vZ)("show",{type:Boolean})],co.prototype,"showDialog",void 0),co=(0,p.gn)([g.wA],co);var uo=co,ho=uo,po=(0,H.Z)(ho,ao,lo,!1,null,"b50de890",null),go=po.exports,mo=function(){var e=this,t=e._self._c;e._self._setupProxy;return t(oe.Z,{attrs:{width:"600"},model:{value:e.showDialog,callback:function(t){e.showDialog=t},expression:"showDialog"}},[t(ee.Z,[t(te.EB,[t("span",[t(a.Z,[e._v("mdi-google-chrome")]),e._v("Chrome Info")],1),t(te.ZB,[t("div",[e._v("Due to changes in Google Chrome you have to change the "),t("i",[e._v("Block insecure private network requests")]),e._v(" settings to disabled to connect to a local printer.")]),t("br"),t("div",[e._v("Link : chrome://flags/#block-insecure-private-network-requests")]),t(re.Z,{attrs:{src:o(1945)}})],1)],1)],1)],1)},vo=[];let fo=class extends g.w3{constructor(...e){super(...e),(0,h.Z)(this,"showDialog",void 0)}};(0,p.gn)([(0,g.vZ)("show",{type:Boolean})],fo.prototype,"showDialog",void 0),fo=(0,p.gn)([g.wA],fo);var wo=fo,yo=wo,bo=(0,H.Z)(yo,mo,vo,!1,null,null,null),xo=bo.exports;let Zo=class extends((0,g.Wr)(k)){constructor(...e){super(...e),(0,h.Z)(this,"showConnectionDialog",!1),(0,h.Z)(this,"showToolsDialog",!1),(0,h.Z)(this,"showAboutDialog",!1),(0,h.Z)(this,"showChromeInfo",!1)}get connection(){return this.$store.state.connections.connection}get motion(){return this.$store.state.printer.motion}get status(){return this.$store.state.printer.status}get isConnected(){return this.$store.getters["connections/isConnected"]}get toolbarClass(){return this.isMobile?"toolbar-sm":"toolbar"}async downloadTest(){this.$eventHub.$emit("trackCurrentJob")}dumpState(){console.log(this.$store.state)}disconnect(){this.connection.disconnect(),this.$eventHub.$emit("disconnect")}};Zo=(0,p.gn)([(0,g.wA)({components:{Viewer:Y,Connect:we,Status:Ce,Toolbar:no,About:go,ChromeInfo:xo}})],Zo);var _o=Zo,Po=_o,Co=(0,H.Z)(Po,d,u,!1,null,"9ecdb8fc",null),ko=Co.exports,$o=o(95205);(0,$o.z)("/service-worker.js",{ready(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered(){console.log("Service worker has been registered.")},cached(){console.log("Content has been cached for offline use.")},updatefound(){console.log("New content is downloading.")},updated(){console.log("New content is available; please refresh.")},offline(){console.log("No internet connection found. App is running in offline mode.")},error(e){console.error("Error during service worker registration:",e)}});var So=o(20629);const Fo={setConnection(e,t){s.ZP.set(e,"connection",t);const o=new le(t.address,t.connectionType);localStorage.setItem("lastConnection",JSON.stringify(o))},clear(e,t){s.ZP.set(e,"connection",{})}},To={isConnected(e){return null!==e.connection&&e.connection.connected},getLastConnection(){const e=localStorage.getItem("lastConnection");return e?JSON.parse(e):null}},Ao={async download({state:e},t){if(null!==e.connection&&e.connection.connected){const o=await e.connection.downloadFile(t.filename,t.callback);return o}return null}},Mo=()=>({connection:new ce(null)}),zo=Mo(),Ro={namespaced:!0,state:zo,mutations:Fo,getters:To,actions:Ao};class Bo{constructor(e,t){(0,h.Z)(this,"axes",""),(0,h.Z)(this,"position",0),this.axes=e,this.position=t}}class Io{constructor(e,t,o){(0,h.Z)(this,"axes",""),(0,h.Z)(this,"min",0),(0,h.Z)(this,"max",100),this.axes=e,this.min=t,this.max=o}}class No{constructor(){(0,h.Z)(this,"filePosition",0),(0,h.Z)(this,"duration",0),(0,h.Z)(this,"fileName",""),(0,h.Z)(this,"size",0)}}var Do;(function(e){e["Unknown"]="Unknown",e["Printing"]="Printing",e["Idle"]="Idle",e["Error"]="Error",e["Busy"]="Busy",e["Simulating"]="Simulating"})(Do||(Do={}));const Oo={};var qo=o(72378),Eo=o.n(qo);const Lo={updateDuetModelData(e,t){null===e.sourcemodel&&s.ZP.set(e,"sourcemodel",{});const o={...e.sourcemodel};if(Eo()(o,t),s.ZP.set(e,"sourcemodel",o),0==Object.keys(e).length)return;const r=e.sourcemodel.move.axes;let i=[];i=r.map((e=>new Bo(e.letter,e.userPosition))),s.ZP.set(e,"motion",i);let n=[];n=r.map((e=>new Io(e.letter,e.min,e.max)));const a=e.buildVolume.every(((t,o)=>t.min===e.buildVolume[o].min&&t.max===e.buildVolume[o].max));n.length==e.buildVolume.length&&a||s.ZP.set(e,"buildVolume",n);let l=Do.Unknown;switch(e.sourcemodel.state.status){case"idle":l=Do.Idle;break;case"processing":l=Do.Printing,e.job&&s.ZP.set(e.job,"filePosition",e.sourcemodel.job.filePosition);break;case"error":l=Do.Error;break;case"busy":l=Do.Busy;break;case"simulating":l=Do.Simulating,e.job&&s.ZP.set(e.job,"filePosition",e.sourcemodel.job.filePosition);break}if(s.ZP.set(e,"status",l),t.job?.file?.fileName){const t=new No;t.fileName=e.sourcemodel.job?.file?.fileName??"",t.size=e.sourcemodel.job?.file.size,t.filePosition=e.sourcemodel.job.filePosition,t.duration=e.sourcemodel.job.duration,s.ZP.set(e,"job",t)}},updateKlipperModelData(e,t){const o={...e.sourcemodel};if(Eo()(o,t),s.ZP.set(e,"sourcemodel",o),"error"===t.webhooks?.state&&console.error(`Klipper has reported an error : ${t.webhooks?.state_message}`),t.configfile?.config?.stepper_x)try{const o=[];o.push(new Io("X",Number.parseFloat(t.configfile.config.stepper_x.position_endstop),Number.parseFloat(t.configfile.config.stepper_x.position_max))),o.push(new Io("Y",Number.parseFloat(t.configfile.config.stepper_y.position_endstop),Number.parseFloat(t.configfile.config.stepper_y.position_max))),o.push(new Io("Z",Number.parseFloat(t.configfile.config.stepper_z.position_endstop),Number.parseFloat(t.configfile.config.stepper_z.position_max)));const r=e.buildVolume.every(((t,o)=>t.min===e.buildVolume[o].min&&t.max===e.buildVolume[o].max));o.length==e.buildVolume.length&&r||s.ZP.set(e,"buildVolume",o)}catch(a){console.error(a)}let r=Do.Unknown;r=e.sourcemodel.virtual_sdcard.is_active?Do.Printing:Do.Idle,s.ZP.set(e,"status",r);const i=[];i.push(new Bo("X",e.sourcemodel.motion_report.live_position[0])),i.push(new Bo("Y",e.sourcemodel.motion_report.live_position[1])),i.push(new Bo("Z",e.sourcemodel.motion_report.live_position[2])),s.ZP.set(e,"motion",i);const n=new No;n.fileName=e.sourcemodel.virtual_sdcard.file_path,n.filePosition=e.sourcemodel.virtual_sdcard.file_position,n.size=e.sourcemodel.virtual_sdcard.file_size,s.ZP.set(e,"job",n)},updateOctoPrintModelData(e,t){if(t.profiles?._default)try{const o=t.profiles?._default.volume,r=[];r.push(new Io("X",0,Number.parseFloat(o.width))),r.push(new Io("Y",0,Number.parseFloat(o.height))),r.push(new Io("Z",0,Number.parseFloat(o.depth))),s.ZP.set(e,"buildVolume",r)}catch(o){console.error(o)}if(t.state&&(t.state.includes("Printing")?s.ZP.set(e,"status",Do.Printing):s.ZP.set(e,"status",Do.Idle)),t.job){const o=new No;o.fileName=t.job.file.path,o.size=t.job.file.size,e.status===Do.Printing&&(o.filePosition=t.progress.filepos),s.ZP.set(e,"job",o)}},clear(e,t){s.ZP.set(e,"sourcemodel",{}),s.ZP.set(e,"motion",{}),s.ZP.set(e,"status",{}),s.ZP.set(e,"job",{})}},Vo={isCurrentJob(e,t){return e.job?.fileName===t},isPrinting(e){return e.status===Do.Printing||e.status===Do.Simulating}},Ho=()=>({sourcemodel:{},buildVolume:[new Io("X",0,235),new Io("Y",0,250),new Io("Z",0,200)]}),Wo=Ho(),Qo={namespaced:!0,state:Wo,actions:Oo,mutations:Lo,getters:Vo};s.ZP.use(So.ZP);var Go=new So.ZP.Store({modules:{connections:Ro,printer:Qo,viewer:it}}),jo=o(31858);o(8556);s.ZP.use(jo.Z);var Jo=new jo.Z({theme:{dark:!0}}),Ko=o(94592),Uo={language:"English",default:{save:"Save",cancel:"Cancel",reset:"Reset",default:"Default"},$vuetify:{badge:"Badge",close:"Close",dataIterator:{noResultsText:"No matching records found",loadingText:"Loading items..."},dataTable:{itemsPerPageText:"Rows per page:",ariaLabel:{sortDescending:"Sorted descending.",sortAscending:"Sorted ascending.",sortNone:"Not sorted.",activateNone:"Activate to remove sorting.",activateDescending:"Activate to sort descending.",activateAscending:"Activate to sort ascending."},sortBy:"Sort by"},dataFooter:{itemsPerPageText:"Items per page:",itemsPerPageAll:"All",nextPage:"Next page",prevPage:"Previous page",firstPage:"First page",lastPage:"Last page",pageText:"{0}-{1} of {2}"},datePicker:{itemsSelected:"{0} selected"},noDataText:"No data available",carousel:{prev:"Previous visual",next:"Next visual",ariaLabel:{delimiter:"Carousel slide {0} of {1}"}},calendar:{moreEvents:"{0} more"},fileInput:{counter:"{0} files",counterSize:"{0} files ({1} in total)"},timePicker:{am:"AM",pm:"PM"}},viewer:{tools:{title:"Tools",tool:"Tool|Tools",quantity:"Quantity",qtyerror:"The number of tools must be between 1 and 10"},toolbar:{toolstitle:"Edit Tools",openlocal:"Open Local File\nDrag/Drop on Viewer",reloadViewer:"Reload Viewer",resetCamera:"Reset Camera",liveTrack:"Live Track Print"},settings:{hqrender:"HQ Rendering (Round Extrusions)",minfeedrate:"Min Feed Rate",maxfeedrate:"Max Feed Rate",voxelHeight:"Voxel Height",voxelWidth:"Voxel Width",useSpecular:"Specular Lighting",transparency:"Transparency",forceLineMode:"Force Line Mode",voxelMode:"Voxel Mode (ASMBL)",fileOffset:"File Offset",g1AsExtrusion:"G1 As Extrusion (CNC)",showGCodeStream:"Show GCode Stream",perimeterOnly:"Perimeter Only",zBelt:"Z Belt",zBeltAngle:"Z Belt Gantry Angle",showNozzle:"Show Nozzle",showBed:"Show Bed",showAxis:"Show Axes"}}};s.ZP.use(Ko.Z);const Xo=s.ZP.observable({en:Uo});var Yo=new Ko.Z({locale:"en",fallbackLocale:"en",messages:Xo});s.ZP.config.productionTip=!1,s.ZP.prototype.$eventHub=new s.ZP,new s.ZP({store:Go,render:e=>e(ko),vuetify:Jo,i18n:Yo}).$mount("#app")},1945:function(e,t,o){e.exports=o.p+"img/chromeinfo.d4a033f6.png"},52585:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC0AAAAyCAYAAADImlLUAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAA6F4AAOheAW9nZpEAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjEwMPRyoQAABWZJREFUaEPNmX1MVXUYxxFBREBeZGsDIsgsa9RorVWupmkvW6vFH636ozVKrP7qRdAKsSkioaETJWk11pq5FAyJloSImryEKGqAoq5NUOPFShfIy+Xt6fscnss5XM7l3nPvBc53++zu/s7z8r2/87u/c869XlMhH6/kcLCXX2XI3ILRBeAsIHldIIfMKRgMA/Vi2Aq/D5MQcwnGQsFpMWoLj4dKqDkEQyGgTgzag4+HSMrMCkaCQa0YcwTHBUvqzAgG5oMaMeQsHD9fSkyv0DgIVIsRo1SBICk1PULDQFApBlyF8wOl5NQKjQLAb9J4HBF3bKAnn9hJCS/l06uvfKe88vtIjOvFA64TIKWnRtwAHJOGFBKUSm++sZcK9p2l9rb/aDK1t3VRwf5zSnxIYKrWONebJy08Ky4MKrhRzJ2bKHdnJXV39YslY+pCXs6OExQdsdFqnOt61jgK+oPyAL+PadPGw9TbOyDt3VNPj4XWrztE/r5r2Xg595GW7gmF5oKyuPu3UGNDm7TT18gIUUdHlxJ3pv4aXbp4g7q7HZ+N06eu0qLYzWy8jPtJa9eEAn6gFNDJ2lZpMV6dHd20K6eSXnj+awoPSbOe7jF8Z6XQors309uJP1BJcRMNDAxJ5nhlbz1mzeF+fmLBmJDoDQqlEN13z+f07z890oKopeUmJb21j+bNWUuxWOMfvn+Qin5soIvNnXTrVi/dvm2h9vYuqv29hb7MraKXX8xXYqMj05X1bLGo5o+UX6a5PmvGPig4ALzFivNCUrqmiMIzT+dRf/8gbc8+TkH+n9Aj8dvop+JGGh7CunBCnZ3dWMOlFBzwKfFyqzvZqnzI8NCJZwikixXnhISlYFhTYAzeOfgLuX3bcRoaGhY7xtTaepOeW/HV2Mzr9QHcf5lYmlwI5HV8WRJ1+eiDYmk/XjyTP5ecxxo/QVuyKihvdzVV4NTrfRn7+gYnM2yFfThe3wharUnSxW/2Gjr0ywWlOe8YxUWNtHzpbprjnaLMHq//+AezFVO+s5KVM/MarpCn6q4qOax3VxXo1tYhWazpCwG8vXVoEuwSNn8djDfTimWjZtnU4bJLygxqdQOzn/9NLT2MD8E7yXvvFFJWZoVuTTt0AvvbIA4maoKd4t6FmcoO4UjDwyPK1sizrlfHAYlicaJw8KhNsEOeWrKL+m1m154a/mijUNyv6NVxwFGxOF44wA+lQ5pAp+GbIF7bFssgFR1ooJTVJbRq5X7a8NmvVFNzRTHMV8qFd2Xo5jsB+5r4cIzBBE2QYVbiQsOmeN3Gx32h7OnWG6Jnl+fRksdyJuQYJEGsqsJghk2QYR56YCtdON+hzCxrBNNfWHDOekPkLhliVRUGxy7ZrsJXujP118XyqLIyj+jGukChWFWFQaMPqLrERKVT21+jDwQHcS/C26FenAvUiFVVGGyyCXKZxx/dQdVVV5SZ1zvuIk1iVRUGm22C3MJvtsdm2EqzWFWFQdvf4MxGvVhVhUHlZt/ElIpVVRjMtQkyG7liVRUGk2yCzEaSWFWFwcU2QWZjsVhVhUHmT02QmWBf4tRGOOD2pXyKmHgJtwoHY8CgJtgMsJ8YsagvBOzRJJiBPWLNvhAUC/o0STMJ+4gVa5MLgWmaxJkkTSw5FoJ9gKu/8nsK7u8jlpwTEiLBdSkw3XDfSLFiTEiMA39LoemC+8WJBdfEBcA1KTjVcB/3DFuFQhGA/5HSa+QpuH6EtPSMUJC/nKmgF+g1dRWux3WNfemMCMX5qvktGAB6JpyF87nO5Fc7TwrNosB6YPTZkuM5L0pKzYxgIBq8DviG63vAT0H8jxW/8nse5+PRkuKGvLz+B3FxPJ8UDprXAAAAAElFTkSuQmCC"},89790:function(e,t,o){e.exports=o.p+"img/klipper.de48bc3a.png"},35782:function(e,t,o){e.exports=o.p+"img/octoprint.a7f14dec.png"}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var i=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(i.exports,i,i.exports,o),i.loaded=!0,i.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,i){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],i=e[d][2];for(var a=!0,l=0;l<s.length;l++)(!1&i||n>=i)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(a=!1,i<n&&(n=i));if(a){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[s,r,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){o.p="/"}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,i,n=s[0],a=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in a)o.o(a,r)&&(o.m[r]=a[r]);if(l)var d=l(o)}for(t&&t(s);c<n.length;c++)i=n[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(d)},s=self["webpackChunkgcodeviewer_site"]=self["webpackChunkgcodeviewer_site"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[998],(function(){return o(2090)}));s=o.O(s)})();
//# sourceMappingURL=app.de19ecd8.js.map